YUI.add("node-flick",function(e){function c(a){c.superclass.constructor.apply(this,arguments)}var g=e.ClassNameManager.getClassName;c.ATTRS={deceleration:{value:0.98},bounce:{value:0.7},bounceDistance:{value:150},minVelocity:{value:0},minDistance:{value:10},boundingBox:{valueFn:function(){return this.get("host").get("parentNode")}},step:{value:10},duration:{value:null},easing:{value:null}};c.NAME="pluginFlick";c.NS="flick";e.extend(c,e.Plugin.Base,{initializer:function(){this._node=this.get("host");
this._renderClasses();this.setBounds();this._node.on("flick",e.bind(this._onFlick,this),{minDistance:this.get("minDistance"),minVelocity:this.get("minVelocity")})},setBounds:function(){var a=this.get("boundingBox"),b=this._node,d=a.get("offsetHeight"),a=a.get("offsetWidth"),f=b.get("scrollHeight"),c=b.get("scrollWidth");f>d&&(this._maxY=f-d,this._minY=0,this._scrollY=!0);c>a&&(this._maxX=c-a,this._minX=0,this._scrollX=!0);this._x=this._y=0;b.set("top",this._y+"px");b.set("left",this._x+"px")},_renderClasses:function(){this.get("boundingBox").addClass(c.CLASS_NAMES.box);
this._node.addClass(c.CLASS_NAMES.content)},_onFlick:function(a){this._v=a.flick.velocity;this._flick=!0;this._flickAnim()},_flickAnim:function(){var a=this._y,b=this._x,d=this._maxY,f=this._minY,i=this._maxX,j=this._minX,h=this._v,k=this.get("step"),g=this.get("deceleration"),l=this.get("bounce");this._v=h*g;this._snapToEdge=!1;this._scrollX&&(b-=h*k);this._scrollY&&(a-=h*k);if(Math.abs(h).toFixed(4)<=c.VELOCITY_THRESHOLD){if(this._flick=!1,this._killTimer(!(this._exceededYBoundary||this._exceededXBoundary)),
this._scrollX&&(b<j?(this._snapToEdge=!0,this._setX(j)):b>i&&(this._snapToEdge=!0,this._setX(i))),this._scrollY)a<f?(this._snapToEdge=!0,this._setY(f)):a>d&&(this._snapToEdge=!0,this._setY(d))}else{if(this._scrollX&&(b<j||b>i))this._exceededXBoundary=!0,this._v*=l;if(this._scrollY&&(a<f||a>d))this._exceededYBoundary=!0,this._v*=l;this._scrollX&&this._setX(b);this._scrollY&&this._setY(a);this._flickTimer=e.later(k,this,this._flickAnim)}},_setX:function(a){this._move(a,null,this.get("duration"),this.get("easing"))},
_setY:function(a){this._move(null,a,this.get("duration"),this.get("easing"))},_move:function(a,b,d,f){a=null!==a?this._bounce(a):this._x;b=null!==b?this._bounce(b):this._y;d=d||this._snapToEdge?c.SNAP_DURATION:0;f=f||this._snapToEdge?c.SNAP_EASING:c.EASING;this._x=a;this._y=b;this._anim(a,b,d,f)},_anim:function(a,b,d,c){a*=-1;b*=-1;d={duration:d/1E3,easing:c};e.Transition.useNative?d.transform="translate("+a+"px,"+b+"px)":(d.left=a+"px",d.top=b+"px");this._node.transition(d)},_bounce:function(a,b){var d=
this.get("bounce"),c=this.get("bounceDistance"),e=d?-c:0,b=d?b+c:b;d||(a<e?a=e:a>b&&(a=b));return a},_killTimer:function(){this._flickTimer&&this._flickTimer.cancel()}},{VELOCITY_THRESHOLD:0.015,SNAP_DURATION:400,EASING:"cubic-bezier(0, 0.1, 0, 1.0)",SNAP_EASING:"ease-out",CLASS_NAMES:{box:g(c.NS),content:g(c.NS,"content")}});e.Plugin.Flick=c},"3.5.0",{requires:["classnamemanager","transition","event-flick","plugin"]});
