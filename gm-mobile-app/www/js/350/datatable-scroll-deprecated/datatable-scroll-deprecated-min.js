YUI.add("datatable-scroll-deprecated",function(c){function f(){f.superclass.constructor.apply(this,arguments)}var h=c.Node,n=c.Lang,i=c.UA,e=c.ClassNameManager.getClassName,k=e("datatable","hd"),l=e("datatable","bd"),o=e("datatable","data"),j=e("datatable","liner"),p=e("datatable","scrollable"),q='<div class="'+k+'"></div>',r='<div class="'+l+'"></div>',m=c.cached(function(){var a=c.one("body").appendChild('<div style="position:absolute;visibility:hidden;overflow:scroll;width:20px;"><p style="height:1px"/></div>'),
b=a.get("offsetWidth")-a.get("clientWidth");a.remove(!0);return b});c.mix(f,{NS:"scroll",NAME:"dataTableScroll",ATTRS:{width:{value:void 0,writeOnce:"initOnly"},height:{value:void 0,writeOnce:"initOnly"},_scroll:{valueFn:function(){var a=this.get("width"),b=this.get("height");return a&&b?"xy":a?"x":b?"y":null}},COLOR_COLUMNFILLER:{value:"#f2f2f2",validator:n.isString,setter:function(a){this._headerContainerNode&&this._headerContainerNode.setStyle("backgroundColor",a)}}}});c.extend(f,c.Plugin.Base,
{_parentTableNode:null,_parentTheadNode:null,_parentTbodyNode:null,_parentMsgNode:null,_parentContainer:null,_bodyContainerNode:null,_headerContainerNode:null,initializer:function(){this._parentContainer=this.get("host").get("contentBox");this._parentContainer.addClass(p);this._setUpNodes()},_setUpNodes:function(){this.afterHostMethod("_addTableNode",this._setUpParentTableNode);this.afterHostMethod("_addTheadNode",this._setUpParentTheadNode);this.afterHostMethod("_addTbodyNode",this._setUpParentTbodyNode);
this.afterHostMethod("_addMessageNode",this._setUpParentMessageNode);this.afterHostMethod("renderUI",this.renderUI);this.afterHostMethod("bindUI",this.bindUI);this.afterHostMethod("syncUI",this.syncUI);"x"!==this.get("_scroll")&&(this.afterHostMethod("_attachTheadThNode",this._attachTheadThNode),this.afterHostMethod("_attachTbodyTdNode",this._attachTbodyTdNode))},_setUpParentTableNode:function(){this._parentTableNode=this.get("host")._tableNode},_setUpParentTheadNode:function(){this._parentTheadNode=
this.get("host")._theadNode},_setUpParentTbodyNode:function(){this._parentTbodyNode=this.get("host")._tbodyNode},_setUpParentMessageNode:function(){this._parentMsgNode=this.get("host")._msgNode},renderUI:function(){this._createBodyContainer();this._createHeaderContainer();this._setContentBoxDimensions()},bindUI:function(){this._bodyContainerNode.on("scroll",c.bind("_onScroll",this));this.afterHostEvent("recordsetChange",this.syncUI);this.afterHostEvent("recordset:recordsChange",this.syncUI)},syncUI:function(){this._removeCaptionNode();
this._syncWidths();this._syncScroll()},_removeCaptionNode:function(){this.get("host")._captionNode.remove()},_syncWidths:function(){var a=this._parentContainer.one("."+k),b=this._parentContainer.one("."+l),a=a.all("thead ."+j),c=(b=b.one("."+o+" tr"))&&b.all("."+j),d=i.ie?"offsetWidth":"clientWidth";c&&c.size()&&a.each(function(a,b){var e=c.item(b),g=a.get(d),f=e.get(d),g=Math.max(g,f),g=g-((parseInt(a.getComputedStyle("paddingLeft"),10)|0)+(parseInt(a.getComputedStyle("paddingRight"),10)|0));a.setStyle("width",
g+"px");e.setStyle("width",g+"px")})},_attachTheadThNode:function(a){var b=a.column.get("width");b&&a.th.one("."+j).setStyles({width:b,overflow:"hidden"})},_attachTbodyTdNode:function(a){var b=a.column.get("width");b&&a.td.one("."+j).setStyles({width:b,overflow:"hidden"})},_createBodyContainer:function(){var a=h.create(r);this._bodyContainerNode=a;this._setStylesForTbody();a.appendChild(this._parentTableNode);this._parentContainer.appendChild(a)},_createHeaderContainer:function(){var a=h.create(q),
b=h.create("<table></table>");this._headerContainerNode=a;this._setStylesForThead();b.appendChild(this._parentTheadNode);a.appendChild(b);this._parentContainer.prepend(a)},_setStylesForTbody:function(){var a=this.get("_scroll"),b=this.get("width")||"",c=this._bodyContainerNode,d={width:"",height:this.get("height")||""};"x"===a?(d.overflowY="hidden",d.width=b):"y"===a?d.overflowX="hidden":("xy"!==a&&(d.overflowX="hidden",d.overflowY="hidden"),d.width=b);c.setStyles(d);return c},_setStylesForThead:function(){this._headerContainerNode.setStyles({width:this.get("width")||
"",overflow:"hidden"})},_setContentBoxDimensions:function(){("y"===this.get("_scroll")||!this.get("width"))&&this._parentContainer.setStyle("width","auto")},_onScroll:function(){this._headerContainerNode.set("scrollLeft",this._bodyContainerNode.get("scrollLeft"))},_syncScroll:function(){this._syncScrollX();this._syncScrollY();this._syncScrollOverhang();i.opera&&(this._headerContainerNode.set("scrollLeft",this._bodyContainerNode.get("scrollLeft")),this.get("width")||(document.body.style+=""))},_syncScrollY:function(){var a=
this._parentTbodyNode,b=this._bodyContainerNode;this.get("width")||(a=b.get("scrollHeight")>b.get("clientHeight")?a.get("parentNode").get("clientWidth")+m()+"px":a.get("parentNode").get("clientWidth")+2+"px",this._parentContainer.setStyle("width",a))},_syncScrollX:function(){var a=this._parentTbodyNode,b=this._bodyContainerNode,c;this._headerContainerNode.set("scrollLeft",this._bodyContainerNode.get("scrollLeft"));!this.get("height")&&i.ie&&(c=b.get("scrollWidth")>b.get("offsetWidth")?a.get("parentNode").get("offsetHeight")+
m()+"px":a.get("parentNode").get("offsetHeight")+"px",b.setStyle("height",c));a.get("rows").size()?this._parentMsgNode.get("parentNode").setStyle("width",""):this._parentMsgNode.get("parentNode").setStyle("width",this._parentTheadNode.get("parentNode").get("offsetWidth")+"px")},_syncScrollOverhang:function(){var a=this._bodyContainerNode,b=1;if(a.get("scrollHeight")>a.get("clientHeight")||a.get("scrollWidth")>a.get("clientWidth"))b=18;this._setOverhangValue(b);0!==i.ie&&"y"===this.get("_scroll")&&
this._bodyContainerNode.get("scrollHeight")>this._bodyContainerNode.get("offsetHeight")&&this._headerContainerNode.setStyle("width",this._parentContainer.get("width"))},_setOverhangValue:function(a){var b=this.get("host").get("columnset").get("definitions").length,a=a+"px solid "+this.get("COLOR_COLUMNFILLER");h.all("#"+this._parentContainer.get("id")+" ."+k+" table thead th").item(b-1).setStyle("borderRight",a)}});c.namespace("Plugin").DataTableScroll=f},"3.5.0",{requires:["datatable-base-deprecated",
"plugin"]});
