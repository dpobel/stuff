YUI.add("datasource-get",function(a){var g=function(){g.superclass.constructor.apply(this,arguments)};a.DataSource.Get=a.extend(g,a.DataSource.Local,{_defRequestFn:function(b){var h=this.get("source"),g=this.get("get"),c=a.guid().replace(/\-/g,"_"),i=this.get("generateRequestCallback"),d=b.details[0],e=this;this._last=c;YUI.Env.DataSource.callbacks[c]=function(f){delete YUI.Env.DataSource.callbacks[c];delete a.DataSource.Local.transactions[b.tId];if("ignoreStaleResponses"!==e.get("asyncMode")||e._last===
c)d.data=f,e.fire("data",d)};h+=b.request+i.call(this,c);a.DataSource.Local.transactions[b.tId]=g.script(h,{autopurge:!0,onFailure:function(f){delete YUI.Env.DataSource.callbacks[c];delete a.DataSource.Local.transactions[b.tId];d.error=Error(f.msg||"Script node data failure");e.fire("data",d)},onTimeout:function(f){delete YUI.Env.DataSource.callbacks[c];delete a.DataSource.Local.transactions[b.tId];d.error=Error(f.msg||"Script node data timeout");e.fire("data",d)}});return b.tId},_generateRequest:function(a){return"&"+
this.get("scriptCallbackParam")+"=YUI.Env.DataSource.callbacks."+a}},{NAME:"dataSourceGet",ATTRS:{get:{value:a.Get,cloneDefaultValue:!1},asyncMode:{value:"allowAll"},scriptCallbackParam:{value:"callback"},generateRequestCallback:{value:function(){return this._generateRequest.apply(this,arguments)}}}});YUI.namespace("Env.DataSource.callbacks")},"3.5.0",{requires:["datasource-local","get"]});
