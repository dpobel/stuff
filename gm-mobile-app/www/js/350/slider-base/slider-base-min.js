YUI.add("slider-base",function(b){function d(){d.superclass.constructor.apply(this,arguments)}var e=b.Attribute.INVALID_VALUE;b.SliderBase=b.extend(d,b.Widget,{initializer:function(){this.axis=this.get("axis");this._key={dim:"y"===this.axis?"height":"width",minEdge:"y"===this.axis?"top":"left",maxEdge:"y"===this.axis?"bottom":"right",xyIndex:"y"===this.axis?1:0};this.publish("thumbMove",{defaultFn:this._defThumbMoveFn,queuable:!0})},renderUI:function(){var a=this.get("contentBox");this.rail=this.renderRail();
this._uiSetRailLength(this.get("length"));this.thumb=this.renderThumb();this.rail.appendChild(this.thumb);a.appendChild(this.rail);a.addClass(this.getClassName(this.axis))},renderRail:function(){var a=this.getClassName("rail","cap",this._key.minEdge),c=this.getClassName("rail","cap",this._key.maxEdge);return b.Node.create(b.substitute(this.RAIL_TEMPLATE,{railClass:this.getClassName("rail"),railMinCapClass:a,railMaxCapClass:c}))},_uiSetRailLength:function(a){this.rail.setStyle(this._key.dim,a)},renderThumb:function(){this._initThumbUrl();
var a=this.get("thumbUrl");return b.Node.create(b.substitute(this.THUMB_TEMPLATE,{thumbClass:this.getClassName("thumb"),thumbShadowClass:this.getClassName("thumb","shadow"),thumbImageClass:this.getClassName("thumb","image"),thumbShadowUrl:a,thumbImageUrl:a,thumbAriaLabelId:this.getClassName("label",b.guid())}))},_onThumbClick:function(){this.thumb.focus()},bindUI:function(){var a=this.get("boundingBox"),c=!b.UA.opera?"down:":"press:",d=c+"37,39",e=c+"37+meta,39+meta";a.on("key",this._onDirectionKey,
c+"38,40,33,34,35,36",this);a.on("key",this._onLeftRightKey,d,this);a.on("key",this._onLeftRightKeyMeta,e,this);this.thumb.on("click",this._onThumbClick,this);this._bindThumbDD();this._bindValueLogic();this.after("disabledChange",this._afterDisabledChange);this.after("lengthChange",this._afterLengthChange)},_incrMinor:function(){this.set("value",this.get("value")+this.get("minorStep"))},_decrMinor:function(){this.set("value",this.get("value")-this.get("minorStep"))},_incrMajor:function(){this.set("value",
this.get("value")+this.get("majorStep"))},_decrMajor:function(){this.set("value",this.get("value")-this.get("majorStep"))},_setToMin:function(){this.set("value",this.get("min"))},_setToMax:function(){this.set("value",this.get("max"))},_onDirectionKey:function(a){a.preventDefault();if(!1===this.get("disabled"))switch(a.charCode){case 38:this._incrMinor();break;case 40:this._decrMinor();break;case 36:this._setToMin();break;case 35:this._setToMax();break;case 33:this._incrMajor();break;case 34:this._decrMajor()}},
_onLeftRightKey:function(a){a.preventDefault();if(!1===this.get("disabled"))switch(a.charCode){case 37:this._decrMinor();break;case 39:this._incrMinor()}},_onLeftRightKeyMeta:function(a){a.preventDefault();if(!1===this.get("disabled"))switch(a.charCode){case 37:this._setToMin();break;case 39:this._setToMax()}},_bindThumbDD:function(){var a={constrain:this.rail};a["stick"+this.axis.toUpperCase()]=!0;this._dd=new b.DD.Drag({node:this.thumb,bubble:!1,on:{"drag:start":b.bind(this._onDragStart,this)},
after:{"drag:drag":b.bind(this._afterDrag,this),"drag:end":b.bind(this._afterDragEnd,this)}});this._dd.plug(b.Plugin.DDConstrained,a)},_bindValueLogic:function(){},_uiMoveThumb:function(a,b){this.thumb&&(this.thumb.setStyle(this._key.minEdge,a+"px"),b||(b={}),b.offset=a,this.fire("thumbMove",b))},_onDragStart:function(a){this.fire("slideStart",{ddEvent:a,originEvent:a})},_afterDrag:function(a){this.fire("thumbMove",{offset:a.info.xy[this._key.xyIndex]-a.target.con._regionCache[this._key.minEdge],
ddEvent:a,originEvent:a})},_afterDragEnd:function(a){this.fire("slideEnd",{ddEvent:a,originEvent:a})},_afterDisabledChange:function(a){this._dd.set("lock",a.newVal)},_afterLengthChange:function(a){this.get("rendered")&&(this._uiSetRailLength(a.newVal),this.syncUI())},syncUI:function(){this._dd.con.resetCache();this._syncThumbPosition();this.thumb.set("aria-valuemin",this.get("min"));this.thumb.set("aria-valuemax",this.get("max"))},_syncThumbPosition:function(){},_setAxis:function(a){a=(a+"").toLowerCase();
return"x"===a||"y"===a?a:e},_setLength:function(a){var a=(a+"").toLowerCase(),b=parseFloat(a,10),a=a.replace(/[\d\.\-]/g,"")||this.DEF_UNIT;return 0<b?b+a:e},_initThumbUrl:function(){if(!this.get("thumbUrl")){var a=this.getSkinName()||"sam",c=b.config.base;0===c.indexOf("http://yui.yahooapis.com/combo")&&(c="http://yui.yahooapis.com/"+b.version+"/build/");this.set("thumbUrl",c+"slider-base/assets/skins/"+a+"/thumb-"+this.axis+".png")}},BOUNDING_TEMPLATE:"<span></span>",CONTENT_TEMPLATE:"<span></span>",
RAIL_TEMPLATE:'<span class="{railClass}"><span class="{railMinCapClass}"></span><span class="{railMaxCapClass}"></span></span>',THUMB_TEMPLATE:'<span class="{thumbClass}" aria-labelledby="{thumbAriaLabelId}" aria-valuetext="" aria-valuemax="" aria-valuemin="" aria-valuenow="" role="slider" tabindex="0"><img src="{thumbShadowUrl}" alt="Slider thumb shadow" class="{thumbShadowClass}"><img src="{thumbImageUrl}" alt="Slider thumb" class="{thumbImageClass}"></span>'},{NAME:"sliderBase",ATTRS:{axis:{value:"x",
writeOnce:!0,setter:"_setAxis",lazyAdd:!1},length:{value:"150px",setter:"_setLength"},thumbUrl:{value:null,validator:b.Lang.isString}}})},"3.5.0",{requires:["widget","substitute","dd-constrain","event-key"]});
