YUI.add("loader-base",function(g){YUI.Env[g.version]||function(){var a=g.version,b=g.Env.base,c=b+"combo?",e={version:a,root:a+"/build/",base:g.Env.base,comboBase:c,skin:{defaultSkin:"sam",base:"assets/skins/",path:"skin.css",after:"cssreset,cssfonts,cssgrids,cssbase,cssreset-context,cssfonts-context".split(",")},groups:{},patterns:{}},d=e.groups,f=function(a,e,f){a="2in3."+(a||"4")+"/"+(e||"2.9.0")+"/build/";e=f&&f.comboBase?f.comboBase:c;d.yui2.base=(f&&f.base?f.base:b)+a;d.yui2.root=a;d.yui2.comboBase=
e},h=function(a,e){var f=(a||"gallery-2012.04.10-14-57")+"/build/",h=e&&e.comboBase?e.comboBase:c;d.gallery.base=(e&&e.base?e.base:b)+f;d.gallery.root=f;d.gallery.comboBase=h};d[a]={};d.gallery={ext:!1,combine:!0,comboBase:c,update:h,patterns:{"gallery-":{},"lang/gallery-":{},"gallerycss-":{type:"css"}}};d.yui2={combine:!0,ext:!1,comboBase:c,update:f,patterns:{"yui2-":{configFn:function(a){/-skin|reset|fonts|grids|base/.test(a.name)&&(a.type="css",a.path=a.path.replace(/\.js/,".css"),a.path=a.path.replace(/\/yui2-skin/,
"/assets/skins/sam/yui2-skin"))}}}};h();f();YUI.Env[a]=e}();var A={},B=[],r=YUI.Env,E=r._loaded,C=g.version,z=g.Object,m=z.each,q=g.Array,u=r._loaderQueue,D=r[C],v=g.Lang,w=r.mods,x,y=function(a,b,c,e){a=a+"/"+b;e||(a+="-min");return a+("."+(c||"css"))};g.Env.meta=D;g.Loader=function(a){var b=D.modules,c=this,a=a||{};c.context=g;c.base=g.Env.meta.base+g.Env.meta.root;c.comboBase=g.Env.meta.comboBase;c.combine=a.base&&-1<a.base.indexOf(c.comboBase.substr(0,20));c.comboSep="&";c.maxURLLength=1024;c.root=
g.Env.meta.root;c.timeout=0;c.forceMap={};c.allowRollup=!1;c.filters={};c.required={};c.patterns={};c.moduleInfo={};c.groups=g.merge(g.Env.meta.groups);c.skin=g.merge(g.Env.meta.skin);c.conditions={};c.config=a;c._internal=!0;(x=r._renderedMods)?(m(x,function(a,b){c.moduleInfo[b]=g.merge(a)}),x=r._conditions,m(x,function(a,b){c.conditions[b]=g.merge(a)})):m(b,c.addModule,c);c.loaded=E[C];c._inspectPage();c._internal=!1;c._config(a);c.forceMap=c.force?g.Array.hash(c.force):{};c.testresults=null;g.config.tests&&
(c.testresults=g.config.tests);c.sorted=[];c.dirty=!0;c.inserted={};c.skipped={};c.tested={}};g.Loader.prototype={REGEX_CSS:/\.css(?:[?;].*)?$/i,FILTER_DEFS:{RAW:{searchExp:"-min\\.js",replaceStr:".js"},DEBUG:{searchExp:"-min\\.js",replaceStr:"-debug.js"}},_inspectPage:function(){m(this.moduleInfo,function(a,b){a.type&&"css"===a.type&&this.isCSSLoaded(a.name)&&(this.loaded[b]=!0)},this);m(w,function(a,b){if(a.details){var c=this.moduleInfo[b],e=a.details.requires,d=c&&c.requires;c?!c._inspected&&
e&&d.length!=e.length&&delete c.expanded:c=this.addModule(a.details,b);c._inspected=!0}},this)},_requires:function(a,b){var c,e,d,f=this.moduleInfo,h=f[a],g=f[b];if(!h||!g)return!1;e=h.expanded_map;if((c=h.after_map)&&b in c)return!0;if((c=g.after_map)&&a in c)return!1;if(d=f[b]&&f[b].supersedes)for(c=0;c<d.length;c++)if(this._requires(a,d[c]))return!0;if(d=f[a]&&f[a].supersedes)for(c=0;c<d.length;c++)if(this._requires(b,d[c]))return!1;return e&&b in e||h.ext&&"css"==h.type&&!g.ext&&"css"==g.type?
!0:!1},_config:function(a){var b,c,e,d,f;if(a)for(b in a)if(a.hasOwnProperty(b))if(e=a[b],"require"==b)this.require(e);else if("skin"==b)"string"===typeof e&&(this.skin.defaultSkin=a.skin,e={defaultSkin:e}),g.mix(this.skin,e,!0);else if("groups"==b)for(c in e)e.hasOwnProperty(c)&&(f=c,d=e[c],this.addGroup(d,f),d.aliases&&m(d.aliases,this.addAlias,this));else"modules"==b?m(e,this.addModule,this):"aliases"===b?m(e,this.addAlias,this):"gallery"==b?this.groups.gallery.update(e,a):"yui2"==b||"2in3"==b?
this.groups.yui2.update(a["2in3"],a.yui2,a):this[b]=e;a=this.filter;v.isString(a)&&(this.filterName=a=a.toUpperCase(),this.filter=this.FILTER_DEFS[a],"DEBUG"==a&&this.require("yui-log","dump"))},formatSkin:function(a,b){var c="skin-"+a;b&&(c=c+"-"+b);return c},_addSkin:function(a,b,c){var e,d,f;e=this.moduleInfo;var h=this.skin,g=e[b]&&e[b].ext;if(b&&(f=this.formatSkin(a,b),!e[f]))e=e[b],d=e.pkg||b,a={name:f,group:e.group,type:"css",after:h.after,path:(c||d)+"/"+h.base+a+"/"+b+".css",ext:g},e.base&&
(a.base=e.base),e.configFn&&(a.configFn=e.configFn),this.addModule(a,f);return f},addAlias:function(a,b){YUI.Env.aliases[b]=a;this.addModule({name:b,use:a})},addGroup:function(a,b){var c=a.modules,e=this,b=b||a.name;a.name=b;e.groups[b]=a;a.patterns&&m(a.patterns,function(a,c){a.group=b;e.patterns[c]=a});c&&m(c,function(a,c){"string"===typeof a&&(a={name:c,fullpath:a});a.group=b;e.addModule(a,c)},e)},addModule:function(a,b){b=b||a.name;"string"===typeof a&&(a={name:b,fullpath:a});this.moduleInfo[b]&&
this.moduleInfo[b].temp&&(a=g.merge(this.moduleInfo[b],a));a.name=b;if(!a||!a.name)return null;if(!a.type){a.type="js";var c=a.path||a.fullpath;c&&this.REGEX_CSS.test(c)&&(a.type="css")}!a.path&&!a.fullpath&&(a.path=y(b,b,a.type));a.supersedes=a.supersedes||a.use;a.ext="ext"in a?a.ext:this._internal?!1:!0;var e=a.submodules,d,f,h,n,i,k,j,o,p,s,l,c=this.conditions;this.moduleInfo[b]=a;a.requires=a.requires||[];a.skinnable&&(p=this._addSkin(this.skin.defaultSkin,b),a.requires.unshift(p));a.requires=
this.filterRequires(a.requires)||[];if(!a.langPack&&a.lang){i=q(a.lang);for(o=0;o<i.length;o++)l=i[o],p=this.getLangPackName(l,b),(k=this.moduleInfo[p])||this._addLangPack(l,a,p)}if(e){n=a.supersedes||[];f=0;for(d in e)if(e.hasOwnProperty(d)){i=e[d];i.path=i.path||y(b,d,a.type);i.pkg=b;i.group=a.group;i.supersedes&&(n=n.concat(i.supersedes));k=this.addModule(i,d);n.push(d);if(k.skinnable){a.skinnable=!0;if((k=this.skin.overrides)&&k[d])for(o=0;o<k[d].length;o++)p=this._addSkin(k[d][o],d,b),n.push(p);
p=this._addSkin(this.skin.defaultSkin,d,b);n.push(p)}if(i.lang&&i.lang.length){i=q(i.lang);for(o=0;o<i.length;o++)l=i[o],p=this.getLangPackName(l,b),s=this.getLangPackName(l,d),(k=this.moduleInfo[p])||(k=this._addLangPack(l,a,p)),h=h||q.hash(k.supersedes),s in h||k.supersedes.push(s),a.lang=a.lang||[],j=j||q.hash(a.lang),l in j||a.lang.push(l),p=this.getLangPackName("",b),s=this.getLangPackName("",d),(k=this.moduleInfo[p])||(k=this._addLangPack(l,a,p)),s in h||k.supersedes.push(s)}f++}a.supersedes=
q.dedupe(n);this.allowRollup&&(a.rollup=4>f?f:Math.min(f-1,4))}if(h=a.plugins)for(d in h)h.hasOwnProperty(d)&&(j=h[d],j.pkg=b,j.path=j.path||y(b,d,a.type),j.requires=j.requires||[],j.group=a.group,this.addModule(j,d),a.skinnable&&this._addSkin(this.skin.defaultSkin,d,b));if(a.condition){h=a.condition.trigger;YUI.Env.aliases[h]&&(h=YUI.Env.aliases[h]);g.Lang.isArray(h)||(h=[h]);for(d=0;d<h.length;d++)e=h[d],j=a.condition.when,c[e]=c[e]||{},c[e][b]=a.condition,j&&"after"!=j?"instead"==j&&(a.supersedes=
a.supersedes||[],a.supersedes.push(e)):(a.after=a.after||[],a.after.push(e))}a.supersedes&&(a.supersedes=this.filterRequires(a.supersedes));a.after&&(a.after=this.filterRequires(a.after),a.after_map=q.hash(a.after));a.configFn&&(d=a.configFn(a),!1===d&&(delete this.moduleInfo[b],delete r._renderedMods[b],a=null));a&&(r._renderedMods||(r._renderedMods={}),r._renderedMods[b]=g.merge(a),r._conditions=c);return a},require:function(a){var b="string"===typeof a?q(arguments):a;this.dirty=!0;this.required=
g.merge(this.required,q.hash(this.filterRequires(b)));this._explodeRollups()},_explodeRollups:function(){var a=this,b,c=a.required;a.allowRollup||(m(c,function(e,d){(b=a.getModule(d))&&b.use&&q.each(b.use,function(d){(b=a.getModule(d))&&b.use?q.each(b.use,function(a){c[a]=!0}):c[d]=!0})}),a.required=c)},filterRequires:function(a){if(a){g.Lang.isArray(a)||(a=[a]);var a=g.Array(a),b=[],c,e,d,f;for(c=0;c<a.length;c++)if((e=this.getModule(a[c]))&&e.use)for(d=0;d<e.use.length;d++)(f=this.getModule(e.use[d]))&&
f.use?b=g.Array.dedupe([].concat(b,this.filterRequires(f.use))):b.push(e.use[d]);else b.push(a[c]);a=b}return a},getRequires:function(a){if(!a)return B;if(a._parsed)return a.expanded||B;var b,c,e,d,f,h=this.testresults,n=a.name;b=w[n]&&w[n].details;var i,k,j,o,p;f=a.lang||a.intl;o=this.moduleInfo;var s=g.Features&&g.Features.tests.load,l;a.temp&&b&&(j=a,a=this.addModule(b,n),a.group=j.group,a.pkg=j.pkg,delete a.expanded);if(a.expanded&&(!this.lang||a.langCache===this.lang))return a.expanded;i=[];
l={};k=this.filterRequires(a.requires);a.lang&&(i.unshift("intl"),k.unshift("intl"),f=!0);j=this.filterRequires(a.optional);a._parsed=!0;a.langCache=this.lang;for(b=0;b<k.length;b++)if(!l[k[b]]&&(i.push(k[b]),l[k[b]]=!0,c=this.getModule(k[b]))){d=this.getRequires(c);f=f||c.expanded_map&&"intl"in c.expanded_map;for(e=0;e<d.length;e++)i.push(d[e])}if(k=this.filterRequires(a.supersedes))for(b=0;b<k.length;b++)if(!l[k[b]]&&(a.submodules&&i.push(k[b]),l[k[b]]=!0,c=this.getModule(k[b]))){d=this.getRequires(c);
f=f||c.expanded_map&&"intl"in c.expanded_map;for(e=0;e<d.length;e++)i.push(d[e])}if(j&&this.loadOptional)for(b=0;b<j.length;b++)if(!l[j[b]]&&(i.push(j[b]),l[j[b]]=!0,c=o[j[b]])){d=this.getRequires(c);f=f||c.expanded_map&&"intl"in c.expanded_map;for(e=0;e<d.length;e++)i.push(d[e])}if(b=this.conditions[n])a._parsed=!1,h&&s?m(h,function(a,b){var c=s[b].name;if(!l[c]&&s[b].trigger==n&&a&&s[b]){l[c]=true;i.push(c)}}):m(b,function(a,b){if(!l[b]&&a&&(!a.ua&&!a.test||a.ua&&g.UA[a.ua]||a.test&&a.test(g,k))){l[b]=
true;i.push(b);if(c=this.getModule(b)){d=this.getRequires(c);for(e=0;e<d.length;e++)i.push(d[e])}}},this);if(a.skinnable)if(o=this.skin.overrides,m(YUI.Env.aliases,function(a,b){g.Array.indexOf(a,n)>-1&&(p=b)}),o&&(o[n]||p&&o[p])){j=n;o[p]&&(j=p);for(b=0;b<o[j].length;b++)h=this._addSkin(o[j][b],n),this.isCSSLoaded(h,this._boot)||i.push(h)}else h=this._addSkin(this.skin.defaultSkin,n),this.isCSSLoaded(h,this._boot)||i.push(h);a._parsed=!1;f&&(a.lang&&!a.langPack&&g.Intl&&(f=g.Intl.lookupBestLang(this.lang||
"",a.lang),(f=this.getLangPackName(f,n))&&i.unshift(f)),i.unshift("intl"));a.expanded_map=q.hash(i);a.expanded=z.keys(a.expanded_map);return a.expanded},isCSSLoaded:function(a,b){if(!a||!YUI.Env.cssStampEl||!b&&this.ignoreRegistered)return!1;var c=YUI.Env.cssStampEl,e=!1,d=c.currentStyle;c.className=a;d||(d=g.config.doc.defaultView.getComputedStyle(c,null));d&&"none"===d.display&&(e=!0);c.className="";return e},getProvides:function(a){var b=this.getModule(a),c,e;if(!b)return A;b&&!b.provides&&(c=
{},(e=b.supersedes)&&q.each(e,function(a){g.mix(c,this.getProvides(a))},this),c[a]=!0,b.provides=c);return b.provides},calculate:function(a,b){if(a||b||this.dirty)a&&this._config(a),this._init||this._setup(),this._explode(),this.allowRollup?this._rollup():this._explodeRollups(),this._reduce(),this._sort()},_addLangPack:function(a,b,c){var e=b.name,d;if(!this.moduleInfo[c]&&(d=y(b.pkg||e,c,"js",!0),d={path:d,intl:!0,langPack:!0,ext:b.ext,group:b.group,supersedes:[]},b.configFn&&(d.configFn=b.configFn),
this.addModule(d,c),a))g.Env.lang=g.Env.lang||{},g.Env.lang[a]=g.Env.lang[a]||{},g.Env.lang[a][e]=!0;return this.moduleInfo[c]},_setup:function(){var a=this.moduleInfo,b,c,e,d;for(b in a)if(a.hasOwnProperty(b)&&(e=a[b]))e.requires=q.dedupe(e.requires),e.lang&&e.lang.length&&(d=this.getLangPackName("",b),this._addLangPack(null,e,d));a={};this.ignoreRegistered||g.mix(a,r.mods);this.ignore&&g.mix(a,q.hash(this.ignore));for(c in a)a.hasOwnProperty(c)&&g.mix(a,this.getProvides(c));if(this.force)for(c=
0;c<this.force.length;c++)this.force[c]in a&&delete a[this.force[c]];g.mix(this.loaded,a);this._init=!0},getLangPackName:function(a,b){return"lang/"+b+(a?"_"+a:"")},_explode:function(){var a=this.required,b,c,e={},d=this;d.dirty=!1;d._explodeRollups();a=d.required;m(a,function(f,h){if(!e[h]&&(e[h]=!0,b=d.getModule(h))){var n=b.expound;n&&(a[n]=d.getModule(n),c=d.getRequires(a[n]),g.mix(a,q.hash(c)));c=d.getRequires(b);g.mix(a,q.hash(c))}})},getModule:function(a){if(!a)return null;var b,c,e,d=this.moduleInfo[a],
f=this.patterns;if(!d){for(e in f)if(f.hasOwnProperty(e)&&(b=f[e],b.test||(b.test=function(a,b){return-1<a.indexOf(b)}),b.test(a,e))){c=b;break}c&&(b.action?b.action.call(this,a,e):(d=this.addModule(g.merge(c),a),d.temp=!0))}return d},_rollup:function(){},_reduce:function(a){var a=a||this.required,b,c,e,d=this.loadType,f=this.ignore?q.hash(this.ignore):!1;for(b in a)if(a.hasOwnProperty(b)&&(c=this.getModule(b),((this.loaded[b]||w[b])&&!this.forceMap[b]&&!this.ignoreRegistered||d&&c&&c.type!=d)&&delete a[b],
f&&f[b]&&delete a[b],e=c&&c.supersedes))for(c=0;c<e.length;c++)e[c]in a&&delete a[e[c]];return a},_finish:function(a,b){u.running=!1;var c=this.onEnd;c&&c.call(this.context,{msg:a,data:this.data,success:b});this._continue()},_onSuccess:function(){var a=this,b=g.merge(a.skipped),c,e=[],d=a.requireRegistration,f,h;m(b,function(b){delete a.inserted[b]});a.skipped={};m(a.inserted,function(b,c){var f=a.getModule(c);f&&d&&"js"==f.type&&!(c in YUI.Env.mods)?e.push(c):g.mix(a.loaded,a.getProvides(c))});c=
a.onSuccess;h=e.length?"notregistered":"success";f=!e.length;c&&c.call(a.context,{msg:h,data:a.data,success:f,failed:e,skipped:b});a._finish(h,f)},_onProgress:function(a){this.onProgress&&this.onProgress.call(this.context,{name:a.url,data:a.data})},_onFailure:function(a){var b=this.onFailure,c=[],e=0,d=a.errors.length;for(e;e<d;e++)c.push(a.errors[e].error);c=c.join(",");b&&b.call(this.context,{msg:c,data:this.data,success:!1});this._finish(c,!1)},_onTimeout:function(){var a=this.onTimeout;a&&a.call(this.context,
{msg:"timeout",data:this.data,success:!1})},_sort:function(){for(var a=z.keys(this.required),b={},c=0,e,d,f,h,g,i;;){e=a.length;g=!1;for(f=c;f<e;f++){d=a[f];for(h=f+1;h<e;h++)if(i=d+a[h],!b[i]&&this._requires(d,a[h])){d=a.splice(h,1);a.splice(f,0,d[0]);g=b[i]=!0;break}if(g)break;else c++}if(!g)break}this.sorted=a},_insert:function(a,b,c,e){a&&this._config(a);e||this.calculate(b);var a=this.resolve(),d=this,f=0,h=0;c&&(a["js"===c?"css":"js"]=[]);a.js.length&&f++;a.css.length&&f++;var n=function(a){h++;
var b=0;if(a&&a.errors)for(b=0;b<a.errors.length;b++);if(a&&a.data&&a.data.length&&"success"===a.type)for(b=0;b<a.data.length;b++)d.inserted[a.data[b].name]=!0;h===f&&(d._loading=null,a&&a.fn&&(b=a.fn,delete a.fn,b.call(d,a)))};this._loading=!0;!a.js.length&&!a.css.length?(h=-1,n({fn:d._onSuccess})):(a.css.length&&g.Get.css(a.css,{data:a.cssMods,attributes:d.cssAttributes,insertBefore:d.insertBefore,charset:d.charset,timeout:d.timeout,context:d,onProgress:function(a){d._onProgress.call(d,a)},onTimeout:function(a){d._onTimeout.call(d,
a)},onSuccess:function(a){a.type="success";a.fn=d._onSuccess;n.call(d,a)},onFailure:function(a){a.type="failure";a.fn=d._onFailure;n.call(d,a)}}),a.js.length&&g.Get.js(a.js,{data:a.jsMods,insertBefore:d.insertBefore,attributes:d.jsAttributes,charset:d.charset,timeout:d.timeout,autopurge:!1,context:d,async:!0,onProgress:function(a){d._onProgress.call(d,a)},onTimeout:function(a){d._onTimeout.call(d,a)},onSuccess:function(a){a.type="success";a.fn=d._onSuccess;n.call(d,a)},onFailure:function(a){a.type=
"failure";a.fn=d._onFailure;n.call(d,a)}}))},_continue:function(){!u.running&&0<u.size()&&(u.running=!0,u.next()())},insert:function(a,b,c){var e=this,d=g.merge(this);delete d.require;delete d.dirty;u.add(function(){e._insert(d,a,b,c)});this._continue()},loadNext:function(){},_filter:function(a,b,c){var e=this.filter,d=b&&b in this.filters,f=d&&this.filters[b];if((b=c||(this.moduleInfo[b]?this.moduleInfo[b].group:null))&&this.groups[b]&&this.groups[b].filter)f=this.groups[b].filter,d=!0;a&&(d&&(e=
v.isString(f)?this.FILTER_DEFS[f.toUpperCase()]||null:f),e&&(a=a.replace(RegExp(e.searchExp,"g"),e.replaceStr)));return a},_url:function(a,b,c){return this._filter((c||this.base||"")+a,b)},resolve:function(a,b){var c,e,d,f,h,g,i,k,j,o,p,s=[],l,m={},t=this;p=t.ignoreRegistered?{}:t.inserted;var q={js:[],jsMods:[],css:[],cssMods:[]},r=t.loadType||"js";a&&t.calculate();b=b||t.sorted;l=function(a){if(a){h=a.group&&t.groups[a.group]||A;!1===h.async&&(a.async=h.async);f=a.fullpath?t._filter(a.fullpath,
b[e]):t._url(a.path,b[e],h.base||a.base);if(a.attributes||!1===a.async)f={url:f,async:a.async},a.attributes&&(f.attributes=a.attributes);q[a.type].push(f);q[a.type+"Mods"].push(a)}};c=b.length;f=o=t.comboBase;j={};for(e=0;e<c;e++){k=o;g=(d=t.getModule(b[e]))&&d.group;h=t.groups[g];if(g&&h){if(!h.combine||d.fullpath){l(d);continue}d.combine=!0;h.comboBase&&(k=h.comboBase);"root"in h&&v.isValue(h.root)&&(d.root=h.root);d.comboSep=h.comboSep||t.comboSep;d.maxURLLength=h.maxURLLength||t.maxURLLength}else if(!t.combine){l(d);
continue}j[k]=j[k]||[];j[k].push(d)}for(i in j)if(j.hasOwnProperty(i)&&(m[i]=m[i]||{js:[],jsMods:[],css:[],cssMods:[]},f=i,g=j[i],c=g.length))for(e=0;e<c;e++)p[g[e]]||((d=g[e])&&(d.combine||!d.ext)?(m[i].comboSep=d.comboSep,m[i].group=d.group,m[i].maxURLLength=d.maxURLLength,k=(v.isValue(d.root)?d.root:t.root)+(d.path||d.fullpath),k=t._filter(k,d.name),m[i][d.type].push(k),m[i][d.type+"Mods"].push(d)):g[e]&&l(g[e]));for(i in m)for(r in j=i,k=m[j].comboSep||t.comboSep,o=m[j].maxURLLength||t.maxURLLength,
m[j])if("js"===r||"css"===r){p=m[j][r];g=m[j][r+"Mods"];c=p.length;l=j+p.join(k);d=l.length;o<=j.length&&(o=1024);if(c)if(d>o){s=[];for(b=0;b<c;b++)s.push(p[b]),l=j+s.join(k),l.length>o&&(d=s.pop(),l=j+s.join(k),q[r].push(t._filter(l,null,m[j].group)),s=[],d&&s.push(d));s.length&&(l=j+s.join(k),q[r].push(t._filter(l,null,m[j].group)))}else q[r].push(t._filter(l,null,m[j].group));q[r+"Mods"]=q[r+"Mods"].concat(g)}m=null;return q},load:function(a){if(a){var b=this,c=b.resolve(!0);b.data=c;b.onEnd=function(){a.apply(b.context||
b,arguments)};b.insert()}}}},"3.5.0",{requires:["get","features"]});
