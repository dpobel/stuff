YUI.add("scrollview-paginator",function(f){function g(){g.superclass.constructor.apply(this,arguments)}var i=f.ScrollView?f.ScrollView.UI_SRC:"ui";g.NAME="pluginScrollViewPaginator";g.NS="pages";g.ATTRS={selector:{value:null},index:{value:0},prevIndex:{value:0},total:{value:0}};f.extend(g,f.Plugin.Base,{optimizeMemory:!1,_pageOffsets:null,_pageNodes:null,initializer:function(a){var c=a.optimizeMemory||c;this._host=this.get("host");this.beforeHostMethod("_flickFrame",this._flickFrame);this.afterHostMethod("_uiDimensionsChange",
this._calcOffsets);this.afterHostEvent("scrollEnd",this._scrollEnded);this.afterHostEvent("render",this._afterRender);this.after("indexChange",this._afterIndexChange);this.optimizeMemory=c;this._pageNodes=new f.NodeList},_calcOffsets:function(){var a=this._host,c=a.get("contentBox");a.get("boundingBox");var b=a._scrollsVertical,d=this.get("selector"),e=this.optimizeMemory,h=this.get("index");this._pageNodes=d=d?c.all(d):c.get("children");this.set("total",d.size());this._pageOffsets=d.get(b?"offsetTop":
"offsetLeft");if(e){this.set("prevIndex",h);a._maxScrollX=this._pageOffsets[2];c.empty(!0);for(b=0;3>b;b++)a=d.item(h+b),c.append(a)}},_getTargetOffset:function(a){var c=this.get("prevIndex"),b=this.get("index"),d=this.get("total");return this._pageOffsets[this.optimizeMemory?c<b?1<a?2:1:b==d-2?1:0:a]},_flickFrame:function(){var a=this._host._currentVelocity,c=0>a,b=this.get("index"),d=this.get("total");a&&(c&&b<d-1?this.next():!c&&0<b&&this.prev());return this._prevent},_afterRender:function(){var a=
this._host;a.get("boundingBox").addClass(a.getClassName("paged"))},_scrollEnded:function(a){var c=this._host,b=this.get("index"),d=this.get("total"),e=g.SNAP_TO_CURRENT,h=this.optimizeMemory;a.onGestureMoveEnd&&!c._flicking&&(c._scrolledHalfway?c._scrolledForward&&b<d-1?this.next():0<b?this.prev():this.snapToCurrent(e.duration,e.easing):this.snapToCurrent(e.duration,e.easing));a.onGestureMoveEnd||(h&&this._manageDOM(),this.set("prevIndex",b))},_manageDOM:function(){var a,c,b,d=this._host;b=d.get("contentBox");
var e=this.get("index"),h=this.get("prevIndex"),g=this.get("total"),h=h<e?!0:!1,f=b.get("children");if((a=this._pageNodes)&&0<a.size())h?(a=a.item(e+1),c=b.append):(a=a.item(e-1),c=b.prepend),-1===f.indexOf(a)&&c.call(b,a),f=b.get("children");3<f.size()&&(b=h?b.one("li:first-of-type"):b.one("li:last-of-type"),b.remove(),d.set("scrollX",this._pageOffsets[e==g?2:1]))},_afterIndexChange:function(a){a.src!==i&&this._uiIndex(a.newVal)},_uiIndex:function(a){this.scrollTo(a,350,"ease-out")},next:function(){var a=
this.get("index");a<this.get("total")-1&&this.set("index",a+1)},prev:function(){var a=this.get("index");0<a&&this.set("index",a-1)},scrollTo:function(a,c,b){var d=this._host,e=d._scrollsVertical?"scrollY":"scrollX",a=this._getTargetOffset(a);d.set(e,a,{duration:c,easing:b})},snapToCurrent:function(a,c){var b=this._host,d=b._scrollsVertical;b._killTimer();b.set(d?"scrollY":"scrollX",this._getTargetOffset(this.get("index")),{duration:a,easing:c})},_prevent:new f.Do.Prevent});g.SNAP_TO_CURRENT={duration:300,
easing:"ease-out"};f.namespace("Plugin").ScrollViewPaginator=g},"3.5.0",{requires:["plugin"]});
