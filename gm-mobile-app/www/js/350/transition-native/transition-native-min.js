YUI.add("transition-native",function(e){var p="",q="",y=e.config.doc,r="Transition",s,t,u,v,n,w,z={},d=function(){this.init.apply(this,arguments)};d._toCamel=function(a){return a=a.replace(/-([a-z])/gi,function(b,a){return a.toUpperCase()})};d._toHyphen=function(a){return a=a.replace(/([A-Z]?)([a-z]+)([A-Z]?)/g,function(b,a,d,e){b=(a?"-"+a.toLowerCase():"")+d;e&&(b+="-"+e.toLowerCase());return b})};d.SHOW_TRANSITION="fadeIn";d.HIDE_TRANSITION="fadeOut";d.useNative=!1;e.Array.each(["Webkit","Moz"],
function(a){a+r in y.documentElement.style&&(p=a,q=d._toHyphen(a)+"-",d.useNative=!0,d.supported=!0)});r=p+r;s=q+"transition-property";t=q+"transition-duration";u=q+"transition-timing-function";v=q+"transition-delay";n="transitionend";p.toLowerCase();n={Webkit:"webkitTransitionEnd"}[p]||n;w=p+"Transform";d.fx={};d.toggles={};d._hasEnd={};d._reKeywords=/^(?:node|duration|iterations|easing|delay|on|onstart|onend)$/i;e.Node.DOM_EVENTS[n]=1;d.NAME="transition";d.DEFAULT_EASING="ease";d.DEFAULT_DURATION=
0.5;d.DEFAULT_DELAY=0;d._nodeAttrs={};d.prototype={constructor:d,init:function(a,b){this._node=a;!this._running&&b&&(this._config=b,a._transition=this,this._duration="duration"in b?b.duration:this.constructor.DEFAULT_DURATION,this._delay="delay"in b?b.delay:this.constructor.DEFAULT_DELAY,this._easing=b.easing||this.constructor.DEFAULT_EASING,this._count=0,this._running=!1);return this},addProperty:function(a,b){var c=this,f=this._node,g=e.stamp(f),h=e.one(f),j=d._nodeAttrs[g],k,i;j||(j=d._nodeAttrs[g]=
{});g=j[a];b&&void 0!==b.value?i=b.value:void 0!==b&&(i=b,b=z);"function"===typeof i&&(i=i.call(h,h));g&&g.transition&&g.transition!==c&&g.transition._count--;c._count++;k=("undefined"!=typeof b.duration?b.duration:c._duration)||1.0E-4;j[a]={value:i,duration:k,delay:"undefined"!=typeof b.delay?b.delay:c._delay,easing:b.easing||c._easing,transition:c};h=e.DOM.getComputedStyle(f,a);h="string"===typeof i?h:parseFloat(h);d.useNative&&h===i&&setTimeout(function(){c._onNativeEnd.call(f,{propertyName:a,
elapsedTime:k})},1E3*k)},removeProperty:function(a){var b=d._nodeAttrs[e.stamp(this._node)];b&&b[a]&&(delete b[a],this._count--)},initAttrs:function(a){var b,c=this._node;a.transform&&!a[w]&&(a[w]=a.transform,delete a.transform);for(b in a)a.hasOwnProperty(b)&&!d._reKeywords.test(b)&&(this.addProperty(b,a[b]),""===c.style[b]&&e.DOM.setStyle(c,b,e.DOM.getComputedStyle(c,b)))},run:function(a){var b=this._node,c=this._config,d={type:"transition:start",config:c};this._running||(this._running=!0,c.on&&
c.on.start&&c.on.start.call(e.one(b),d),this.initAttrs(this._config),this._callback=a,this._start());return this},_start:function(){this._runNative()},_prepDur:function(a){a=parseFloat(a);return a+"s"},_runNative:function(){var a=this._node,b=e.stamp(a),c=a.style,f=getComputedStyle(a),g=d._nodeAttrs[b],h="",j=f[d._toCamel(s)],k=s+": ",i=t+": ",l=u+": ",m=v+": ",o;"all"!==j&&(k+=j+",",i+=f[d._toCamel(t)]+",",l+=f[d._toCamel(u)]+",",m+=f[d._toCamel(v)]+",");for(o in g)if(f=d._toHyphen(o),j=g[o],(j=
g[o])&&j.transition===this)o in a.style?(i+=this._prepDur(j.duration)+",",m+=this._prepDur(j.delay)+",",l+=j.easing+",",k+=f+",",h+=f+": "+j.value+"; "):this.removeProperty(o);k=k.replace(/,$/,";");i=i.replace(/,$/,";");l=l.replace(/,$/,";");m=m.replace(/,$/,";");d._hasEnd[b]||(a.addEventListener(n,this._onNativeEnd,""),d._hasEnd[b]=!0);c.cssText+=k+i+l+m+h},_end:function(a){var b=this._node,c=this._callback,d=this._config,g={type:"transition:end",config:d,elapsedTime:a},h=e.one(b);this._running=
!1;this._callback=null;b&&(d.on&&d.on.end?setTimeout(function(){d.on.end.call(h,g);c&&c.call(h,g)},1):c&&setTimeout(function(){c.call(h,g)},1))},_endNative:function(a){var b=this._node,c=b.ownerDocument.defaultView.getComputedStyle(b,"")[d._toCamel(s)];"string"===typeof c&&(c=c.replace(RegExp("(?:^|,\\s)"+a+",?"),","),c=c.replace(/^,|,$/,""),b.style[r]=c)},_onNativeEnd:function(a){var b=e.stamp(this),c=d._toCamel(a.propertyName),a=a.elapsedTime,b=(b=d._nodeAttrs[b][c])?b.transition:null,f;b&&(b.removeProperty(c),
b._endNative(c),f=b._config[c],c={type:"propertyEnd",propertyName:c,elapsedTime:a,config:f},f&&f.on&&f.on.end&&f.on.end.call(e.one(this),c),0>=b._count&&b._end(a))},destroy:function(){var a=this._node;a&&(a.removeEventListener(n,this._onNativeEnd,!1),this._node=null)}};e.Transition=d;e.TransitionNative=d;e.Node.prototype.transition=function(a,b,c){var f=d._nodeAttrs[e.stamp(this._node)],f=f?f.transition||null:null,g;if("string"===typeof a)if("function"===typeof b&&(c=b,b=null),a=d.fx[a],b&&"boolean"!==
typeof b)for(g in b=e.clone(b),a)a.hasOwnProperty(g)&&(g in b||(b[g]=a[g]));else b=a;else c=b,b=a;f&&!f._running?f.init(this,b):f=new d(this._node,b);f.run(c);return this};e.Node.prototype.show=function(a,b,c){this._show();a&&e.Transition&&("string"!==typeof a&&!a.push&&("function"===typeof b&&(c=b,b=a),a=d.SHOW_TRANSITION),this.transition(a,b,c));return this};var x=function(a,b,c){return function(){b&&b.call(a);c&&c.apply(a._node,arguments)}};e.Node.prototype.hide=function(a,b,c){a&&e.Transition?
("function"===typeof b&&(c=b,b=null),c=x(this,this._hide,c),"string"!==typeof a&&!a.push&&("function"===typeof b&&(c=b,b=a),a=d.HIDE_TRANSITION),this.transition(a,b,c)):this._hide();return this};e.NodeList.prototype.transition=function(a,b){for(var c=this._nodes,d=0,g;g=c[d++];)e.one(g).transition(a,b);return this};e.Node.prototype.toggleView=function(a,b,c){this._toggles=this._toggles||[];c=arguments[arguments.length-1];"boolean"==typeof a&&(b=a,a=null);a=a||e.Transition.DEFAULT_TOGGLE;"undefined"==
typeof b&&a in this._toggles&&(b=!this._toggles[a]);(b=b?1:0)?this._show():c=x(this,this._hide,c);this._toggles[a]=b;this.transition(e.Transition.toggles[a][b],c);return this};e.NodeList.prototype.toggleView=function(a,b,c){for(var d=this._nodes,g=0,h;h=d[g++];)e.one(h).toggleView(a,b,c);return this};e.mix(d.fx,{fadeOut:{opacity:0,duration:0.5,easing:"ease-out"},fadeIn:{opacity:1,duration:0.5,easing:"ease-in"},sizeOut:{height:0,width:0,duration:0.75,easing:"ease-out"},sizeIn:{height:function(a){return a.get("scrollHeight")+
"px"},width:function(a){return a.get("scrollWidth")+"px"},duration:0.5,easing:"ease-in",on:{start:function(){var a=this.getStyle("overflow");"hidden"!==a&&(this.setStyle("overflow","hidden"),this._transitionOverflow=a)},end:function(){this._transitionOverflow&&(this.setStyle("overflow",this._transitionOverflow),delete this._transitionOverflow)}}}});e.mix(d.toggles,{size:["sizeOut","sizeIn"],fade:["fadeOut","fadeIn"]});d.DEFAULT_TOGGLE="fade"},"3.5.0",{requires:["node-base"]});
