YUI.add("widget-stdmod",function(e){function c(){this._stdModNode=this.get(m);e.before(this._renderUIStdMod,this,q);e.before(this._bindUIStdMod,this,r);e.before(this._syncUIStdMod,this,s)}var l=e.Lang,t=e.Node,p=e.UA,n=e.Widget,m="contentBox",q="renderUI",r="bindUI",s="syncUI",o=e.Widget.UI_SRC;c.HEADER="header";c.BODY="body";c.FOOTER="footer";c.AFTER="after";c.BEFORE="before";c.REPLACE="replace";var f=c.HEADER,h=c.BODY,g=c.FOOTER,i=f+"Content",j=g+"Content",k=h+"Content";c.ATTRS={headerContent:{value:null},
footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:c.BODY,validator:function(a){return this._validateFillHeight(a)}}};c.HTML_PARSER={headerContent:function(){return this._parseStdModHTML(f)},bodyContent:function(){return this._parseStdModHTML(h)},footerContent:function(){return this._parseStdModHTML(g)}};c.SECTION_CLASS_NAMES={header:n.getClassName("hd"),body:n.getClassName("bd"),footer:n.getClassName("ft")};c.TEMPLATES={header:'<div class="'+c.SECTION_CLASS_NAMES[f]+'"></div>',
body:'<div class="'+c.SECTION_CLASS_NAMES[h]+'"></div>',footer:'<div class="'+c.SECTION_CLASS_NAMES[g]+'"></div>'};c.prototype={_syncUIStdMod:function(){var a=this._stdModParsed;(!a||!a[i])&&this._uiSetStdMod(f,this.get(i));(!a||!a[k])&&this._uiSetStdMod(h,this.get(k));(!a||!a[j])&&this._uiSetStdMod(g,this.get(j));this._uiSetFillHeight(this.get("fillHeight"))},_renderUIStdMod:function(){this._stdModNode.addClass(n.getClassName("stdmod"));this._renderStdModSections();this.after("headerContentChange",
this._afterHeaderChange);this.after("bodyContentChange",this._afterBodyChange);this.after("footerContentChange",this._afterFooterChange)},_renderStdModSections:function(){l.isValue(this.get(i))&&this._renderStdMod(f);l.isValue(this.get(k))&&this._renderStdMod(h);l.isValue(this.get(j))&&this._renderStdMod(g)},_bindUIStdMod:function(){this.after("fillHeightChange",this._afterFillHeightChange);this.after("heightChange",this._fillHeight);this.after("contentUpdate",this._fillHeight)},_afterHeaderChange:function(a){a.src!==
o&&this._uiSetStdMod(f,a.newVal,a.stdModPosition)},_afterBodyChange:function(a){a.src!==o&&this._uiSetStdMod(h,a.newVal,a.stdModPosition)},_afterFooterChange:function(a){a.src!==o&&this._uiSetStdMod(g,a.newVal,a.stdModPosition)},_afterFillHeightChange:function(a){this._uiSetFillHeight(a.newVal)},_validateFillHeight:function(a){return!a||a==c.BODY||a==c.HEADER||a==c.FOOTER},_uiSetFillHeight:function(a){var a=this.getStdModNode(a),b=this._currFillNode;b&&a!==b&&b.setStyle("height","");a&&(this._currFillNode=
a);this._fillHeight()},_fillHeight:function(){if(this.get("fillHeight")){var a=this.get("height");""!=a&&"auto"!=a&&this.fillHeight(this._currFillNode)}},_uiSetStdMod:function(a,b,d){l.isValue(b)?(this._addStdModContent(this.getStdModNode(a,!0),b,d),this.set(a+"Content",this._getStdModContent(a),{src:o})):this._eraseStdMod(a);this.fire("contentUpdate")},_renderStdMod:function(a){var b=this.get(m),d=this._findStdModSection(a);d||(d=this._getStdModTemplate(a));this._insertStdModSection(b,a,d);this[a+
"Node"]=d;return this[a+"Node"]},_eraseStdMod:function(a){var b=this.getStdModNode(a);b&&(b.remove(!0),delete this[a+"Node"])},_insertStdModSection:function(a,b,d){var c=a.get("firstChild");b===g||!c?a.appendChild(d):b===f?a.insertBefore(d,c):(b=this[g+"Node"])?a.insertBefore(d,b):a.appendChild(d)},_getStdModTemplate:function(a){return t.create(c.TEMPLATES[a],this._stdModNode.get("ownerDocument"))},_addStdModContent:function(a,b,d){switch(d){case c.BEFORE:d=0;break;case c.AFTER:d=void 0;break;default:d=
c.REPLACE}a.insert(b,d)},_getPreciseHeight:function(a){var b=a?a.get("offsetHeight"):0;a&&a.hasMethod("getBoundingClientRect")&&(a=a.invoke("getBoundingClientRect"))&&(b=a.bottom-a.top);return b},_findStdModSection:function(a){return this.get(m).one("> ."+c.SECTION_CLASS_NAMES[a])},_parseStdModHTML:function(a){var b=this._findStdModSection(a);return b?(this._stdModParsed||(this._stdModParsed={},e.before(this._applyStdModParsedConfig,this,"_applyParsedConfig")),this._stdModParsed[a+"Content"]=1,b.get("innerHTML")):
null},_applyStdModParsedConfig:function(a,b){var d=this._stdModParsed;d&&(d[i]=!(i in b)&&i in d,d[k]=!(k in b)&&k in d,d[j]=!(j in b)&&j in d)},_getStdModContent:function(a){return this[a+"Node"]?this[a+"Node"].get("childNodes"):null},setStdModContent:function(a,b,d){this.set(a+"Content",b,{stdModPosition:d})},getStdModNode:function(a,b){var d=this[a+"Node"]||null;!d&&b&&(d=this._renderStdMod(a));return d},fillHeight:function(a){if(a){var b=this.get(m),d=[this.headerNode,this.bodyNode,this.footerNode],
c,e=0;c=0;for(var g=!1,f=0,h=d.length;f<h;f++)(c=d[f])&&(c!==a?e+=this._getPreciseHeight(c):g=!0);g&&((p.ie||p.opera)&&a.set("offsetHeight",0),b=b.get("offsetHeight")-parseInt(b.getComputedStyle("paddingTop"),10)-parseInt(b.getComputedStyle("paddingBottom"),10)-parseInt(b.getComputedStyle("borderBottomWidth"),10)-parseInt(b.getComputedStyle("borderTopWidth"),10),l.isNumber(b)&&(c=b-e,0<=c&&a.set("offsetHeight",c)))}}};e.WidgetStdMod=c},"3.5.0",{requires:["base-build","widget"]});
