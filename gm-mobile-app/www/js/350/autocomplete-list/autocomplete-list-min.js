YUI.add("autocomplete-list",function(c){var e=c.Lang,d=c.Node,h=c.Array,g=c.UA.ie&&7>c.UA.ie,f=c.Base.create("autocompleteList",c.Widget,[c.AutoCompleteBase,c.WidgetPosition,c.WidgetPositionAlign],{ARIA_TEMPLATE:"<div/>",ITEM_TEMPLATE:"<li/>",LIST_TEMPLATE:"<ul/>",UI_EVENTS:function(){var a=c.merge(c.Node.DOM_EVENTS);delete a.valuechange;delete a.valueChange;return a}(),initializer:function(){var a=this.get("inputNode");a?(this._inputNode=a,this._listEvents=[],this.DEF_PARENT_NODE=a.get("parentNode"),
this._CLASS_ITEM=this.getClassName("item"),this._CLASS_ITEM_ACTIVE=this.getClassName("item","active"),this._CLASS_ITEM_HOVER=this.getClassName("item","hover"),this._SELECTOR_ITEM="."+this._CLASS_ITEM,this.publish("select",{defaultFn:this._defSelectFn})):c.error("No inputNode specified.")},destructor:function(){for(;this._listEvents.length;)this._listEvents.pop().detach();this._ariaNode&&this._ariaNode.remove().destroy(!0)},bindUI:function(){this._bindInput();this._bindList()},renderUI:function(){var a=
this._createAriaNode(),b=this.get("boundingBox"),i=this.get("contentBox"),d=this._inputNode,e=this._createListNode(),f=d.get("parentNode");d.addClass(this.getClassName("input")).setAttrs({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":e.get("id")});f.append(a);g&&b.plug(c.Plugin.Shim);b.setStyle("position","absolute");this._ariaNode=a;this._boundingBox=b;this._contentBox=i;this._listNode=e;this._parentNode=f},syncUI:function(){this._syncResults();this._syncVisibility()},hide:function(){return this.get("alwaysShowList")?
this:this.set("visible",!1)},selectItem:function(a,b){if(a){if(!a.hasClass(this._CLASS_ITEM))return this}else if(a=this.get("activeItem"),!a)return this;this.fire("select",{itemNode:a,originEvent:b||null,result:a.getData("result")});return this},_activateNextItem:function(){var a=this.get("activeItem");this.set("activeItem",a?a.next(this._SELECTOR_ITEM)||(this.get("circular")?null:a):this._getFirstItemNode());return this},_activatePrevItem:function(){var a=this.get("activeItem");this.set("activeItem",
(a?a.previous(this._SELECTOR_ITEM):this.get("circular")&&this._getLastItemNode())||null);return this},_add:function(a){var b=[];h.each(e.isArray(a)?a:[a],function(a){b.push(this._createItemNode(a).setData("result",a))},this);b=c.all(b);this._listNode.append(b.toFrag());return b},_ariaSay:function(a,b){var c=this.get("strings."+a);this._ariaNode.setContent(b?e.sub(c,b):c)},_bindInput:function(){var a=this._inputNode,b,c;null===this.get("align")&&(b=(b=this.get("tokenInput"))&&b.get("boundingBox")||
a,this.set("align",{node:b,points:["tl","bl"]}),!this.get("width")&&(c=b.get("offsetWidth"))&&this.set("width",c));this._listEvents.concat([a.after("blur",this._afterListInputBlur,this),a.after("focus",this._afterListInputFocus,this)])},_bindList:function(){this._listEvents.concat([c.one("doc").after("click",this._afterDocClick,this),c.one("win").after("windowresize",this._syncPosition,this),this.after({mouseover:this._afterMouseOver,mouseout:this._afterMouseOut,activeItemChange:this._afterActiveItemChange,
alwaysShowListChange:this._afterAlwaysShowListChange,hoveredItemChange:this._afterHoveredItemChange,resultsChange:this._afterResultsChange,visibleChange:this._afterVisibleChange}),this._listNode.delegate("click",this._onItemClick,this._SELECTOR_ITEM,this)])},_clear:function(){this.set("activeItem",null);this._set("hoveredItem",null);this._listNode.get("children").remove(!0)},_createAriaNode:function(){return d.create(this.ARIA_TEMPLATE).addClass(this.getClassName("aria")).setAttrs({"aria-live":"polite",
role:"status"})},_createItemNode:function(a){var b=d.create(this.ITEM_TEMPLATE);return b.addClass(this._CLASS_ITEM).setAttrs({id:c.stamp(b),role:"option"}).setAttribute("data-text",a.text).append(a.display)},_createListNode:function(){var a=this.get("listNode")||d.create(this.LIST_TEMPLATE);a.addClass(this.getClassName("list")).setAttrs({id:c.stamp(a),role:"listbox"});this._set("listNode",a);this.get("contentBox").append(a);return a},_getFirstItemNode:function(){return this._listNode.one(this._SELECTOR_ITEM)},
_getLastItemNode:function(){return this._listNode.one(this._SELECTOR_ITEM+":last-child")},_syncPosition:function(){this._syncUIPosAlign();this._syncShim()},_syncResults:function(a){a||(a=this.get("results"));this._clear();a.length&&(this._add(a),this._ariaSay("items_available"));this._syncPosition();this.get("activateFirstItem")&&!this.get("activeItem")&&this.set("activeItem",this._getFirstItemNode())},_syncShim:g?function(){this._boundingBox.shim.sync()}:function(){},_syncVisibility:function(a){this.get("alwaysShowList")&&
(a=!0,this.set("visible",a));"undefined"===typeof a&&(a=this.get("visible"));this._inputNode.set("aria-expanded",a);this._boundingBox.set("aria-hidden",!a);a?this._syncPosition():(this.set("activeItem",null),this._set("hoveredItem",null),this._boundingBox.get("offsetWidth"));7===c.UA.ie&&c.one("body").addClass("yui3-ie7-sucks").removeClass("yui3-ie7-sucks")},_afterActiveItemChange:function(a){var b=this._inputNode,d=a.newVal;(a=a.prevVal)&&a._node&&a.removeClass(this._CLASS_ITEM_ACTIVE);d?(d.addClass(this._CLASS_ITEM_ACTIVE),
b.set("aria-activedescendant",d.get("id"))):b.removeAttribute("aria-activedescendant");this.get("scrollIntoView")&&(b=d||b,(!b.inRegion(c.DOM.viewportRegion(),!0)||!b.inRegion(this._contentBox,!0))&&b.scrollIntoView())},_afterAlwaysShowListChange:function(a){this.set("visible",a.newVal||0<this.get("results").length)},_afterDocClick:function(a){var b=this._boundingBox,a=a.target;a!==this._inputNode&&a!==b&&!b.one(a.get("id"))&&this.hide()},_afterHoveredItemChange:function(a){var b=a.newVal;(a=a.prevVal)&&
a.removeClass(this._CLASS_ITEM_HOVER);b&&b.addClass(this._CLASS_ITEM_HOVER)},_afterListInputBlur:function(){this._listInputFocused=!1;this.get("visible")&&!this._mouseOverList&&(9!==this._lastInputKey||!this.get("tabSelect")||!this.get("activeItem"))&&this.hide()},_afterListInputFocus:function(){this._listInputFocused=!0},_afterMouseOver:function(a){a=a.domEvent.target.ancestor(this._SELECTOR_ITEM,!0);this._mouseOverList=!0;a&&this._set("hoveredItem",a)},_afterMouseOut:function(){this._mouseOverList=
!1;this._set("hoveredItem",null)},_afterResultsChange:function(a){this._syncResults(a.newVal);this.get("alwaysShowList")||this.set("visible",!!a.newVal.length)},_afterVisibleChange:function(a){this._syncVisibility(!!a.newVal)},_onItemClick:function(a){var b=a.currentTarget;this.set("activeItem",b);this.selectItem(b,a)},_defSelectFn:function(a){a=a.result.text;this._inputNode.focus();this._updateValue(a);this._ariaSay("item_selected",{item:a});this.hide()}},{ATTRS:{activateFirstItem:{value:!1},activeItem:{setter:c.one,
value:null},alwaysShowList:{value:!1},circular:{value:!0},hoveredItem:{readOnly:!0,value:null},listNode:{writeOnce:"initOnly",value:null},scrollIntoView:{value:!1},strings:{valueFn:function(){return c.Intl.get("autocomplete-list")}},tabSelect:{value:!0},visible:{value:!1}},CSS_PREFIX:c.ClassNameManager.getClassName("aclist")});c.AutoCompleteList=f;c.AutoComplete=f},"3.5.0",{lang:["en"],skinnable:!0,after:["autocomplete-sources"],requires:"autocomplete-base,event-resize,node-screen,selector-css3,shim-plugin,widget,widget-position,widget-position-align".split(",")});
