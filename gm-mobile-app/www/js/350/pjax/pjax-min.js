YUI.add("pjax",function(d){d.Pjax=d.Base.create("pjax",d.Router,[d.PjaxBase],{initializer:function(){this.publish("error",{defaultFn:this._defCompleteFn});this.publish("load",{defaultFn:this._defCompleteFn})},getContent:function(a){var b={},c=this.get("contentSelector"),a=d.Node.create(a||""),e=this.get("titleSelector");b.node=c?d.one(a.all(c).toFrag()):a;if(e&&(c=a.one(e)))b.title=c.get("text");return b},_defaultRoute:function(a){a=a.url;this._request&&this._request.abort();this.get("addPjaxParam")&&
(a=a.replace(/([^#]*)(#.*)?$/,function(a,c,d){c+=(-1<c.indexOf("?")?"&":"?")+"pjax=1";return c+(d||"")}));this._request=d.io(a,{arguments:{url:a},context:this,headers:{"X-PJAX":"true"},timeout:this.get("timeout"),on:{end:this._onPjaxIOEnd,failure:this._onPjaxIOFailure,success:this._onPjaxIOSuccess}})},_defCompleteFn:function(a){var b=this.get("container"),a=a.content;b&&a.node&&b.setContent(a.node);a.title&&d.config.doc&&(d.config.doc.title=a.title)},_onPjaxIOEnd:function(){this._request=null},_onPjaxIOFailure:function(a,
b,c){this.fire("error",{content:this.getContent(b.responseText),responseText:b.responseText,status:b.status,url:c.url})},_onPjaxIOSuccess:function(a,b,c){this.fire("load",{content:this.getContent(b.responseText),responseText:b.responseText,status:b.status,url:c.url})}},{ATTRS:{addPjaxParam:{value:!0},container:{value:null,setter:function(a){return a?d.one(a):null}},contentSelector:{value:null},routes:{value:[{path:"*",callback:"_defaultRoute"}]},titleSelector:{value:"title"},timeout:{value:3E4}}})},
"3.5.0",{requires:["pjax-base","io-base"]});
