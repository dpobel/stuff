YUI.add("recordset-sort",function(b){function e(a,d,c){e.superclass.constructor.apply(this,arguments)}var g=b.ArraySort.compare,f=b.Lang.isValue;b.mix(e,{NS:"sort",NAME:"recordsetSort",ATTRS:{lastSortProperties:{value:{field:void 0,desc:!0,sorter:void 0},validator:function(a){return f(a.field)&&f(a.desc)&&f(a.sorter)}},defaultSorter:{value:function(a,d,c,b){c=g(a.getValue(c),d.getValue(c),b);return 0===c?g(a.get("id"),d.get("id"),b):c}},isSorted:{value:!1}}});b.extend(e,b.Plugin.Base,{initializer:function(){var a=
this,d=this.get("host");this.publish("sort",{defaultFn:b.bind("_defSortFn",this)});this.on("sort",function(){a.set("isSorted",!0)});this.onHostEvent("add",function(){a.set("isSorted",!1)},d);this.onHostEvent("update",function(){a.set("isSorted",!1)},d)},destructor:function(){},_defSortFn:function(a){this.get("host")._items.sort(function(b,c){return a.sorter(b,c,a.field,a.desc)});this.set("lastSortProperties",a)},sort:function(a,b,c){this.fire("sort",{field:a,desc:b,sorter:c||this.get("defaultSorter")})},
resort:function(){var a=this.get("lastSortProperties");this.fire("sort",{field:a.field,desc:a.desc,sorter:a.sorter||this.get("defaultSorter")})},reverse:function(){this.get("host")._items.reverse()},flip:function(){var a=this.get("lastSortProperties");f(a.field)&&this.fire("sort",{field:a.field,desc:!a.desc,sorter:a.sorter||this.get("defaultSorter")})}});b.namespace("Plugin").RecordsetSort=e},"3.5.0",{requires:["arraysort","recordset-base","plugin"]});
