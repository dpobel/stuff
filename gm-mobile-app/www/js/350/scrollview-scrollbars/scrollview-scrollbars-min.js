YUI.add("scrollview-scrollbars",function(c){function j(){j.superclass.constructor.apply(this,arguments)}var e=c.ClassNameManager.getClassName,g,t=c.Transition,o=t.useNative,m=t._VENDOR_PREFIX+"TransitionProperty";j.CLASS_NAMES={showing:e("scrollview","scrollbar","showing"),scrollbar:e("scrollview","scrollbar"),scrollbarV:e("scrollview","scrollbar","vert"),scrollbarH:e("scrollview","scrollbar","horiz"),scrollbarVB:e("scrollview","scrollbar","vert","basic"),scrollbarHB:e("scrollview","scrollbar","horiz",
"basic"),child:e("scrollview","child"),first:e("scrollview","first"),middle:e("scrollview","middle"),last:e("scrollview","last")};g=j.CLASS_NAMES;j.NAME="pluginScrollViewScrollbars";j.NS="scrollbars";j.SCROLLBAR_TEMPLATE=["<div>",'<span class="'+g.child+" "+g.first+'"></span>','<span class="'+g.child+" "+g.middle+'"></span>','<span class="'+g.child+" "+g.last+'"></span>',"</div>"].join("");j.ATTRS={verticalNode:{setter:"_setNode",valueFn:"_defaultNode"},horizontalNode:{setter:"_setNode",valueFn:"_defaultNode"}};
c.namespace("Plugin").ScrollViewScrollbars=c.extend(j,c.Plugin.Base,{initializer:function(){this._host=this.get("host");this.afterHostEvent("scrollEnd",this._hostScrollEnd);this.afterHostMethod("_uiScrollTo",this._update);this.afterHostMethod("_uiDimensionsChange",this._hostDimensionsChange)},_hostDimensionsChange:function(){var a=this._host;this._renderBar(this.get("verticalNode"),a._scrollsVertical);this._renderBar(this.get("horizontalNode"),a._scrollsHorizontal);this._update();c.later(500,this,
"flash",!0)},_hostScrollEnd:function(){this._host._flicking||this.flash()},_renderBar:function(a,b){var d=a.inDoc(),n=this._host._bb,f=a.getData("isHoriz")?g.scrollbarHB:g.scrollbarVB;b&&!d?(n.append(a),a.toggleClass(f,this._basic),this._setChildCache(a)):!b&&d&&(a.remove(),this._clearChildCache(a))},_setChildCache:function(a){var b=a.get("children"),d=b.item(0),n=b.item(1),b=b.item(2),f=a.getData("isHoriz")?"offsetWidth":"offsetHeight";a.setStyle(m,"transform");n.setStyle(m,"transform");b.setStyle(m,
"transform");a.setData("childCache",{fc:d,lc:b,mc:n,fcSize:d&&d.get(f),lcSize:b&&b.get(f)})},_clearChildCache:function(a){a.clearData("childCache")},_updateBar:function(a,b,d,n){var f=this._host,g=this._basic,k=0,h=1,c=a.getData("childCache"),e=c.lc,j=c.mc,i=c.fcSize,m=c.lcSize,q,r,p,s,l;n?(r="width",p="left",s="_sbh",l=f._width,h=f._scrollWidth,c="translateX(",q="scaleX(",b=void 0!==b?b:f.get("scrollX")):(r="height",p="top",s="_sbv",l=f._height,h=f._scrollHeight,c="translateY(",q="scaleY(",b=void 0!==
b?b:f.get("scrollY"));k=Math.floor(l*(l/h));h=Math.floor(b/(h-l)*(l-k));k>l&&(k=1);h>l-k?k-=h-(l-k):0>h&&(k=h+k,h=0);b=k-(i+m);0>b&&(b=0);0===b&&0!==h&&(h=l-(i+m)-1);0!==d?(i={duration:d},o?i.transform=c+h+"px)":i[p]=h+"px",a.transition(i)):o?a.setStyle("transform",c+h+"px)"):a.setStyle(p,h+"px");if(this[s]!==b&&(this[s]=b,0<b&&(0!==d?(i={duration:d},o?i.transform=q+b+")":i[r]=b+"px",j.transition(i)):o?j.setStyle("transform",q+b+")"):j.setStyle(r,b+"px"),!n||!g)))a=k-m,0!==d?(i={duration:d},o?i.transform=
c+a+"px)":i[p]=a,e.transition(i)):o?e.setStyle("transform",c+a+"px)"):e.setStyle(p,a+"px")},_update:function(a,b,d){var c=this.get("verticalNode"),f=this.get("horizontalNode"),e=this._host,d=(d||0)/1E3;this._showing||this.show();e._scrollsVertical&&c&&this._updateBar(c,b,d,!1);e._scrollsHorizontal&&f&&this._updateBar(f,a,d,!0)},show:function(a){this._show(!0,a)},hide:function(a){this._show(!1,a)},_show:function(a,b){var c=this.get("verticalNode"),e=this.get("horizontalNode"),f=b?0.6:0,g=a?1:0;this._showing=
a;this._flashTimer&&this._flashTimer.cancel();f={duration:f,opacity:g};c&&c.transition(f);e&&e.transition(f)},flash:function(){this.show(!0);this._flashTimer=c.later(800,this,"hide",!0)},_setNode:function(a,b){var d="horizontalNode"==b;if(a=c.one(a))a.addClass(g.scrollbar),a.addClass(d?g.scrollbarH:g.scrollbarV),a.setData("isHoriz",d);return a},_defaultNode:function(){return c.Node.create(j.SCROLLBAR_TEMPLATE)},_basic:c.UA.ie&&8>=c.UA.ie})},"3.5.0",{requires:["classnamemanager","transition","plugin"],
skinnable:!0});
