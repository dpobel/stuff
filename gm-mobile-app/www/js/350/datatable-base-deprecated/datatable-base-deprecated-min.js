YUI.add("datatable-base-deprecated",function(c){function o(a){o.superclass.constructor.apply(this,arguments)}function p(a){p.superclass.constructor.apply(this,arguments)}function q(a){q.superclass.constructor.apply(this,arguments)}var l=c.Lang,v=l.isValue,m=c.Lang.sub,i=c.Node.create,j=c.ClassNameManager.getClassName,w=j("datatable","columns"),x=j("datatable","data"),y=j("datatable","msg"),r=j("datatable","liner"),z=j("datatable","first"),A=j("datatable","last"),t=j("datatable","even"),u=j("datatable",
"odd"),B='<thead class="'+w+'"></thead>',C='<tbody class="'+x+'"></tbody>',j='<th id="{id}" rowspan="{rowspan}" colspan="{colspan}" class="{classnames}" abbr="{abbr}"><div class="'+r+'">{value}</div></th>',r='<td headers="{headers}" class="{classnames}"><div class="'+r+'">{value}</div></td>',D='<tbody class="'+y+'"></tbody>';c.mix(o,{NAME:"column",ATTRS:{id:{valueFn:"_defaultId",readOnly:!0},key:{valueFn:"_defaultKey"},field:{valueFn:"_defaultField"},label:{valueFn:"_defaultLabel"},children:{value:null},
abbr:{value:""},classnames:{readOnly:!0,getter:"_getClassnames"},formatter:{},emptyCellValue:{value:"",validator:c.Lang.isString},sortable:{value:!1},editor:{},width:{},resizeable:{},minimized:{},minWidth:{},maxAutoWidth:{}}});c.extend(o,c.Widget,{_defaultId:function(){return c.guid()},_defaultKey:function(){return c.guid()},_defaultField:function(){return this.get("key")},_defaultLabel:function(){return this.get("key")},_afterAbbrChange:function(a){this._uiSetAbbr(a.newVal)},keyIndex:null,headers:null,
colSpan:1,rowSpan:1,parent:null,thNode:null,initializer:function(){},destructor:function(){},_getClassnames:function(){return c.ClassNameManager.getClassName("column",this.get("key").replace(/[^\w\-]/g,""))},syncUI:function(){this._uiSetAbbr(this.get("abbr"))},_uiSetAbbr:function(a){this.thNode.set("abbr",a)}});c.Column=o;c.mix(p,{NAME:"columnset",ATTRS:{definitions:{setter:"_setDefinitions"}}});c.extend(p,c.Base,{_setDefinitions:function(a){return c.clone(a)},tree:null,idHash:null,keyHash:null,keys:null,
initializer:function(){function a(g,s,j){var i=0,E=s.length,n,k,m;g++;for(b[g]||(b[g]=[]);i<E;++i)n=s[i],n=l.isString(n)?{key:n}:n,k=new c.Column(n),n.yuiColumnId=k.get("id"),e[k.get("id")]=k,h[k.get("key")]=k,j&&(k.parent=j),l.isArray(n.children)?(m=n.children,k._set("children",m),f._setColSpans(k,n),f._cascadePropertiesToChildren(k,m),b[g+1]||(b[g+1]=[]),a(g,m,k)):(k.keyIndex=d.length,d.push(k)),b[g].push(k)}var b=[],e={},h={},d=[],s=this.get("definitions"),f=this;a(-1,s);this.tree=b;this.idHash=
e;this.keyHash=h;this.keys=d;this._setRowSpans();this._setHeaders()},destructor:function(){},_cascadePropertiesToChildren:function(a,b){for(var e=0,h=b.length,d;e<h;++e)if(d=b[e],a.get("className")&&void 0===d.className&&(d.className=a.get("className")),a.get("editor")&&void 0===d.editor&&(d.editor=a.get("editor")),a.get("formatter")&&void 0===d.formatter&&(d.formatter=a.get("formatter")),a.get("resizeable")&&void 0===d.resizeable&&(d.resizeable=a.get("resizeable")),a.get("sortable")&&void 0===d.sortable&&
(d.sortable=a.get("sortable")),a.get("hidden")&&(d.hidden=!0),a.get("width")&&void 0===d.width&&(d.width=a.get("width")),a.get("minWidth")&&void 0===d.minWidth&&(d.minWidth=a.get("minWidth")),a.get("maxAutoWidth")&&void 0===d.maxAutoWidth)d.maxAutoWidth=a.get("maxAutoWidth")},_setColSpans:function(a,b){function e(a){for(var a=a.children,b=0,c=a.length;b<c;++b)l.isArray(a[b].children)?e(a[b]):h++}var h=0;e(b);a.colSpan=h},_setRowSpans:function(){(function(a){function b(a,d){for(var d=d||1,c=0,h=a.length,
f;c<h;++c)f=a[c],l.isArray(f.children)?(d++,b(f.children,d),d--):f.get&&l.isArray(f.get("children"))?(d++,b(f.get("children"),d),d--):d>e&&(e=d)}var e=1,h,d,c,f;for(c=0;c<a.length;c++){h=a[c];b(h);for(f=0;f<h.length;f++)d=h[f],l.isArray(d.get("children"))||(d.rowSpan=e);e=1}})(this.tree)},_setHeaders:function(){function a(b,d){b.push(d.get("id"));d.parent&&a(b,d.parent)}for(var b,e,c=this.keys,d=0,i=c.length;d<i;++d)b=[],e=c[d],a(b,e),e.headers=b.reverse().join(" ")},getColumn:function(){}});c.Columnset=
p;c.mix(q,{NAME:"dataTable",ATTRS:{columnset:{setter:"_setColumnset"},recordset:{valueFn:"_initRecordset",setter:"_setRecordset"},summary:{},caption:{},thValueTemplate:{value:"{value}"},tdValueTemplate:{value:"{value}"},trTemplate:{value:'<tr id="{id}"></tr>'}},HTML_PARSER:{}});c.extend(q,c.Widget,{thTemplate:j,tdTemplate:r,_theadNode:null,_tbodyNode:null,_msgNode:null,_setColumnset:function(a){return l.isArray(a)?new c.Columnset({definitions:a}):a},_afterColumnsetChange:function(a){this._uiSetColumnset(a.newVal)},
_setRecordset:function(a){l.isArray(a)&&(a=new c.Recordset({records:a}));a.addTarget(this);return a},_afterRecordsetChange:function(a){this._uiSetRecordset(a.newVal)},_afterRecordsChange:function(){this._uiSetRecordset(this.get("recordset"))},_afterSummaryChange:function(a){this._uiSetSummary(a.newVal)},_afterCaptionChange:function(a){this._uiSetCaption(a.newVal)},destructor:function(){this.get("recordset").removeTarget(this)},renderUI:function(){this._addTableNode(this.get("contentBox"));this._addColgroupNode(this._tableNode);
this._addTheadNode(this._tableNode);this._addTbodyNode(this._tableNode);this._addMessageNode(this._tableNode);this._addCaptionNode(this._tableNode)},_addTableNode:function(a){this._tableNode||(this._tableNode=a.appendChild(i("<table></table>")));return this._tableNode},_addColgroupNode:function(a){for(var b=this.get("columnset").keys.length,e=0,c=["<colgroup>"];e<b;++e)c.push("<col></col>");c.push("</colgroup>");return this._colgroupNode=a.insertBefore(i(c.join("")),a.get("firstChild"))},_addTheadNode:function(a){if(a)return this._theadNode=
a.insertBefore(i(B),this._colgroupNode.next())},_addTbodyNode:function(a){return this._tbodyNode=a.appendChild(i(C))},_addMessageNode:function(a){return this._msgNode=a.insertBefore(i(D),this._tbodyNode)},_addCaptionNode:function(){this._captionNode=c.Node.create("<caption></caption>")},bindUI:function(){this.after({columnsetChange:this._afterColumnsetChange,summaryChange:this._afterSummaryChange,captionChange:this._afterCaptionChange,recordsetChange:this._afterRecordsChange,"recordset:tableChange":this._afterRecordsChange})},
delegate:function(a){"dblclick"===a?this.get("boundingBox").delegate.apply(this.get("boundingBox"),arguments):this.get("contentBox").delegate.apply(this.get("contentBox"),arguments)},syncUI:function(){this._uiSetColumnset(this.get("columnset"));this._uiSetRecordset(this.get("recordset"));this._uiSetSummary(this.get("summary"));this._uiSetCaption(this.get("caption"))},_uiSetSummary:function(a){a=v(a)?a:"";this._tableNode.set("summary",a)},_uiSetCaption:function(a){var b=this._captionNode,e=b.inDoc(),
e=a?!e&&"prepend":e&&"removeChild";b.setContent(a||"");if(e)this._tableNode[e](b)},_uiSetColumnset:function(a){var a=a.tree,b=this._theadNode,e=0,c=a.length,d=b.get("parentNode"),i=b.next();b.remove();for(b.get("children").remove(!0);e<c;++e)this._addTheadTrNode({thead:b,columns:a[e],id:""},0===e,e===c-1);d.insert(b,i)},_addTheadTrNode:function(a,b,e){a.tr=this._createTheadTrNode(a,b,e);this._attachTheadTrNode(a)},_createTheadTrNode:function(a,b,e){var c=i(m(this.get("trTemplate"),a)),d=0,a=a.columns,
j=a.length;b&&c.addClass(z);for(e&&c.addClass(A);d<j;++d)b=a[d],this._addTheadThNode({value:b.get("label"),column:b,tr:c});return c},_attachTheadTrNode:function(a){a.thead.appendChild(a.tr)},_addTheadThNode:function(a){a.th=this._createTheadThNode(a);this._attachTheadThNode(a);a.column.thNode=a.th},_createTheadThNode:function(a){var b=a.column;a.id=b.get("id");a.colspan=b.colSpan;a.rowspan=b.rowSpan;a.abbr=b.get("abbr");a.classnames=b.get("classnames");a.value=m(this.get("thValueTemplate"),a);return i(m(this.thTemplate,
a))},_attachTheadThNode:function(a){a.tr.appendChild(a.th)},_uiSetRecordset:function(a){var b=this._tbodyNode,e=b.get("parentNode"),h=b.next(),d=this.get("columnset").keys,i=this.get("tdValueTemplate"),f={},g;b.remove();b=this._addTbodyNode(this._tableNode);b.remove();this._tbodyNode=b;f.tbody=b;f.rowTemplate=this.get("trTemplate");f.columns=[];for(b=d.length-1;0<=b;--b)g=d[b],f.columns[b]={column:g,fields:g.get("field"),classnames:g.get("classnames"),emptyCellValue:g.get("emptyCellValue")},g=g.get("formatter"),
l.isFunction(g)?g=c.bind(this._functionFormatter,this,g):(l.isString(g)||(g=i),g=c.bind(this._templateFormatter,this,g)),f.columns[b].formatter=g;b=0;for(d=a.size();b<d;++b)f.record=a.item(b),f.data=f.record.get("data"),f.rowindex=b,this._addTbodyTrNode(f);e.insert(this._tbodyNode,h)},_functionFormatter:function(a,b){var c=a.call(this,b);return void 0!==c?c:b.emptyCellValue},_templateFormatter:function(a,b){void 0===b.value&&(b.value=b.emptyCellValue);return m(a,b)},_addTbodyTrNode:function(a){var b=
a.tbody.one("#"+a.record.get("id"));a.tr=b||this._createTbodyTrNode(a);this._attachTbodyTrNode(a)},_createTbodyTrNode:function(a){var b=a.columns,c,h,d;a.tr=i(m(a.rowTemplate,{id:a.record.get("id")}));c=0;for(h=b.length;c<h;++c)d=b[c],a.column=d.column,a.field=d.fields,a.classnames=d.classnames,a.formatter=d.formatter,a.emptyCellValue=d.emptyCellValue,this._addTbodyTdNode(a);return a.tr},_attachTbodyTrNode:function(a){var b=a.tbody,c=a.tr,a=a.rowindex,h=b.get("children").item(a)||null;a%2?c.replaceClass(t,
u):c.replaceClass(u,t);b.insertBefore(c,h)},_addTbodyTdNode:function(a){a.td=this._createTbodyTdNode(a);this._attachTbodyTdNode(a);delete a.td},createCell:function(a){return a&&(a.td||(a.td=i(m(this.tdTemplate,a))))},_createTbodyTdNode:function(a){a.headers=a.column.headers;a.value=this.formatDataCell(a);return a.td||this.createCell(a)},_attachTbodyTdNode:function(a){a.tr.appendChild(a.td)},formatDataCell:function(a){a.value=a.data[a.field];return a.formatter.call(this,a)},_initRecordset:function(){return new c.Recordset({records:[]})}});
c.namespace("DataTable").Base=q},"3.5.0",{requires:["recordset-base","widget","substitute","event-mouseenter"]});
