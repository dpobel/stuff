YUI.add("transition-timer",function(e){var a=e.Transition;e.mix(a.prototype,{_start:function(){a.useNative?this._runNative():this._runTimer()},_runTimer:function(){this._initAttrs();a._running[e.stamp(this)]=this;this._startTime=new Date;a._startTimer()},_endTimer:function(){delete a._running[e.stamp(this)];this._startTime=null},_runFrame:function(){this._runAttrs(new Date-this._startTime)},_runAttrs:function(j){var c=this._node,b=this._config,f=e.stamp(c),f=a._nodeAttrs[f],k=a.behaviors,g=!1,l=!1,
h,d,i,m,q,n,o,p;for(d in f)if((i=f[d])&&i.transition===this)if(o=i.duration,n=i.delay,q=(j-n)/1E3,p=j,h={type:"propertyEnd",propertyName:d,config:b,elapsedTime:q},m=void 0 in k&&"set"in k[void 0]?k[void 0].set:a.DEFAULT_SETTER,g=p>=o,p>o&&(p=o),!n||j>=n)m(this,d,i.from,i.to,p-n,o-n,i.easing,i.unit),g&&(delete f[d],this._count--,b[d]&&b[d].on&&b[d].on.end&&b[d].on.end.call(e.one(c),h),!l&&0>=this._count&&(l=!0,this._end(q),this._endTimer()))},_initAttrs:function(){var j=a.behaviors,c=e.stamp(this._node),
c=a._nodeAttrs[c],b,f,k,g,l,h,d,i,m;for(h in c)if((b=c[h])&&b.transition===this)f=1E3*b.duration,k=1E3*b.delay,g=b.easing,l=b.value,h in this._node.style||h in e.DOM.CUSTOM_STYLES?(m=h in j&&"get"in j[h]?j[h].get(this,h):a.DEFAULT_GETTER(this,h),i=a.RE_UNITS.exec(m),d=a.RE_UNITS.exec(l),m=i?i[1]:m,l=d?d[1]:l,d=d?d[2]:i?i[2]:"",!d&&a.RE_DEFAULT_UNIT.test(h)&&(d=a.DEFAULT_UNIT),"string"===typeof g&&(-1<g.indexOf("cubic-bezier")?g=g.substring(13,g.length-1).split(","):a.easings[g]&&(g=a.easings[g])),
b.from=Number(m),b.to=Number(l),b.unit=d,b.easing=g,b.duration=f+k,b.delay=k):(delete c[h],this._count--)},destroy:function(){this.detachAll();this._node=null}},!0);e.mix(e.Transition,{_runtimeAttrs:{},RE_DEFAULT_UNIT:/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i,DEFAULT_UNIT:"px",intervalTime:20,behaviors:{left:{get:function(a,c){return e.DOM._getAttrOffset(a._node,c)}}},DEFAULT_SETTER:function(j,c,b,f,k,g,l,h){var b=Number(b),f=Number(f),d=j._node,k=a.cubicBezier(l,k/g),k=
b+k[0]*(f-b);if(d){if(c in d.style||c in e.DOM.CUSTOM_STYLES)e.DOM.setStyle(d,c,k+(h||""))}else j._end()},DEFAULT_GETTER:function(a,c){var b=a._node,f="";if(c in b.style||c in e.DOM.CUSTOM_STYLES)f=e.DOM.getComputedStyle(b,c);return f},_startTimer:function(){a._timer||(a._timer=setInterval(a._runFrame,a.intervalTime))},_stopTimer:function(){clearInterval(a._timer);a._timer=null},_runFrame:function(){var j=!0,c;for(c in a._running)a._running[c]._runFrame&&(j=!1,a._running[c]._runFrame());j&&a._stopTimer()},
cubicBezier:function(a,c){var b=a[0],f=a[1],e=a[2],g=a[3];return[(((1-3*e+3*b-0)*c+(3*e-6*b+0))*c+(3*b-0))*c+0,(((0-3*g+3*f-0)*c+(3*g-6*f+0))*c+(3*f-0))*c+0]},easings:{ease:[0.25,0,1,0.25],linear:[0,0,1,1],"ease-in":[0.42,0,1,1],"ease-out":[0,0,0.58,1],"ease-in-out":[0.42,0,0.58,1]},_running:{},_timer:null,RE_UNITS:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/},!0);a.behaviors.top=a.behaviors.bottom=a.behaviors.right=a.behaviors.left;e.Transition=a},"3.5.0",{requires:["transition"]});
