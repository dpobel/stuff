YUI.add("json-stringify",function(f){function B(a){var b=typeof a;return j[b]||j[n.call(a)]||(b===q?a?q:p:C)}function O(a){m[a]||(m[a]="\\u"+("0000"+(+a.charCodeAt(0)).toString(16)).slice(-4),t[a]=0);++t[a]===D&&(o.push([RegExp(a,"g"),m[a]]),E=o.length);return m[a]}function F(a){var b,g;for(b=0;b<E;b++)g=o[b],a=a.replace(g[0],g[1]);return G+a.replace(P,O)+G}function Q(a,b,g){function i(a,f){var c=a[f],d=B(c),e=[],m=g?R:u,h,j,k,n;S(c)&&v(c.toJSON)?c=c.toJSON(f):d===w&&(c=o(c));v(l)&&(c=l.call(a,f,
c));c!==a[f]&&(d=B(c));switch(d){case w:case q:break;case x:return F(c);case y:return isFinite(c)?c+z:p;case A:return c+z;case p:return p;default:return}for(h=r.length-1;0<=h;--h)if(r[h]===c)throw Error("JSON.stringify. Cyclical reference");d=H(c);r.push(c);if(d)for(h=c.length-1;0<=h;--h)e[h]=i(c,h)||p;else for(k in j=b||c,h=0,j)j.hasOwnProperty(k)&&(n=i(c,k))&&(e[h++]=F(k)+m+n);r.pop();g&&e.length?d?(c=I+s,e=e.join(J).replace(/^/gm,g),e=c+e+s+K):(c=L+s,e=e.join(J).replace(/^/gm,g),e=c+e+s+M):e=d?
I+e.join(N)+K:L+e.join(N)+M;return e}if(void 0!==a){var l=v(b)?b:null,m=n.call(g).match(/String|Number/)||[],o=f.JSON.dateToString,r=[],d,k,j;t={};D=f.JSON.charCacheThreshold;if(l||!H(b))b=void 0;if(b){d={};k=0;for(j=b.length;k<j;++k)d[b[k]]=!0;b=d}g="Number"===m[0]?Array(Math.min(Math.max(0,g),10)+1).join(" "):(g||z).slice(0,10);return i({"":a},"")}}var i=(f.config.win||{}).JSON,d=f.Lang,v=d.isFunction,S=d.isObject,H=d.isArray,n=Object.prototype.toString,l="[object JSON]"===n.call(i)&&i,i=!!l,C=
"undefined",q="object",p="null",x="string",y="number",A="boolean",w="date",j={undefined:C,string:x,"[object String]":x,number:y,"[object Number]":y,"boolean":A,"[object Boolean]":A,"[object Date]":w,"[object RegExp]":q},z="",L="{",M="}",I="[",K="]",N=",",J=",\n",s="\n",u=":",R=": ",G='"',P=/[\x00-\x07\x0b\x0e-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=[[/\\/g,"\\\\"],[/\"/g,'\\"'],[/\x08/g,"\\b"],[/\x09/g,"\\t"],[/\x0a/g,"\\n"],
[/\x0c/g,"\\f"],[/\x0d/g,"\\r"]],E=o.length,m={},t,D;if(l)try{i="0"===l.stringify(0)}catch(T){i=!1}f.mix(f.namespace("JSON"),{useNativeStringify:i,dateToString:function(a){function b(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+u+b(a.getUTCMinutes())+u+b(a.getUTCSeconds())+"Z"},stringify:function(a,b,d){return l&&f.JSON.useNativeStringify?l.stringify(a,b,d):Q(a,b,d)},charCacheThreshold:100})},"3.5.1",{requires:["yui-base"]});
