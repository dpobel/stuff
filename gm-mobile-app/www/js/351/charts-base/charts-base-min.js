YUI.add("charts-base",function(f){function I(){}function J(a){J.superclass.constructor.apply(this,arguments)}function L(a){L.superclass.constructor.apply(this,arguments)}function K(a){K.superclass.constructor.apply(this,arguments)}function M(a){M.superclass.constructor.apply(this,arguments)}function V(){}function W(){}function R(){}function S(a){this.addAttrs({area:{getter:function(){return this._defaults||this._getAreaDefaults()},setter:function(a){var c=this._defaults||this._getAreaDefaults();this._defaults=
f.merge(c,a)}}},a);this.get("styles")}function T(a){this.addAttrs({markers:{getter:function(){return this._markers}}},a)}function X(){}function U(){}var D=f.config,Y=D.win,p=D.doc,o=f.Lang,Z=o.isString,N,O,P,$=f.ClassNameManager.getClassName,Q=$("seriesmarker"),E,z,F,G,H;E=function(a){E.superclass.constructor.apply(this,arguments)};E.NAME="shapeGroup";f.extend(E,f.Path,{_draw:function(){var a=this.get("xvalues"),b=this.get("yvalues"),c,d,e,g,h=0,f;c=this.get("dimensions");var i=c.width,k=c.height,
j=c.radius,m=c.yRadius;this.get("id");var n=o.isArray(i),w=o.isArray(k),r=o.isArray(j),q=o.isArray(m);if(a&&b&&0<a.length){this.clear();for(f=a.length;h<f;++h)c=a[h],d=b[h],e=r?j[h]:j,g=q?m[h]:m,!isNaN(c)&&!isNaN(d)&&!isNaN(e)&&(this.drawShape({x:c,y:d,width:n?i[h]:i,height:w?k[h]:k,radius:e,yRadius:g}),this.closePath());this._closePath()}},_getRadiusCollection:function(a){for(var b=0,c=a.length,d=[];b<c;++b)d[b]=0.5*a[b];return d}});E.ATTRS=f.merge(f.Path.ATTRS,{dimensions:{getter:function(){var a=
this._dimensions,b,c,d;if(a.hasOwnProperty("radius"))return a;c=a.width;d=a.height;a=o.isArray(c)?this._getRadiusCollection(c):0.5*c;b=o.isArray(d)?this._getRadiusCollection(d):0.5*d;return{width:c,height:d,radius:a,yRadius:b}},setter:function(a){return this._dimensions=a}},xvalues:{getter:function(){return this._xvalues},setter:function(a){this._xvalues=a}},yvalues:{getter:function(){return this._yvalues},setter:function(a){this._yvalues=a}}});f.ShapeGroup=E;z=function(a){z.superclass.constructor.apply(this,
arguments)};z.NAME="circleGroup";f.extend(z,f.ShapeGroup,{drawShape:function(a){this.drawCircle(a.x,a.y,a.radius)}});z.ATTRS=f.merge(f.ShapeGroup.ATTRS,{dimensions:{getter:function(){var a=this._dimensions,b,c;if(a.hasOwnProperty("radius"))return a;b=a.width;c=a.height;a=o.isArray(b)?this._getRadiusCollection(b):0.5*b;return{width:b,height:c,radius:a,yRadius:a}}}});z.ATTRS=f.ShapeGroup.ATTRS;f.CircleGroup=z;F=function(a){F.superclass.constructor.apply(this,arguments)};F.NAME="rectGroup";f.extend(F,
f.ShapeGroup,{drawShape:function(a){this.drawRect(a.x,a.y,a.width,a.height)}});F.ATTRS=f.ShapeGroup.ATTRS;f.RectGroup=F;H=function(a){H.superclass.constructor.apply(this,arguments)};H.NAME="diamondGroup";f.extend(H,f.ShapeGroup,{drawShape:function(a){this.drawDiamond(a.x,a.y,a.width,a.height)}});H.ATTRS=f.ShapeGroup.ATTRS;f.DiamondGroup=H;G=function(a){G.superclass.constructor.apply(this,arguments)};G.NAME="diamondGroup";f.extend(G,f.ShapeGroup,{drawShape:function(a){this.drawEllipse(a.x,a.y,a.width,
a.height)}});G.ATTRS=f.ShapeGroup.ATTRS;f.EllipseGroup=G;I.ATTRS={styles:{getter:function(){return this._styles=this._styles||this._getDefaultStyles()},setter:function(a){this._styles=this._setStyles(a)}},graphic:{}};I.NAME="renderer";I.prototype={_styles:null,_setStyles:function(a){var b=this.get("styles");return this._mergeStyles(a,b)},_mergeStyles:function(a,b){b||(b={});var c=f.merge(b,{});f.Object.each(a,function(a,e){c[e]=b.hasOwnProperty(e)&&o.isObject(a)&&!o.isFunction(a)&&!o.isArray(a)?this._mergeStyles(a,
b[e]):a},this);return c},_getDefaultStyles:function(){return{padding:{top:0,right:0,bottom:0,left:0}}}};f.augment(I,f.Attribute);f.Renderer=I;D=function(){};D.prototype={_getDefaultMargins:function(){return{top:0,left:0,right:4,bottom:0}},setTickOffsets:function(){var a=this.get("styles").majorTicks,b=a.length,c=0.5*b,a=a.display;this.set("topTickOffset",0);this.set("bottomTickOffset",0);switch(a){case "inside":this.set("rightTickOffset",b);this.set("leftTickOffset",0);break;case "outside":this.set("rightTickOffset",
0);this.set("leftTickOffset",b);break;case "cross":this.set("rightTickOffset",c);this.set("leftTickOffset",c);break;default:this.set("rightTickOffset",0),this.set("leftTickOffset",0)}},drawTick:function(a,b,c){var d=this.get("styles").padding;this.drawLine(a,{x:d.left,y:b.y},{x:c.length+d.left,y:b.y})},getLineStart:function(){var a=this.get("styles"),b=a.majorTicks,c=b.length,b=b.display,a={x:a.padding.left,y:0};"outside"===b?a.x+=c:"cross"===b&&(a.x+=c/2);return a},getLabelPoint:function(a){return{x:a.x-
this.get("leftTickOffset"),y:a.y}},updateMaxLabelSize:function(a,b){var c=this._labelRotationProps,d=c.absRot,e=c.sinRadians,g=c.cosRadians;this._maxLabelSize=Math.max(this._maxLabelSize,0===c.rot?a:90===d?b:g*a+e*b)},getExplicitlySized:function(a){if(this._explicitWidth){var b=this._explicitWidth,c=this._totalTitleSize,d=this.get("leftTickOffset");this._maxLabelSize=b-(d+a.label.margin.right+c);return!0}return!1},positionTitle:function(a){var b=this._titleBounds,c=this.get("styles").title.margin,
d=this._titleRotationProps,e=a.offsetWidth,g=a.offsetHeight,b=-0.5*e+0.5*(b.right-b.left),h=0.5*this.get("height")-0.5*g;d.labelWidth=e;d.labelHeight=g;c&&c.left&&(b+=c.left);d.x=b;d.y=h;d.transformOrigin=[0.5,0.5];this._rotate(a,d)},positionLabel:function(a,b,c,d){var c=this.get("leftTickOffset"),c=b.x+this._totalTitleSize-c,b=b.y,e=this._labelRotationProps,g=e.rot,h=e.absRot,f=this._maxLabelSize,i=this._labelWidths[d],d=this._labelHeights[d];0===g?(c-=i,b-=0.5*d):90===g?c-=0.5*i:-90===g?(c-=0.5*
i,b-=d):(c-=i+d*h/360,b-=0.5*d);e.labelWidth=i;e.labelHeight=d;e.x=Math.round(f+c);e.y=Math.round(b);this._rotate(a,e)},_setRotationCoords:function(a){var b=a.rot,c=a.absRot,d,e;d=a.labelWidth;e=a.labelHeight;0===b?e*=0.5:90===b?(e=0,d*=0.5):-90===b?d*=0.5:(d+=e*c/360,e*=0.5);a.x-=d;a.y-=e},_getTransformOrigin:function(a){return 0===a?[0,0]:90===a?[0.5,0]:-90===a?[0.5,1]:[1,0.5]},offsetNodeForTick:function(){},setCalculatedSize:function(){var a=this.get("graphic"),b=this.get("styles").label,c=this.get("leftTickOffset"),
b=Math.round(this._totalTitleSize+c+this._maxLabelSize+b.margin.right);this._explicitWidth&&(b=this._explicitWidth);this.set("calculatedWidth",b);a.set("x",b-c)}};f.LeftAxisLayout=D;N=function(){};N.prototype={_getDefaultMargins:function(){return{top:0,left:4,right:0,bottom:0}},setTickOffsets:function(){var a=this.get("styles").majorTicks,b=a.length,c=0.5*b,a=a.display;this.set("topTickOffset",0);this.set("bottomTickOffset",0);switch(a){case "inside":this.set("leftTickOffset",b);this.set("rightTickOffset",
0);break;case "outside":this.set("leftTickOffset",0);this.set("rightTickOffset",b);break;case "cross":this.set("rightTickOffset",c);this.set("leftTickOffset",c);break;default:this.set("leftTickOffset",0),this.set("rightTickOffset",0)}},drawTick:function(a,b,c){var d=this.get("styles").padding;this.drawLine(a,{x:d.left,y:b.y},{x:d.left+c.length,y:b.y})},getLineStart:function(){var a=this.get("styles"),b=a.padding,c=a.majorTicks,a=c.length,c=c.display,b={x:b.left,y:b.top};"inside"===c?b.x+=a:"cross"===
c&&(b.x+=a/2);return b},getLabelPoint:function(a){return{x:a.x+this.get("rightTickOffset"),y:a.y}},updateMaxLabelSize:function(a,b){var c=this._labelRotationProps,d=c.absRot,e=c.sinRadians,g=c.cosRadians;this._maxLabelSize=Math.max(this._maxLabelSize,0===c.rot?a:90===d?b:g*a+e*b)},getExplicitlySized:function(a){if(this._explicitWidth){var b=this._explicitWidth,c=this._totalTitleSize,d=this.get("rightTickOffset");this._maxLabelSize=b-(d+a.label.margin.right+c);return!0}return!1},positionTitle:function(a){var b=
this._titleBounds,c=this.get("styles").title.margin,d=this._titleRotationProps,e=a.offsetWidth,g=a.offsetHeight,b=b.right-b.left,b=this.get("width")-0.5*e-0.5*b,h=0.5*this.get("height")-0.5*g;d.labelWidth=e;d.labelHeight=g;c&&c.right&&(b-=c.left);d.x=b;d.y=h;d.transformOrigin=[0.5,0.5];this._rotate(a,d)},positionLabel:function(a,b,c,d){var e=this.get("rightTickOffset"),c=c.label,g=0,h=b.x,b=b.y,f=this._labelRotationProps,i=f.rot,k=f.absRot,j=this._labelWidths[d],d=this._labelHeights[d];c.margin&&
c.margin.left&&(g=c.margin.left);0===i?b-=0.5*d:90===i?(h-=0.5*j,b-=d):-90===i?h-=0.5*j:(b-=0.5*d,h+=d/2*k/90);f.labelWidth=j;f.labelHeight=d;f.x=Math.round(h+g+e);f.y=Math.round(b);this._rotate(a,f)},_setRotationCoords:function(a){var b=a.rot,c=a.absRot,d=0,e=0,g=a.labelWidth,h=a.labelHeight;0===b?e=0.5*h:90===b?(d=0.5*g,e=h):-90===b?d=0.5*g:(e=0.5*h,d=h/2*c/90);a.x-=d;a.y-=e},_getTransformOrigin:function(a){return 0===a?[0,0]:90===a?[0.5,1]:-90===a?[0.5,0]:[0,0.5]},offsetNodeForTick:function(a){var b=
0-this.get("leftTickOffset");a.setStyle("left",b)},setCalculatedSize:function(){var a=this.get("styles").label,b=this._totalTitleSize,a=Math.round(this.get("rightTickOffset")+this._maxLabelSize+b+a.margin.left);this._explicitWidth&&(a=this._explicitWidth);this.set("calculatedWidth",a);this.get("contentBox").setStyle("width",a)}};f.RightAxisLayout=N;O=function(){};O.prototype={_getDefaultMargins:function(){return{top:4,left:0,right:0,bottom:0}},setTickOffsets:function(){var a=this.get("styles").majorTicks,
b=a.length,c=0.5*b,a=a.display;this.set("leftTickOffset",0);this.set("rightTickOffset",0);switch(a){case "inside":this.set("topTickOffset",b);this.set("bottomTickOffset",0);break;case "outside":this.set("topTickOffset",0);this.set("bottomTickOffset",b);break;case "cross":this.set("topTickOffset",c);this.set("bottomTickOffset",c);break;default:this.set("topTickOffset",0),this.set("bottomTickOffset",0)}},getLineStart:function(){var a=this.get("styles"),b=a.majorTicks,c=b.length,b=b.display,a={x:0,y:a.padding.top};
"inside"===b?a.y+=c:"cross"===b&&(a.y+=c/2);return a},drawTick:function(a,b,c){var d=this.get("styles").padding;this.drawLine(a,{x:b.x,y:d.top},{x:b.x,y:c.length+d.top})},getLabelPoint:function(a){return{x:a.x,y:a.y+this.get("bottomTickOffset")}},updateMaxLabelSize:function(a,b){var c=this._labelRotationProps,d=c.absRot,e=c.sinRadians,g=c.cosRadians;this._maxLabelSize=Math.max(this._maxLabelSize,0===c.rot?b:90===d?a:e*a+g*b)},getExplicitlySized:function(a){if(this._explicitHeight){var b=this._explicitHeight,
c=this._totalTitleSize,d=this.get("bottomTickOffset");this._maxLabelSize=b-(d+a.label.margin.right+c);return!0}return!1},positionTitle:function(a){var b=this._titleBounds,c=this.get("styles").title.margin,d=this._titleRotationProps,e=b.bottom-b.top,b=a.offsetWidth,g=a.offsetHeight,h=0.5*this.get("width")-0.5*b,e=this.get("height")-g/2-e/2;d.labelWidth=b;d.labelHeight=g;c&&c.bottom&&(e-=c.bottom);d.x=h;d.y=e;d.transformOrigin=[0.5,0.5];this._rotate(a,d)},positionLabel:function(a,b,c,d){var e=this.get("bottomTickOffset"),
c=c.label,g=0,h=this._labelRotationProps,f=h.rot,i=h.absRot,k=Math.round(b.x),b=Math.round(b.y),j=this._labelWidths[d],d=this._labelHeights[d];c.margin&&c.margin.top&&(g=c.margin.top);0<f?b-=d/2*f/90:0>f?(k-=j,b-=d/2*i/90):k-=0.5*j;h.labelWidth=j;h.labelHeight=d;h.x=k;h.y=b+g+e;this._rotate(a,h)},_setRotationCoords:function(a){var b=a.rot,c=a.absRot,d=a.labelWidth,e=a.labelHeight;0<b?(d=0,b=e/2*b/90):0>b?b=e/2*c/90:(d*=0.5,b=0);a.x-=d;a.y-=b},_getTransformOrigin:function(a){return 0<a?[0,0.5]:0>a?
[1,0.5]:[0,0]},offsetNodeForTick:function(){this.get("contentBox").setStyle("top",0-this.get("topTickOffset"))},setCalculatedSize:function(){var a=this.get("styles").label,b=this._totalTitleSize,a=Math.round(this.get("bottomTickOffset")+this._maxLabelSize+a.margin.top+b);this._explicitHeight&&(a=this._explicitHeight);this.set("calculatedHeight",a)}};f.BottomAxisLayout=O;P=function(){};P.prototype={_getDefaultMargins:function(){return{top:0,left:0,right:0,bottom:4}},setTickOffsets:function(){var a=
this.get("styles").majorTicks,b=a.length,c=0.5*b,a=a.display;this.set("leftTickOffset",0);this.set("rightTickOffset",0);switch(a){case "inside":this.set("bottomTickOffset",b);this.set("topTickOffset",0);break;case "outside":this.set("bottomTickOffset",0);this.set("topTickOffset",b);break;case "cross":this.set("topTickOffset",c);this.set("bottomTickOffset",c);break;default:this.set("topTickOffset",0),this.set("bottomTickOffset",0)}},getLineStart:function(){var a=this.get("styles"),b=a.majorTicks,c=
b.length,b=b.display,a={x:0,y:a.padding.top};"outside"===b?a.y+=c:"cross"===b&&(a.y+=c/2);return a},drawTick:function(a,b,c){var d=this.get("styles").padding;this.drawLine(a,{x:b.x,y:d.top},{x:b.x,y:c.length+d.top})},getLabelPoint:function(a){return{x:a.x,y:a.y-this.get("topTickOffset")}},updateMaxLabelSize:function(a,b){var c=this._labelRotationProps,d=c.absRot,e=c.sinRadians,g=c.cosRadians;this._maxLabelSize=Math.max(this._maxLabelSize,0===c.rot?b:90===d?a:e*a+g*b)},getExplicitlySized:function(a){if(this._explicitHeight){var b=
this._explicitHeight,c=this._totalTitleSize,d=this.get("topTickOffset");this._maxLabelSize=b-(d+a.label.margin.right+c);return!0}return!1},positionTitle:function(a){var b=this._titleBounds,c=this.get("styles").title.margin,d=this._titleRotationProps,e=a.offsetWidth,g=a.offsetHeight,h=b.bottom-b.top,b=0.5*this.get("width")-0.5*e,h=h/2-g/2;d.labelWidth=e;d.labelHeight=g;c&&c.top&&(h+=c.top);d.x=b;d.y=h;d.transformOrigin=[0.5,0.5];this._rotate(a,d)},positionLabel:function(a,b,c,d){var c=b.x,b=b.y+this._totalTitleSize+
this._maxLabelSize,e=this._labelRotationProps,g=e.rot,h=e.absRot,f=this._labelWidths[d],d=this._labelHeights[d];0===g?(c-=0.5*f,b-=d):90===g?(c-=f,b-=0.5*d):-90===g?b-=0.5*d:0<g?(c-=f,b-=d-d*g/180):b-=d-d*h/180;e.x=Math.round(c);e.y=Math.round(b);e.labelWidth=f;e.labelHeight=d;this._rotate(a,e)},_setRotationCoords:function(a){var b=a.rot,c=a.absRot,d=a.labelWidth,e=a.labelHeight,g;0===b?(g=0.5*d,b=e):90===b?(g=d,b=0.5*e):-90===b?b=0.5*e:0<b?(g=d,b=e-e*b/180):b=e-e*c/180;a.x-=g;a.y-=b},_getTransformOrigin:function(a){return 0===
a?[0,0]:90===a?[1,0.5]:-90===a?[0,0.5]:0<a?[1,0.5]:[0,0.5]},offsetNodeForTick:function(){},setCalculatedSize:function(){var a=this.get("graphic"),b=this.get("styles").label.margin.bottom+this._maxLabelSize,c=this._totalTitleSize,d=this.get("topTickOffset"),b=Math.round(d+b+c);this._explicitHeight&&(b=this._explicitWidth);this.set("calculatedHeight",b);a.set("y",b-d)}};f.TopAxisLayout=P;f.Axis=f.Base.create("axis",f.Widget,[f.Renderer],{_calculatedWidth:0,_calculatedHeight:0,_dataChangeHandler:function(){this.get("rendered")&&
this._drawAxis()},_positionChangeHandler:function(a){this._updateGraphic(a.newVal);this._updateHandler()},_updateGraphic:function(a){var b=this.get("graphic");"none"==a?b&&b.destroy():b||this._setCanvas()},_updateHandler:function(){this.get("rendered")&&this._drawAxis()},renderUI:function(){this._updateGraphic(this.get("position"))},syncUI:function(){var a=this._layout,b,c,d;if(a)for(d in a=a._getDefaultMargins(),b=this.get("styles"),c=b.label.margin,b=b.title.margin,a)a.hasOwnProperty(d)&&(c[d]=
void 0===c[d]?a[d]:c[d],b[d]=void 0===b[d]?a[d]:b[d]);this._drawAxis()},_setCanvas:function(){var a=this.get("contentBox"),b=this.get("boundingBox"),c=this.get("position"),d=this._parentNode,e=this.get("width"),g=this.get("height");b.setStyle("position","absolute");b.setStyle("zIndex",2);e=e?e+"px":d.getStyle("width");g=g?g+"px":d.getStyle("height");"top"===c||"bottom"===c?a.setStyle("width",e):a.setStyle("height",g);a.setStyle("position","relative");a.setStyle("left","0px");a.setStyle("top","0px");
this.set("graphic",new f.Graphic);this.get("graphic").render(a)},_getDefaultStyles:function(){return f.merge(f.Renderer.prototype._getDefaultStyles(),{majorTicks:{display:"inside",length:4,color:"#dad8c9",weight:1,alpha:1},minorTicks:{display:"none",length:2,color:"#dad8c9",weight:1},line:{weight:1,color:"#dad8c9",alpha:1},majorUnit:{determinant:"count",count:11,distance:75},top:"0px",left:"0px",width:"100px",height:"100px",label:{color:"#808080",alpha:1,fontSize:"85%",rotation:0,margin:{top:void 0,
right:void 0,bottom:void 0,left:void 0}},title:{color:"#808080",alpha:1,fontSize:"85%",rotation:void 0,margin:{top:void 0,right:void 0,bottom:void 0,left:void 0}},hideOverlappingLabelTicks:!1})},_handleSizeChange:function(a){var a=a.attrName,b=this.get("position"),c="left"==b||"right"==b,d=this.get("contentBox"),b="bottom"==b||"top"==b;d.setStyle("width",this.get("width"));d.setStyle("height",this.get("height"));(b&&"width"==a||c&&"height"==a)&&this._drawAxis()},_layoutClasses:{top:P,bottom:O,left:D,
right:N},drawLine:function(a,b,c){a.moveTo(b.x,b.y);a.lineTo(c.x,c.y)},_getTextRotationProps:function(a){if(void 0===a.rotation)switch(this.get("position")){case "left":a.rotation=-90;break;case "right":a.rotation=90;break;default:a.rotation=0}var b=Math.min(90,Math.max(-90,a.rotation)),c=Math.abs(b),d=Math.PI/180,e=parseFloat(parseFloat(Math.sin(c*d)).toFixed(8)),g=parseFloat(parseFloat(Math.cos(c*d)).toFixed(8));return{rot:b,absRot:c,radCon:d,sinRadians:e,cosRadians:g,textAlpha:a.alpha}},_drawAxis:function(){if(this._drawing)this._callLater=
!0;else{this._drawing=!0;this._callLater=!1;if(this._layout){var a=this.get("styles"),b=a.line,c=a.label,d=a.majorTicks,e="none"!=d.display,g,h=a.majorUnit,f=0,i=this._layout,k,j,m,n=this.get("labelFunction"),o=this.get("labelFunctionScope"),r=this.get("labelFormat");g=this.get("graphic");m=this.get("path");var q;this._labelWidths=[];this._labelHeights=[];g.set("autoDraw",!1);m.clear();m.set("stroke",{weight:b.weight,color:b.color,opacity:b.alpha});this._labelRotationProps=this._getTextRotationProps(c);
this._labelRotationProps.transformOrigin=i._getTransformOrigin(this._labelRotationProps.rot);i.setTickOffsets.apply(this);g=this.getLength();k=i.getLineStart.apply(this);b=this.getTotalMajorUnits(h);h=this.getMajorUnitDistance(b,g,h);this.set("edgeOffset",0.5*this.getEdgeOffset(b,g));if(1>b)this._clearLabelCache();else{g=this.getFirstPoint(k);this.drawLine(m,k,this.getLineEnd(g));e&&(q=this.get("tickPath"),q.clear(),q.set("stroke",{weight:d.weight,color:d.color,opacity:d.alpha}),i.drawTick.apply(this,
[q,g,d]));this._createLabelCache();this._tickPoints=[];this._titleSize=this._totalTitleSize=this._maxLabelSize=0;this._setTitle();for(k=i.getExplicitlySized.apply(this,[a]);f<b;++f)e&&i.drawTick.apply(this,[q,g,d]),this.getPosition(g),j=this.getLabel(g,c),this._labels.push(j),this._tickPoints.push({x:g.x,y:g.y}),this.get("appendLabelFunction")(j,n.apply(o,[this.getLabelByIndex(f,b),r])),m=Math.round(j.offsetWidth),j=Math.round(j.offsetHeight),k||this._layout.updateMaxLabelSize.apply(this,[m,j]),this._labelWidths.push(m),
this._labelHeights.push(j),g=this.getNextPoint(g,h);this._clearLabelCache();this.get("overlapGraph")&&i.offsetNodeForTick.apply(this,[this.get("contentBox")]);i.setCalculatedSize.apply(this);this._titleTextField&&this._layout.positionTitle.apply(this,[this._titleTextField]);for(f=0;f<b;++f)i.positionLabel.apply(this,[this.get("labels")[f],this._tickPoints[f],a,f])}}this._drawing=!1;this._callLater?this._drawAxis():(this._updatePathElement(),this.fire("axisRendered"))}},_setTotalTitleSize:function(a){var b=
this._titleTextField,c=b.offsetWidth,b=b.offsetHeight,d=this._titleRotationProps.rot,a=a.margin,e=this.get("position"),g=new f.Matrix;g.rotate(d);c=g.getContentRect(c,b);"left"==e||"right"==e?(b=c.right-c.left,a&&(b+=a.left+a.right)):(b=c.bottom-c.top,a&&(b+=a.top+a.bottom));this._titleBounds=c;this._totalTitleSize=b},_updatePathElement:function(){var a=this._path,b=this._tickPath,c=!1,d=this.get("graphic");a&&(c=!0,a.end());b&&(c=!0,b.end());c&&d._redraw()},_setTitle:function(){var a,b,c,d=this.get("title"),
e=this._titleTextField;if(null!==d&&void 0!==d){c={rotation:"rotation",margin:"margin",alpha:"alpha"};b=this.get("styles").title;e?!p.createElementNS&&e.style.filter&&(e.style.filter=null):(e=p.createElement("span"),e.style.display="block",e.style.whiteSpace="nowrap",e.setAttribute("class","axisTitle"),this.get("contentBox").append(e));e.style.position="absolute";for(a in b)b.hasOwnProperty(a)&&!c.hasOwnProperty(a)&&(e.style[a]=b[a]);this.get("appendTitleFunction")(e,d);this._titleTextField=e;this._titleRotationProps=
this._getTextRotationProps(b);this._setTotalTitleSize(b)}else e&&((a=e.parentNode)&&a.removeChild(e),this._titleTextField=null,this._totalTitleSize=0)},getLabel:function(a,b){var c,d;d=this._labelCache;var e={rotation:"rotation",margin:"margin",alpha:"alpha"};d&&0<d.length?d=d.shift():(d=p.createElement("span"),d.className=f.Lang.trim([d.className,"axisLabel"].join(" ")),this.get("contentBox").append(d));!p.createElementNS&&d.style.filter&&(d.style.filter=null);d.style.display="block";d.style.whiteSpace=
"nowrap";d.style.position="absolute";for(c in b)b.hasOwnProperty(c)&&!e.hasOwnProperty(c)&&(d.style[c]=b[c]);return d},_createLabelCache:function(){if(this._labels)for(;0<this._labels.length;)this._labelCache.push(this._labels.shift());else this._clearLabelCache();this._labels=[]},_clearLabelCache:function(){if(this._labelCache)for(var a=this._labelCache.length,b=0,c;b<a;++b)c=this._labelCache[b],this._removeChildren(c),f.Event.purgeElement(c,!0),c.parentNode.removeChild(c);this._labelCache=[]},getLineEnd:function(a){var b=
this.get("width"),c=this.get("height"),d=this.get("position");return"top"===d||"bottom"===d?{x:b,y:a.y}:{x:a.x,y:c}},getLength:function(){var a=this.get("styles").padding,b=this.get("width"),c=this.get("height"),d=this.get("position");return"top"===d||"bottom"===d?b-(a.left+a.right):c-(a.top+a.bottom)},getFirstPoint:function(a){var b=this.get("styles"),c=this.get("position"),b=b.padding,a={x:a.x,y:a.y};"top"===c||"bottom"===c?a.x+=b.left+this.get("edgeOffset"):a.y+=this.get("height")-(b.top+this.get("edgeOffset"));
return a},getNextPoint:function(a,b){var c=this.get("position");"top"===c||"bottom"===c?a.x+=b:a.y-=b;return a},getLastPoint:function(){var a=this.get("styles").padding,b=this.get("width"),c=this.get("position");return"top"===c||"bottom"===c?{x:b-a.right,y:a.top}:{x:a.left,y:a.top}},getPosition:function(a){var b=this.get("height"),c=this.get("styles").padding,d=this.get("position"),e=this.get("dataType");return"left"===d||"right"===d?"numeric"===e?b-(c.top+c.bottom)-(a.y-c.top):a.y-c.top:a.x-c.left},
_rotate:function(a,b){var c=b.rot,d=b.x,e=b.y,g,h,l=new f.Matrix,i=b.transformOrigin||[0,0];if(p.createElementNS)l.translate(d,e),l.rotate(c),a.style.MozTransformOrigin=100*i[0]+"% "+100*i[1]+"%",a.style.MozTransform=l.toCSSText(),a.style.webkitTransformOrigin=100*i[0]+"% "+100*i[1]+"%",a.style.webkitTransform=l.toCSSText(),a.style.msTransformOrigin=100*i[0]+"% "+100*i[1]+"%",a.style.msTransform=l.toCSSText(),a.style.OTransformOrigin=100*i[0]+"% "+100*i[1]+"%",a.style.OTransform=l.toCSSText();else if(h=
b.textAlpha,o.isNumber(h)&&1>h&&-1<h&&!isNaN(h)&&(g="progid:DXImageTransform.Microsoft.Alpha(Opacity="+Math.round(100*h)+")"),0!==c?(l.rotate(c),h=l.getContentRect(b.labelWidth,b.labelHeight),l.init(),l.translate(h.left,h.top),l.translate(d,e),this._simulateRotateWithTransformOrigin(l,c,i,b.labelWidth,b.labelHeight),g=(g?g+" ":"")+l.toFilterText(),a.style.left=l.dx+"px",a.style.top=l.dy+"px"):(a.style.left=d+"px",a.style.top=e+"px"),g)a.style.filter=g},_simulateRotateWithTransformOrigin:function(a,
b,c,d,e){d*=c[0];c=c[1]*e;d=!isNaN(d)?d:0;c=!isNaN(c)?c:0;a.translate(d,c);a.rotate(b);a.translate(-d,-c)},getMaxLabelBounds:function(){return this._getLabelBounds(this.getMaximumValue())},getMinLabelBounds:function(){return this._getLabelBounds(this.getMinimumValue())},_getLabelBounds:function(a){var b=this._layout,c=this.get("styles").label,d=new f.Matrix,e=this._getTextRotationProps(c);e.transformOrigin=b._getTransformOrigin(e.rot);c=this.getLabel({x:0,y:0},c);this.get("appendLabelFunction")(c,
this.get("labelFunction").apply(this,[a,this.get("labelFormat")]));e.labelWidth=c.offsetWidth;e.labelHeight=c.offsetHeight;this._removeChildren(c);f.Event.purgeElement(c,!0);c.parentNode.removeChild(c);e.x=0;e.y=0;b._setRotationCoords(e);d.translate(e.x,e.y);this._simulateRotateWithTransformOrigin(d,e.rot,e.transformOrigin,e.labelWidth,e.labelHeight);return d.getContentRect(e.labelWidth,e.labelHeight)},_removeChildren:function(a){if(a.hasChildNodes())for(var b;a.firstChild;)b=a.firstChild,this._removeChildren(b),
a.removeChild(b)},destructor:function(){var a=this.get("contentBox").getDOMNode(),b=this.get("labels"),c=this.get("graphic"),d;if(0<(b?b.length:0))for(;0<b.length;)d=b.shift(),this._removeChildren(d),a.removeChild(d);c&&c.destroy()},_maxLabelSize:0,_setText:function(a,b){a.innerHTML="";o.isNumber(b)?b+="":b||(b="");Z(b)&&(b=p.createTextNode(b));a.appendChild(b)}},{ATTRS:{width:{lazyAdd:!1,getter:function(){return this._explicitWidth?this._explicitWidth:this._calculatedWidth},setter:function(a){return this._explicitWidth=
a}},height:{lazyAdd:!1,getter:function(){return this._explicitHeight?this._explicitHeight:this._calculatedHeight},setter:function(a){return this._explicitHeight=a}},calculatedWidth:{getter:function(){return this._calculatedWidth},setter:function(a){return this._calculatedWidth=a}},calculatedHeight:{getter:function(){return this._calculatedHeight},setter:function(a){return this._calculatedHeight=a}},edgeOffset:{value:0},graphic:{},path:{readOnly:!0,getter:function(){if(!this._path){var a=this.get("graphic");
a&&(this._path=a.addShape({type:"path"}))}return this._path}},tickPath:{readOnly:!0,getter:function(){if(!this._tickPath){var a=this.get("graphic");a&&(this._tickPath=a.addShape({type:"path"}))}return this._tickPath}},node:{},position:{setter:function(a){var b=this._layoutClasses[a];a&&"none"!=a&&(this._layout=new b);return a}},topTickOffset:{value:0},bottomTickOffset:{value:0},leftTickOffset:{value:0},rightTickOffset:{value:0},labels:{readOnly:!0,getter:function(){return this._labels}},tickPoints:{readOnly:!0,
getter:function(){return"none"==this.get("position")?this.get("styles").majorUnit.count:this._tickPoints}},overlapGraph:{value:!0,validator:function(a){return o.isBoolean(a)}},labelFunctionScope:{},maxLabelSize:{getter:function(){return this._maxLabelSize},setter:function(a){return this._maxLabelSize=a}},title:{value:null},labelFunction:{value:function(a){return a}},appendLabelFunction:{getter:function(){return this._setText}},appendTitleFunction:{getter:function(){return this._setText}}}});f.AxisType=
f.Base.create("baseAxis",f.Axis,[],{initializer:function(){this.after("dataReady",f.bind(this._dataChangeHandler,this));this.after("dataUpdate",f.bind(this._dataChangeHandler,this));this.after("minimumChange",f.bind(this._keyChangeHandler,this));this.after("maximumChange",f.bind(this._keyChangeHandler,this));this.after("keysChange",this._keyChangeHandler);this.after("dataProviderChange",this._dataProviderChangeHandler);this.after("alwaysShowZeroChange",this._keyChangeHandler);this.after("roundingMethodChange",
this._keyChangeHandler)},bindUI:function(){this.after("stylesChange",this._updateHandler);this.after("overlapGraphChange",this._updateHandler);this.after("positionChange",this._positionChangeHandler);this.after("widthChange",this._handleSizeChange);this.after("heightChange",this._handleSizeChange);this.after("calculatedWidthChange",this._handleSizeChange);this.after("calculatedHeightChange",this._handleSizeChange)},_dataProviderChangeHandler:function(){var a=this.get("keyCollection").concat(),b=this.get("keys"),
c;if(b)for(c in b)b.hasOwnProperty(c)&&delete b[c];a&&a.length&&this.set("keys",a)},GUID:"yuibaseaxis",_type:null,_setMaximum:null,_dataMaximum:null,_setMinimum:null,_data:null,_updateTotalDataFlag:!0,_dataReady:!1,addKey:function(a){this.set("keys",a)},_getKeyArray:function(a,b){for(var c=0,d,e=[],g=b.length;c<g;++c)d=b[c],e[c]=d[a];return e},_setDataByKey:function(a){var b,c,d=[],e=this._dataClone.concat(),g=e.length;for(b=0;b<g;++b)c=e[b],d[b]=c[a];this.get("keys")[a]=d;this._updateTotalDataFlag=
!0},_updateTotalData:function(){var a=this.get("keys"),b;this._data=[];for(b in a)a.hasOwnProperty(b)&&(this._data=this._data.concat(a[b]));this._updateTotalDataFlag=!1},removeKey:function(a){var b=this.get("keys");b.hasOwnProperty(a)&&(delete b[a],this._keyChangeHandler())},getKeyValueAt:function(a,b){var c=NaN,d=this.get("keys");d[a]&&o.isNumber(parseFloat(d[a][b]))&&(c=d[a][b]);return parseFloat(c)},getDataByKey:function(a){var b=this.get("keys");return b[a]?b[a]:null},_updateMinAndMax:function(){var a=
this.get("data"),b=0,c=0,d,e,g;if(a&&a.length&&0<a.length&&(d=a.length,b=c=a[0],1<d))for(g=1;g<d;g++)e=a[g],isNaN(e)||(b=Math.max(e,b),c=Math.min(e,c));this._dataMaximum=b;this._dataMinimum=c},getTotalMajorUnits:function(){var a,b=this.get("styles").majorUnit,c=this.get("length");"count"===b.determinant?a=b.count:"distance"===b.determinant&&(a=c/b.distance+1);return a},getMajorUnitDistance:function(a,b,c){var d;"count"===c.determinant?d=b/(a-1):"distance"===c.determinant&&(d=c.distance);return d},
getEdgeOffset:function(){return 0},getLabelByIndex:function(a,b){var c=this.get("minimum"),d=(this.get("maximum")-c)/(b-1);return c+a*d},_keyChangeHandler:function(){this._updateMinAndMax();this.fire("dataUpdate")},_hasDataOverflow:function(){return this.get("setMin")||this.get("setMax")?!0:!1},getMinimumValue:function(){return this.get("minimum")},getMaximumValue:function(){return this.get("maximum")}},{ATTRS:{keys:{value:{},setter:function(a){var b={},c,d,e=this.get("dataProvider");if(o.isArray(a)){d=
a.length;for(c=0;c<d;++c)b[a[c]]=this._getKeyArray(a[c],e)}else if(o.isString(a))b=this.get("keys"),b[a]=this._getKeyArray(a,e);else for(c in a)a.hasOwnProperty(c)&&(b[c]=this._getKeyArray(c,e));this._updateTotalDataFlag=!0;return b}},roundingMethod:{value:"niceNumber"},type:{readOnly:!0,getter:function(){return this._type}},dataProvider:{setter:function(a){return a}},dataMaximum:{getter:function(){this._dataMaximum||this._updateMinAndMax();return this._dataMaximum}},maximum:{lazyAdd:!1,getter:function(){var a=
this.get("dataMaximum");0===this.get("minimum")&&0===a&&(a=10);o.isNumber(this._setMaximum)&&(a=this._setMaximum);return parseFloat(a)},setter:function(a){this._setMaximum=parseFloat(a);return a}},dataMinimum:{getter:function(){this._dataMinimum||this._updateMinAndMax();return this._dataMinimum}},minimum:{lazyAdd:!1,getter:function(){var a=this.get("dataMinimum");o.isNumber(this._setMinimum)&&(a=this._setMinimum);return parseFloat(a)},setter:function(a){this._setMinimum=parseFloat(a);return a}},setMax:{readOnly:!0,
getter:function(){return o.isNumber(this._setMaximum)}},setMin:{readOnly:!0,getter:function(){return o.isNumber(this._setMinimum)}},data:{getter:function(){(!this._data||this._updateTotalDataFlag)&&this._updateTotalData();return this._data}},keyCollection:{getter:function(){var a=this.get("keys"),b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},readOnly:!0}}});J.NAME="numericAxis";J.ATTRS={alwaysShowZero:{value:!0},labelFunction:{value:function(a,b){return b?f.DataType.Number.format(a,b):
a}},labelFormat:{value:{prefix:"",thousandsSeparator:"",decimalSeparator:"",decimalPlaces:"0",suffix:""}}};f.extend(J,f.AxisType,{formatLabel:function(a,b){return b?f.DataType.Number.format(a,b):a},getTotalByKey:function(a){for(var b=0,a=this.getDataByKey(a),c=0,d,e=a?a.length:0;c<e;++c)d=parseFloat(a[c]),isNaN(d)||(b+=d);return b},_type:"numeric",_getMinimumUnit:function(a,b,c){return this._getNiceNumber(Math.ceil((a-b)/c))},_getNiceNumber:function(a){var b=a,c=Math.ceil(0.4342944819032518*Math.log(b)),
d=Math.pow(10,c);d/2>=b?(b=Math.floor((d/2-b)/(Math.pow(10,c-1)/2)),b=d/2-b*Math.pow(10,c-1)/2):b=d;return!isNaN(b)?b:a},_updateMinAndMax:function(){var a=this.get("data"),b,c,d,e,g=0,h,f=this.get("setMax"),i=this.get("setMin");if(!f||!i){if(a&&a.length&&0<a.length)for(d=a.length;g<d;g++)if(e=a[g],isNaN(e)){if(o.isObject(e))for(h in c=b=0,e)e.hasOwnProperty(h)&&(b=Math.max(e[h],b),c=Math.min(e[h],c));b=f?this._setMaximum:b;c=i?this._setMinimum:c}else c=i?this._setMinimum:void 0===c?e:Math.min(e,c),
this._actualMaximum=b=f?this._setMaximum:void 0===b?e:Math.max(e,b),this._actualMinimum=c;this._roundMinAndMax(c,b,i,f)}},_roundMinAndMax:function(a,b,c,d){var e,g,h=0<=a,f=0<b,i,k;g=this.getTotalMajorUnits()-1;k=this.get("alwaysShowZero");e=this.get("roundingMethod");i=1<=(b-a)/g;if(e)if("niceNumber"==e)if(e=this._getMinimumUnit(b,a,g),h&&f)(k||a<e)&&!c?(a=0,e=this._getMinimumUnit(b,a,g)):a=this._roundDownToNearest(a,e),d?k||(a=b-e*g):b=c?a+e*g:this._roundUpToNearest(b,e);else if(f&&!h)if(k)if(h=
Math.round(g/(-1*a/b+1)),h=Math.max(Math.min(h,g-1),1),f=g-h,k=Math.ceil(b/h),i=-1*Math.floor(a/f),c){for(;i<k&&0<=f;)f--,h++,k=Math.ceil(b/h),i=-1*Math.floor(a/f);b=0<f?i*h:a+e*g}else if(d){for(;k<i&&0<=h;)f++,h--,i=-1*Math.floor(a/f),k=Math.ceil(b/h);a=0<h?-1*k*f:b-e*g}else e=Math.max(k,i),e=this._getNiceNumber(e),b=e*h,a=-1*e*f;else d?a=b-e*g:c?b=a+e*g:(a=this._roundDownToNearest(a,e),b=this._roundUpToNearest(b,e));else c?b=k?0:a+e*g:d?a=b-e*g:k||0===b||0<b+e?(b=0,e=this._getMinimumUnit(b,a,g),
a=b-e*g):(a=this._roundDownToNearest(a,e),b=this._roundUpToNearest(b,e));else if("auto"==e)if(h&&f){if((k||a<(b-a)/g)&&!c)a=0;e=(b-a)/g;i&&(e=Math.ceil(e));b=a+e*g}else f&&!h?k?(h=Math.round(g/(-1*a/b+1)),h=Math.max(Math.min(h,g-1),1),f=g-h,i?(k=Math.ceil(b/h),i=-1*Math.floor(a/f)):(k=b/h,i=-1*(a/f)),e=Math.max(k,i),b=e*h,a=-1*e*f):(e=(b-a)/g,i&&(e=Math.ceil(e)),a=this._roundDownToNearest(a,e),b=this._roundUpToNearest(b,e)):(e=(b-a)/g,i&&(e=Math.ceil(e)),k||0===b||0<b+e?(b=0,e=(b-a)/g,i&&Math.ceil(e),
a=b-e*g):(a=this._roundDownToNearest(a,e),b=this._roundUpToNearest(b,e)));else!isNaN(e)&&isFinite(e)&&(g*=e,i=this._roundDownToNearest(a,e),e=this._roundUpToNearest(b,e),d?a=b-g:c?b=a+g:h&&f?(a=k||0>=i?0:i,b=a+g):f&&!h?(a=i,b=e):(b=k||0<=e?0:e,a=b-g));this._dataMaximum=b;this._dataMinimum=a},getLabelByIndex:function(a,b){var c=this.get("minimum"),d=this.get("maximum"),e=(d-c)/(b-1),g=this.get("roundingMethod"),b=b-1;0===a?d=c:a!==b&&(d=a*e,"niceNumber"==g&&(d=this._roundToNearest(d,e)),d+=c);return parseFloat(d)},
_roundToNearest:function(a,b){b=b||1;return 0===b?a:this._roundToPrecision(Math.round(this._roundToPrecision(a/b,10))*b,10)},_roundUpToNearest:function(a,b){b=b||1;return 0===b?a:Math.ceil(this._roundToPrecision(a/b,10))*b},_roundDownToNearest:function(a,b){b=b||1;return 0===b?a:Math.floor(this._roundToPrecision(a/b,10))*b},_roundToPrecision:function(a,b){var c=Math.pow(10,b||0);return Math.round(c*a)/c},_hasDataOverflow:function(){var a,b,c;if(this.get("setMin")||this.get("setMax"))return!0;a=this.get("roundingMethod");
b=this._actualMinimum;c=this._actualMaximum;return o.isNumber(a)&&(o.isNumber(c)&&c>this._dataMaximum||o.isNumber(b)&&b<this._dataMinimum)?!0:!1}});f.NumericAxis=J;L.NAME="stackedAxis";f.extend(L,f.NumericAxis,{_updateMinAndMax:function(){var a=0,b=0,c=0,d=0,e=0,g=0,f,l,i=this.get("keys"),k=this.get("setMin"),j=this.get("setMax");for(f in i)i.hasOwnProperty(f)&&(e=Math.max(e,i[f].length));for(;g<e;++g){d=c=0;for(f in i)i.hasOwnProperty(f)&&(l=i[f][g],isNaN(l)||(0<=l?c+=l:d+=l));a=0<c?Math.max(a,c):
Math.max(a,d);b=0>d?Math.min(b,d):Math.min(b,c)}this._actualMaximum=a;this._actualMinimum=b;j&&(a=this._setMaximum);k&&(b=this._setMinimum);this._roundMinAndMax(b,a,k,j)}});f.StackedAxis=L;K.NAME="timeAxis";K.ATTRS={setMax:{readOnly:!0,getter:function(){var a=this._getNumber(this._setMaximum);return o.isNumber(a)}},setMin:{readOnly:!0,getter:function(){var a=this._getNumber(this._setMinimum);return o.isNumber(a)}},maximum:{getter:function(){var a=this._getNumber(this._setMaximum);o.isNumber(a)||(a=
this._getNumber(this.get("dataMaximum")));return parseFloat(a)},setter:function(a){this._setMaximum=this._getNumber(a);return a}},minimum:{getter:function(){var a=this._getNumber(this._setMinimum);o.isNumber(a)||(a=this._getNumber(this.get("dataMinimum")));return parseFloat(a)},setter:function(a){this._setMinimum=this._getNumber(a);return a}},labelFunction:{value:function(a,b){a=f.DataType.Date.parse(a);return b?f.DataType.Date.format(a,{format:b}):a}},labelFormat:{value:"%b %d, %y"}};f.extend(K,
f.AxisType,{formatLabel:function(a,b){a=f.DataType.Date.parse(a);return b?f.DataType.Date.format(a,{format:b}):a},GUID:"yuitimeaxis",_dataType:"time",getLabelByIndex:function(a,b){var c=this.get("minimum"),d=this.get("maximum"),e=this.get("position"),g;g=(d-c)/(b-1)*a;return"bottom"==e||"top"==e?c+g:d-g},_getKeyArray:function(a,b){for(var c,d=[],e=0,g,f=b.length;e<f;++e)c=b[e][a],o.isDate(c)?g=c.valueOf():(g=new Date(c),g=o.isDate(g)?g.valueOf():o.isNumber(c)?c:o.isNumber(parseFloat(c))?parseFloat(c):
(new Date(c)).valueOf()),d[e]=g;return d},_setDataByKey:function(a){var b,c=[],d=this._dataClone.concat(),e,g,f=d.length;for(e=0;e<f;++e)b=d[e][a],o.isDate(b)?g=b.valueOf():(g=new Date(b),o.isDate(g)?g=g.valueOf():o.isNumber(b)?g=b:o.isNumber(parseFloat(b))?g=parseFloat(b):("string"!=typeof b&&(b=b.toString()),g=(new Date(b)).valueOf())),c[e]=g;this.get("keys")[a]=c;this._updateTotalDataFlag=!0},_getNumber:function(a){o.isDate(a)?a=a.valueOf():!o.isNumber(a)&&a&&(a=(new Date(a)).valueOf());return a}});
f.TimeAxis=K;M.NAME="categoryAxis";f.extend(M,f.AxisType,{formatLabel:function(a){return a},_indices:null,GUID:"yuicategoryaxis",_type:"category",_updateMinAndMax:function(){this._dataMaximum=Math.max(this.get("data").length-1,0);this._dataMinimum=0},_getKeyArray:function(a,b){var c=0,d,e=[],g=[],f=b.length;this._indices||(this._indices={});for(;c<f;++c)d=b[c],e[c]=c,g[c]=d[a];this._indices[a]=e;return g},_setDataByKey:function(a){var b,c,d=[],e=[],g=this._dataClone.concat(),f=g.length;this._indices||
(this._indices={});for(b=0;b<f;++b)c=g[b],d[b]=b,e[b]=c[a];this._indices[a]=d;this.get("keys")[a]=e.concat();this._updateTotalDataFlag=!0},getDataByKey:function(a){this._indices||this.get("keys");var b=this._indices;return b[a]?b[a]:null},getTotalMajorUnits:function(){return this.get("data").length},getMajorUnitDistance:function(a,b,c){var d;"count"===c.determinant?d=b/a:"distance"===c.determinant&&(d=c.distance);return d},getEdgeOffset:function(a,b){return b/a},getKeyValueAt:function(a,b){var c=
NaN,d=this.get("keys");d[a]&&d[a][b]&&(c=d[a][b]);return c},getLabelByIndex:function(a,b){var c=this.get("data"),d=this.get("position");return"bottom"==d||"top"==d?c[a]:c[b-(a+1)]},getMinimumValue:function(){return this.get("data")[0]},getMaximumValue:function(){var a=this.get("data");return a[a.length-1]}});f.CategoryAxis=M;V.prototype={getCurveControlPoints:function(a,b){var c=[],d=1,e=a.length-1,g=[],f=[];if(1>e)return null;c[0]={startx:a[0],starty:b[0],endx:a[1],endy:b[1]};if(1===e)return c[0].ctrlx1=
(2*a[0]+a[1])/3,c[0].ctrly2=(2*b[0]+b[1])/3,c[0].ctrlx2=2*c[0].ctrlx1-a[0],c[0].ctrly2=2*c[0].ctrly1-b[0],c;for(;d<e;++d)c.push({startx:Math.round(a[d]),starty:Math.round(b[d]),endx:Math.round(a[d+1]),endy:Math.round(b[d+1])}),g[d]=4*a[d]+2*a[d+1],f[d]=4*b[d]+2*b[d+1];g[0]=a[0]+2*a[1];g[e-1]=(8*a[e-1]+a[e])/2;g=this.getControlPoints(g.concat());f[0]=b[0]+2*b[1];f[e-1]=(8*b[e-1]+b[e])/2;f=this.getControlPoints(f.concat());for(d=0;d<e;++d)c[d].ctrlx1=Math.round(g[d]),c[d].ctrly1=Math.round(f[d]),d<
e-1?(c[d].ctrlx2=Math.round(2*a[d+1]-g[d+1]),c[d].ctrly2=Math.round(2*b[d+1]-f[d+1])):(c[d].ctrlx2=Math.round((a[e]+g[e-1])/2),c[d].ctrly2=Math.round((b[e]+f[e-1])/2));return c},getControlPoints:function(a){var b=a.length,c=[],d=[],e=2,g=1;for(c[0]=a[0]/e;g<b;++g)d[g]=1/e,e=(g<b-1?4:3.5)-d[g],c[g]=(a[g]-c[g-1])/e;for(g=1;g<b;++g)c[b-g-1]-=d[b-g]*c[b-g];return c}};f.CurveUtil=V;W.prototype={_stackCoordinates:function(){var a=this.get("direction"),b=this.get("order"),c=this.get("type"),d=this.get("graph"),
e=d.get("height"),g=d.seriesTypes[c],c=0,d=this.get("xcoords"),f=this.get("ycoords"),l;if(0!==b)if(l=g[b-1].get("xcoords").concat(),b=g[b-1].get("ycoords").concat(),"vertical"===a)for(a=l.length;c<a;++c)!isNaN(l[c])&&!isNaN(d[c])&&(d[c]+=l[c]);else for(a=b.length;c<a;++c)!isNaN(b[c])&&!isNaN(f[c])&&(f[c]=b[c]-(e-f[c]))}};f.StackingUtil=W;R.prototype={_lineDefaults:null,_getGraphic:function(){var a=this.get("graphic")||this.get("graph").get("graphic");this._lineGraphic||(this._lineGraphic=a.addShape({type:"path"}));
this._lineGraphic.clear();return this._lineGraphic},_toggleVisible:function(a){this._lineGraphic&&this._lineGraphic.set("visible",a)},drawLines:function(){if(!(1>this.get("xcoords").length)){var a=o.isNumber,b=this.get("xcoords").concat(),c=this.get("ycoords").concat(),d="vertical"===this.get("direction")?c.length:b.length,e,g,f=!0,l,i,k,j,m;g=this.get("styles").line;var n=g.lineType;k=g.color||this._getDefaultColor(this.get("graphOrder"),"line");j=g.alpha;var w=g.dashLength,r=g.gapSpace,q=g.connectDiscontinuousPoints,
p=g.discontinuousType,v=g.discontinuousDashLength,u=g.discontinuousGapSpace,s=this._getGraphic();s.set("stroke",{weight:g.weight,color:k,opacity:j});for(m=0;m<d;m=++m)k=b[m],j=c[m],(g=a(k)&&a(j))?(f?(f=!1,s.moveTo(k,j)):e?"dashed"!=n?s.lineTo(k,j):this.drawDashedLine(s,l,i,k,j,w,r):q?"solid"!=p?this.drawDashedLine(s,l,i,k,j,v,u):s.lineTo(k,j):s.moveTo(k,j),l=k,i=j,e=!0):e=g;s.end()}},drawSpline:function(){if(!(1>this.get("xcoords").length)){var a=this.get("xcoords"),b=this.get("ycoords"),c=this.getCurveControlPoints(a,
b),d=c.length,e,g,f,l,i=0;e=this.get("styles").line;var k=this._getGraphic();g=e.alpha;f=e.color||this._getDefaultColor(this.get("graphOrder"),"line");k.set("stroke",{weight:e.weight,color:f,opacity:g});for(k.moveTo(a[0],b[0]);i<d;i=++i)f=c[i].endx,l=c[i].endy,a=c[i].ctrlx1,b=c[i].ctrlx2,e=c[i].ctrly1,g=c[i].ctrly2,k.curveTo(a,e,b,g,f,l);k.end()}},drawDashedLine:function(a,b,c,d,e,g,f){for(var g=g||10,l=g+(f||10),f=d-b,i=e-c,k=Math.sqrt(Math.pow(f,2)+Math.pow(i,2)),k=Math.floor(Math.abs(k/l)),j=Math.atan2(i,
f),f=Math.cos(j)*l,i=Math.sin(j)*l,l=0;l<k;++l)a.moveTo(b,c),a.lineTo(b+Math.cos(j)*g,c+Math.sin(j)*g),b+=f,c+=i;a.moveTo(b,c);k=Math.sqrt((d-b)*(d-b)+(e-c)*(e-c));k>g?a.lineTo(b+Math.cos(j)*g,c+Math.sin(j)*g):0<k&&a.lineTo(b+Math.cos(j)*k,c+Math.sin(j)*k);a.moveTo(d,e)},_getLineDefaults:function(){return{alpha:1,weight:6,lineType:"solid",dashLength:10,gapSpace:10,connectDiscontinuousPoints:!0,discontinuousType:"solid",discontinuousDashLength:10,discontinuousGapSpace:10}}};f.augment(R,f.Attribute);
f.Lines=R;S.prototype={_getPath:function(){var a=this._path;a||(this._path=a=this.get("graph").get("graphic").addShape({type:"path"}));return a},_toggleVisible:function(a){this._path&&this._path.set("visible",a)},drawFill:function(a,b){if(!(1>a.length)){var c=a.length,d=a[0],e=b[0],g=1,f=this.get("styles").area,l=this._getPath(),i=f.color||this._getDefaultColor(this.get("graphOrder"),"slice");l.clear();l.set("fill",{color:i,opacity:f.alpha});l.set("stroke",{weight:0});for(l.moveTo(d,e);g<c;g=++g)d=
a[g],e=b[g],isNaN(e)||l.lineTo(d,e);l.end()}},drawAreaSpline:function(){if(!(1>this.get("xcoords").length)){var a=this.get("xcoords"),b=this.get("ycoords"),c=this.getCurveControlPoints(a,b),d=c.length,e,g,f,l,i,k,j=0,a=a[0],b=b[0];e=this.get("styles").area;var m=this._getPath();g=e.color||this._getDefaultColor(this.get("graphOrder"),"slice");m.set("fill",{color:g,opacity:e.alpha});m.set("stroke",{weight:0});for(m.moveTo(a,b);j<d;j=++j)i=c[j].endx,k=c[j].endy,e=c[j].ctrlx1,g=c[j].ctrlx2,f=c[j].ctrly1,
l=c[j].ctrly2,m.curveTo(e,f,g,l,i,k);"vertical"===this.get("direction")?(m.lineTo(this._leftOrigin,k),m.lineTo(this._leftOrigin,b)):(m.lineTo(i,this._bottomOrigin),m.lineTo(a,this._bottomOrigin));m.lineTo(a,b);m.end()}},drawStackedAreaSpline:function(){if(!(1>this.get("xcoords").length)){var a=this.get("xcoords"),b=this.get("ycoords"),c,d=this.get("order");c=this.get("type");var e=this.get("graph").seriesTypes[c],g,f,l,i,k,j,m,n=0,o,r;f=this.get("styles").area;var q=this._getPath();l=f.color||this._getDefaultColor(this.get("graphOrder"),
"slice");o=a[0];r=b[0];c=this.getCurveControlPoints(a,b);g=c.length;q.set("fill",{color:l,opacity:f.alpha});q.set("stroke",{weight:0});for(q.moveTo(o,r);n<g;n=++n)j=c[n].endx,m=c[n].endy,f=c[n].ctrlx1,l=c[n].ctrlx2,i=c[n].ctrly1,k=c[n].ctrly2,q.curveTo(f,i,l,k,j,m);if(0<d){a=e[d-1].get("xcoords").concat().reverse();d=e[d-1].get("ycoords").concat().reverse();c=this.getCurveControlPoints(a,d);n=0;g=c.length;for(q.lineTo(a[0],d[0]);n<g;n=++n)j=c[n].endx,m=c[n].endy,f=c[n].ctrlx1,l=c[n].ctrlx2,i=c[n].ctrly1,
k=c[n].ctrly2,q.curveTo(f,i,l,k,j,m)}else"vertical"===this.get("direction")?(q.lineTo(this._leftOrigin,b[b.length-1]),q.lineTo(this._leftOrigin,r)):(q.lineTo(a[a.length-1],this._bottomOrigin),q.lineTo(o,this._bottomOrigin));q.lineTo(o,r);q.end()}},_defaults:null,_getClosingPoints:function(){var a=this.get("xcoords").concat(),b=this.get("ycoords").concat();"vertical"===this.get("direction")?(a.push(this._leftOrigin),a.push(this._leftOrigin),b.push(b[b.length-1]),b.push(b[0])):(a.push(a[a.length-1]),
a.push(a[0]),b.push(this._bottomOrigin),b.push(this._bottomOrigin));a.push(a[0]);b.push(b[0]);return[a,b]},_getStackedClosingPoints:function(){var a=this.get("order"),b=this.get("type"),c=this.get("graph"),d=this.get("direction"),e=c.seriesTypes[b],b=this.get("xcoords").concat(),c=this.get("ycoords").concat(),g=b[0],f=c[0];0<a?(d=e[a-1].get("xcoords").concat(),a=e[a-1].get("ycoords").concat(),b=b.concat(d.concat().reverse()),c=c.concat(a.concat().reverse()),b.push(b[0]),c.push(c[0])):"vertical"===
d?(b.push(this._leftOrigin),b.push(this._leftOrigin),c.push(c[c.length-1]),c.push(f)):(b.push(b[b.length-1]),b.push(g),c.push(this._bottomOrigin),c.push(this._bottomOrigin));return[b,c]},_getAreaDefaults:function(){return{}}};f.augment(S,f.Attribute);f.Fills=S;T.prototype={_plotDefaults:null,drawPlots:function(){if(this.get("xcoords")&&!(1>this.get("xcoords").length)){var a=o.isNumber,b=f.clone(this.get("styles").marker),c=b.width,d=b.height,e=this.get("xcoords"),g=this.get("ycoords"),h=0,l=e.length,
i=g[0],k=c/2,j=d/2,m=null,n=null,w=this.get("graphOrder");if(this.get("groupMarkers")){a=[];for(i=[];h<l;++h)a.push(parseFloat(e[h]-k)),i.push(parseFloat(g[h]-j));this._createGroupMarker({xvalues:a,yvalues:i,fill:b.fill,border:b.border,dimensions:{width:c,height:d},graphOrder:w,shape:b.shape})}else{o.isArray(b.fill.color)&&(m=b.fill.color.concat());o.isArray(b.border.color)&&(n=b.border.color.concat());for(this._createMarkerCache();h<l;++h)(i=parseFloat(g[h]-j),c=parseFloat(e[h]-k),!a(c)||!a(i))?
this._markers.push(null):(m&&(b.fill.color=m[h%m.length]),n&&(b.border.color=n[h%n.length]),b.x=c,b.y=i,this.getMarker(b,w,h));this._clearMarkerCache()}}},_groupShapes:{circle:f.CircleGroup,rect:f.RectGroup,ellipse:f.EllipseGroup,diamond:f.DiamondGroup},_getGroupShape:function(a){o.isString(a)&&(a=this._groupShapes[a]);return a},_getPlotDefaults:function(){var a={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:1,alpha:1},width:10,height:10,shape:"circle"};a.fill.color=
this._getDefaultColor(this.get("graphOrder"),"fill");a.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return a},_markers:null,_markerCache:null,getMarker:function(a,b,c){var d,e=a.border;a.id=this.get("chart").get("id")+"_"+b+"_"+c;e.opacity=e.alpha;a.stroke=e;a.fill.opacity=a.fill.alpha;if(0<this._markerCache.length){for(;!d;){if(1>this._markerCache.length){d=this._createMarker(a,b,c);break}d=this._markerCache.shift()}d.set(a)}else d=this._createMarker(a,b,c);this._markers.push(d);
return d},_createMarker:function(a){var b=this.get("graphic"),a=f.clone(a);b.set("autoDraw",!1);a.type=a.shape;b=b.addShape(a);b.addClass(Q);return b},_createMarkerCache:function(){this._groupMarker&&(this._groupMarker.destroy(),this._groupMarker=null);this._markerCache=this._markers&&0<this._markers.length?this._markers.concat():[];this._markers=[]},_createGroupMarker:function(a){var b,c=this.get("markers"),d=a.border;if(c&&0<c.length){for(;0<c.length;)b=c.shift(),b.destroy();this.set("markers",
[])}d.opacity=d.alpha;b={id:this.get("chart").get("id")+"_"+a.graphOrder,stroke:d,fill:a.fill,dimensions:a.dimensions,xvalues:a.xvalues,yvalues:a.yvalues};b.fill.opacity=a.fill.alpha;if(c=this._getGroupShape(a.shape))b.type=c;a.hasOwnProperty("radius")&&!isNaN(a.radius)&&(b.dimensions.radius=a.radius);this._groupMarker&&this._groupMarker.destroy();a=this.get("graphic");a.set("autoDraw",!0);this._groupMarker=a.addShape(b)},_toggleVisible:function(a){var b,c=this.get("markers"),d=0,e;if(c)for(e=c.length;d<
e;++d)(b=c[d])&&b.set("visible",a)},_clearMarkerCache:function(){for(var a;0<this._markerCache.length;)(a=this._markerCache.shift())&&a.destroy()},updateMarkerState:function(a,b){if(this._markers&&this._markers[b]){var c,d;c=f.clone(this.get("styles").marker);d=this._getState(a);var e=this.get("xcoords"),g=this.get("ycoords"),h=this._markers[b];d="off"==d||!c[d]?c:c[d];d.fill.color=this._getItemColor(d.fill.color,b);d.border.color=this._getItemColor(d.border.color,b);d.stroke=d.border;h.set(d);c=
d.width;d=d.height;h.set("x",e[b]-c/2);h.set("y",g[b]-d/2);h.set("visible",this.get("visible"))}},_getItemColor:function(a,b){return o.isArray(a)?a[b%a.length]:a},_setStyles:function(a){a=this._parseMarkerStyles(a);return f.Renderer.prototype._setStyles.apply(this,[a])},_parseMarkerStyles:function(a){if(a.marker){var b=this._getPlotDefaults();a.marker=this._mergeStyles(a.marker,b);a.marker.over&&(a.marker.over=this._mergeStyles(a.marker.over,a.marker));a.marker.down&&(a.marker.down=this._mergeStyles(a.marker.down,
a.marker))}return a},_getState:function(a){var b;switch(a){case "mouseout":b="off";break;case "mouseover":b="over";break;case "mouseup":b="over";break;case "mousedown":b="down"}return b},_stateSyles:null};f.augment(T,f.Attribute);f.Plots=T;X.prototype={drawSeries:function(){if(!(1>this.get("xcoords").length)){var a=f.clone(this.get("styles").marker),b,c,d=this.get("xcoords"),e=this.get("ycoords"),g=0,h=d.length,l=e[0];b=this.get("type");var l=this.get("graph"),i=l.seriesTypes[b],k=i.length,j=0,m=
0,n=0,w=this.get("order"),r=this.get("graphOrder"),q,p,v=null,u=null,s=[],t=[],x={width:[],height:[]},y=[],C=[],A=this.get("groupMarkers");o.isArray(a.fill.color)&&(v=a.fill.color.concat());o.isArray(a.border.color)&&(u=a.border.color.concat());"vertical"==this.get("direction")?(q="height",p="width"):(q="width",p="height");b=a[q];c=a[p];for(this._createMarkerCache();g<k;++g)m=i[g],j+=m.get("styles").marker[q],w>g&&(n=j);m=h*j;this._maxSize=l.get(q);m>this._maxSize&&(g=l.get(q)/m,j*=g,n*=g,this._maxSize=
b=Math.max(b*g,1));n-=j/2;for(g=0;g<h;++g)(l=d[g]-j/2,i=l+j,k=e[g]-j/2,m=k+j,s.push({start:l,end:i}),t.push({start:k,end:m}),isNaN(d[g])||isNaN(e[g]))?this._markers.push(null):(k=this._getMarkerDimensions(d[g],e[g],c,n),!isNaN(k.calculatedSize)&&0<k.calculatedSize)?(l=k.top,i=k.left,A)?(x[q][g]=b,x[p][g]=k.calculatedSize,y.push(i),C.push(l)):(a[q]=b,a[p]=k.calculatedSize,a.x=i,a.y=l,v&&(a.fill.color=v[g%v.length]),u&&(a.border.color=u[g%u.length]),this.getMarker(a,r,g)):A||this._markers.push(null);
this.set("xMarkerPlane",s);this.set("yMarkerPlane",t);A?this._createGroupMarker({fill:a.fill,border:a.border,dimensions:x,xvalues:y,yvalues:C,shape:a.shape}):this._clearMarkerCache()}},_defaultFillColors:"#66007f,#a86f41,#295454,#996ab2,#e8cdb7,#90bdbd,#000000,#c3b8ca,#968373,#678585".split(","),_getPlotDefaults:function(){var a={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:12,height:12,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};a.fill.color=
this._getDefaultColor(this.get("graphOrder"),"fill");a.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return a}};f.Histogram=X;f.CartesianSeries=f.Base.create("cartesianSeries",f.Base,[f.Renderer],{_xDisplayName:null,_yDisplayName:null,_leftOrigin:null,_bottomOrigin:null,render:function(){this._setCanvas();this.addListeners();this.set("rendered",!0);this.validate()},addListeners:function(){var a=this.get("xAxis"),b=this.get("yAxis");a&&(a.after("dataReady",f.bind(this._xDataChangeHandler,
this)),a.after("dataUpdate",f.bind(this._xDataChangeHandler,this)));b&&(b.after("dataReady",f.bind(this._yDataChangeHandler,this)),b.after("dataUpdate",f.bind(this._yDataChangeHandler,this)));this.after("xAxisChange",this._xAxisChangeHandler);this.after("yAxisChange",this._yAxisChangeHandler);this.after("stylesChange",function(){this._updateAxisData()&&this.draw()});this.after("widthChange",function(){this._updateAxisData()&&this.draw()});this.after("heightChange",function(){this._updateAxisData()&&
this.draw()});this.after("visibleChange",this._handleVisibleChange)},_xAxisChangeHandler:function(){var a=this.get("xAxis");a.after("dataReady",f.bind(this._xDataChangeHandler,this));a.after("dataUpdate",f.bind(this._xDataChangeHandler,this))},_yAxisChangeHandler:function(){var a=this.get("yAxis");a.after("dataReady",f.bind(this._yDataChangeHandler,this));a.after("dataUpdate",f.bind(this._yDataChangeHandler,this))},GUID:"yuicartesianseries",_xDataChangeHandler:function(){this._updateAxisData()&&this.draw()},
_yDataChangeHandler:function(){this._updateAxisData()&&this.draw()},_updateAxisData:function(){var a=this.get("xAxis"),b=this.get("yAxis"),c=this.get("xKey"),d=this.get("yKey");if(!a||!b||!c||!d)return!1;a=a.getDataByKey(c);b=b.getDataByKey(d);if(!a||!b)return!1;this.set("xData",a.concat());this.set("yData",b.concat());return!0},validate:function(){this.get("xData")&&this.get("yData")||this._updateAxisData()?this.draw():this.fire("drawingComplete")},_setCanvas:function(){this.set("graphic",this.get("graph").get("graphic"))},
setAreaData:function(){var a=o.isNumber,b,c,d=this.get("graph"),e=d.get("width");b=d.get("height");var g=this.get("xAxis"),f=this.get("yAxis"),d=this.get("xData").concat(),l=this.get("yData").concat(),i=g.getEdgeOffset(d.length,e),k=f.getEdgeOffset(l.length,b),j=this.get("styles").padding,m=j.left,n=j.top,w=e-(m+j.right+i),j=b-(n+j.bottom+k),r=[],q=[],p=g.get("maximum"),g=g.get("minimum"),v=f.get("maximum"),f=f.get("minimum"),w=w/(p-g),p=j/(v-f);c=this.get("direction");var v=0,u=[],s=[],t=this.get("xMarkerPlaneOffset"),
x=this.get("yMarkerPlaneOffset"),y=this.get("graphic");y.set("width",e);y.set("height",b);e=d.length;i*=0.5;k*=0.5;"vertical"===c&&(l=l.reverse());this._leftOrigin=Math.round((0-g)*w+m+i);for(this._bottomOrigin=Math.round(j+n+k);v<e;++v)b=parseFloat(d[v]),c=parseFloat(l[v]),b=a(b)?Math.round((b-g)*w+m+i):NaN,c=a(c)?Math.round(j+n+k-(c-f)*p):NaN,r.push(b),q.push(c),u.push({start:b-t,end:b+t}),s.push({start:c-x,end:c+x});this.set("xcoords",r);this.set("ycoords",q);this.set("xMarkerPlane",u);this.set("yMarkerPlane",
s);this._dataLength=e},draw:function(){var a=this.get("graph"),b=a.get("width"),a=a.get("height");if(this.get("rendered")&&isFinite(b)&&isFinite(a)&&0<b&&0<a&&(this.get("xData")&&this.get("yData")||this._updateAxisData()))this._drawing?this._callLater=!0:(this._drawing=!0,this._callLater=!1,this.setAreaData(),this.get("xcoords")&&this.get("ycoords")&&this.drawSeries(),this._drawing=!1,this._callLater?this.draw():(this._toggleVisible(this.get("visible")),this.fire("drawingComplete")))},_defaultPlaneOffset:4,
_getDefaultStyles:function(){return{padding:{top:0,left:0,right:0,bottom:0}}},_defaultLineColors:"#426ab3,#d09b2c,#000000,#b82837,#b384b5,#ff7200,#779de3,#cbc8ba,#7ed7a6,#007a6c".split(","),_defaultFillColors:"#6084d0,#eeb647,#6c6b5f,#d6484f,#ce9ed1,#ff9f3b,#93b7ff,#e0ddd0,#94ecba,#309687".split(","),_defaultBorderColors:"#205096,#b38206,#000000,#94001e,#9d6fa0,#e55b00,#5e85c9,#adab9e,#6ac291,#006457".split(","),_defaultSliceColors:"#66007f,#a86f41,#295454,#996ab2,#e8cdb7,#90bdbd,#000000,#c3b8ca,#968373,#678585".split(","),
_getDefaultColor:function(a,b){var c={line:this._defaultLineColors,fill:this._defaultFillColors,border:this._defaultBorderColors,slice:this._defaultSliceColors},d=c[b].length,a=a||0;a>=d&&(a%=d);return c[b||"fill"][a]},_handleVisibleChange:function(){this._toggleVisible(this.get("visible"))},getTotalValues:function(){return this.get("valueAxis").getTotalByKey(this.get("valueKey"))},destructor:function(){this._path&&this._path.destroy();this._lineGraphic&&(this._lineGraphic.destroy(),this._lineGraphic=
null);this.get("graphic")&&this.get("graphic").destroy()}},{ATTRS:{xDisplayName:{getter:function(){return this._xDisplayName||this.get("xKey")},setter:function(a){this._xDisplayName=a.toString();return a}},yDisplayName:{getter:function(){return this._yDisplayName||this.get("yKey")},setter:function(a){this._yDisplayName=a.toString();return a}},categoryDisplayName:{readOnly:!0,getter:function(){return"vertical"==this.get("direction")?this.get("yDisplayName"):this.get("xDisplayName")}},valueDisplayName:{readOnly:!0,
getter:function(){return"vertical"==this.get("direction")?this.get("xDisplayName"):this.get("yDisplayName")}},type:{value:"cartesian"},order:{},graphOrder:{},xcoords:{},ycoords:{},chart:{readOnly:!0,getter:function(){return this.get("graph").get("chart")}},graph:{},xAxis:{},yAxis:{},xKey:{setter:function(a){return a.toString()}},yKey:{setter:function(a){return a.toString()}},xData:{},yData:{},rendered:{value:!1},width:{readOnly:!0,getter:function(){this.get("graph").get("width")}},height:{readOnly:!0,
getter:function(){this.get("graph").get("height")}},visible:{value:!0},xMarkerPlane:{},yMarkerPlane:{},xMarkerPlaneOffset:{getter:function(){var a=this.get("styles").marker;return a&&a.width&&isFinite(a.width)?0.5*a.width:this._defaultPlaneOffset}},yMarkerPlaneOffset:{getter:function(){var a=this.get("styles").marker;return a&&a.height&&isFinite(a.height)?0.5*a.height:this._defaultPlaneOffset}},direction:{value:"horizontal"},groupMarkers:{getter:function(){return void 0===this._groupMarkers?this.get("graph").get("groupMarkers"):
this._groupMarkers},setter:function(a){return this._groupMarkers=a}}}});f.MarkerSeries=f.Base.create("markerSeries",f.CartesianSeries,[f.Plots],{drawSeries:function(){this.drawPlots()},_setStyles:function(a){a.marker||(a={marker:a});a=this._parseMarkerStyles(a);return f.MarkerSeries.superclass._mergeStyles.apply(this,[a,this._getDefaultStyles()])},_getDefaultStyles:function(){return this._mergeStyles({marker:this._getPlotDefaults()},f.MarkerSeries.superclass._getDefaultStyles())}},{ATTRS:{type:{value:"marker"}}});
f.LineSeries=f.Base.create("lineSeries",f.CartesianSeries,[f.Lines],{drawSeries:function(){this.drawLines()},_setStyles:function(a){a.line||(a={line:a});return f.LineSeries.superclass._setStyles.apply(this,[a])},_getDefaultStyles:function(){return this._mergeStyles({line:this._getLineDefaults()},f.LineSeries.superclass._getDefaultStyles())}},{ATTRS:{type:{value:"line"}}});f.SplineSeries=f.Base.create("splineSeries",f.LineSeries,[f.CurveUtil,f.Lines],{drawSeries:function(){this.drawSpline()}},{ATTRS:{type:{value:"spline"}}});
f.AreaSplineSeries=f.Base.create("areaSplineSeries",f.CartesianSeries,[f.Fills,f.CurveUtil],{drawSeries:function(){this.drawAreaSpline()}},{ATTRS:{type:{value:"areaSpline"}}});f.StackedSplineSeries=f.Base.create("stackedSplineSeries",f.SplineSeries,[f.StackingUtil],{setAreaData:function(){f.StackedSplineSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this)}},{ATTRS:{type:{value:"stackedSpline"}}});f.StackedMarkerSeries=f.Base.create("stackedMarkerSeries",f.MarkerSeries,[f.StackingUtil],
{setAreaData:function(){f.StackedMarkerSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this)}},{ATTRS:{type:{value:"stackedMarker"}}});f.ColumnSeries=f.Base.create("columnSeries",f.MarkerSeries,[f.Histogram],{_getMarkerDimensions:function(a,b,c,d){a={left:a+d};this._bottomOrigin>=b?(a.top=b,a.calculatedSize=this._bottomOrigin-a.top):(a.top=this._bottomOrigin,a.calculatedSize=b-this._bottomOrigin);return a},updateMarkerState:function(a,b){if(this._markers&&this._markers[b]){var c=
f.clone(this.get("styles").marker),d;d=this._getState(a);var e=this.get("xcoords"),g=this.get("ycoords"),h=this._markers[b],l=this.get("graph").seriesTypes[this.get("type")],i=l.length,k=0,j=0,m=0,n=[],o=this.get("order");d="off"==d||!c[d]?f.clone(c):f.clone(c[d]);d.fill.color=this._getItemColor(d.fill.color,b);d.border.color=this._getItemColor(d.border.color,b);c=this._getMarkerDimensions(e[b],g[b],c.width,j);d.height=c.calculatedSize;d.width=Math.min(this._maxSize,d.width);for(h.set(d);m<i;++m)n[m]=
e[b]+k,h=l[m].get("styles").marker,k+=Math.min(this._maxSize,h.width),o>m&&(j=k),j-=k/2;for(m=0;m<i;++m)if(e=l[m].get("markers"))(e=e[b])&&void 0!==e&&e.set("x",n[m]-k/2)}}},{ATTRS:{type:{value:"column"}}});f.BarSeries=f.Base.create("barSeries",f.MarkerSeries,[f.Histogram],{_getMarkerDimensions:function(a,b,c,d){b={top:b+d};a>=this._leftOrigin?(b.left=this._leftOrigin,b.calculatedSize=a-b.left):(b.left=a,b.calculatedSize=this._leftOrigin-a);return b},updateMarkerState:function(a,b){if(this._markers&&
this._markers[b]){var c=f.clone(this.get("styles").marker),d;d=this._getState(a);var e=this.get("xcoords"),g=this.get("ycoords"),h=this._markers[b],l=this.get("graph").seriesTypes[this.get("type")],i=l.length,k=0,j=0,m=0,n=[],o=this.get("order");d="off"==d||!c[d]?c:c[d];d.fill.color=this._getItemColor(d.fill.color,b);d.border.color=this._getItemColor(d.border.color,b);c=this._getMarkerDimensions(e[b],g[b],c.height,j);d.width=c.calculatedSize;d.height=Math.min(this._maxSize,d.height);for(h.set(d);m<
i;++m)n[m]=g[b]+k,h=l[m].get("styles").marker,k+=Math.min(this._maxSize,h.height),o>m&&(j=k),j-=k/2;for(m=0;m<i;++m)if(g=l[m].get("markers"))(g=g[b])&&void 0!==g&&g.set("y",n[m]-k/2)}}},{ATTRS:{type:{value:"bar"},direction:{value:"vertical"}}});f.AreaSeries=f.Base.create("areaSeries",f.CartesianSeries,[f.Fills],{drawSeries:function(){this.drawFill.apply(this,this._getClosingPoints())},_setStyles:function(a){a.area||(a={area:a});return f.AreaSeries.superclass._setStyles.apply(this,[a])},_getDefaultStyles:function(){return this._mergeStyles({area:this._getAreaDefaults()},
f.AreaSeries.superclass._getDefaultStyles())}},{ATTRS:{type:{value:"area"}}});f.StackedAreaSplineSeries=f.Base.create("stackedAreaSplineSeries",f.AreaSeries,[f.CurveUtil,f.StackingUtil],{drawSeries:function(){this._stackCoordinates();this.drawStackedAreaSpline()}},{ATTRS:{type:{value:"stackedAreaSpline"}}});f.ComboSeries=f.Base.create("comboSeries",f.CartesianSeries,[f.Fills,f.Lines,f.Plots],{drawSeries:function(){this.get("showAreaFill")&&this.drawFill.apply(this,this._getClosingPoints());this.get("showLines")&&
this.drawLines();this.get("showMarkers")&&this.drawPlots()},_toggleVisible:function(a){var b,c,d,e;this.get("showAreaFill")&&this._path&&this._path.set("visible",a);this.get("showLines")&&this._lineGraphic&&this._lineGraphic.set("visible",a);if(this.get("showMarkers")&&(b=this.get("markers"))){e=0;for(d=b.length;e<d;++e)(c=b[e])&&c.set("visible",a)}},_getDefaultStyles:function(){var a=f.ComboSeries.superclass._getDefaultStyles();a.line=this._getLineDefaults();a.marker=this._getPlotDefaults();a.area=
this._getAreaDefaults();return a}},{ATTRS:{type:{value:"combo"},showAreaFill:{value:!1},showLines:{value:!0},showMarkers:{value:!0},marker:{lazyAdd:!1,getter:function(){return this.get("styles").marker},setter:function(a){this.set("styles",{marker:a})}},line:{lazyAdd:!1,getter:function(){return this.get("styles").line},setter:function(a){this.set("styles",{line:a})}},area:{lazyAdd:!1,getter:function(){return this.get("styles").area},setter:function(a){this.set("styles",{area:a})}}}});f.StackedComboSeries=
f.Base.create("stackedComboSeries",f.ComboSeries,[f.StackingUtil],{setAreaData:function(){f.StackedComboSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this)},drawSeries:function(){this.get("showAreaFill")&&this.drawFill.apply(this,this._getStackedClosingPoints());this.get("showLines")&&this.drawLines();this.get("showMarkers")&&this.drawPlots()}},{ATTRS:{type:{value:"stackedCombo"},showAreaFill:{value:!0}}});f.ComboSplineSeries=f.Base.create("comboSplineSeries",f.ComboSeries,
[f.CurveUtil],{drawSeries:function(){this.get("showAreaFill")&&this.drawAreaSpline();this.get("showLines")&&this.drawSpline();this.get("showMarkers")&&this.drawPlots()}},{ATTRS:{type:{value:"comboSpline"}}});f.StackedComboSplineSeries=f.Base.create("stackedComboSplineSeries",f.StackedComboSeries,[f.CurveUtil],{drawSeries:function(){this.get("showAreaFill")&&this.drawStackedAreaSpline();this.get("showLines")&&this.drawSpline();this.get("showMarkers")&&this.drawPlots()}},{ATTRS:{type:{value:"stackedComboSpline"},
showAreaFill:{value:!0}}});f.StackedLineSeries=f.Base.create("stackedLineSeries",f.LineSeries,[f.StackingUtil],{setAreaData:function(){f.StackedLineSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this)}},{ATTRS:{type:{value:"stackedLine"}}});f.StackedAreaSeries=f.Base.create("stackedAreaSeries",f.AreaSeries,[f.StackingUtil],{setAreaData:function(){f.StackedAreaSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this)},drawSeries:function(){this.drawFill.apply(this,
this._getStackedClosingPoints())}},{ATTRS:{type:{value:"stackedArea"}}});f.StackedColumnSeries=f.Base.create("stackedColumnSeries",f.ColumnSeries,[f.StackingUtil],{drawSeries:function(){if(!(1>this.get("xcoords").length)){var a=o.isNumber,b=f.clone(this.get("styles").marker),c=b.width,d=b.height,e=this.get("xcoords"),g=this.get("ycoords"),h=0,l=e.length,i=g[0],k=this.get("type"),j=this.get("graph").seriesTypes[k],h=this.get("order"),k=this.get("graphOrder"),m,n,w,r,q=0===h,i=l*c,p={width:[],height:[]},
v=[],u=[],s=this.get("groupMarkers");o.isArray(b.fill.color)&&(n=b.fill.color.concat());o.isArray(b.border.color)&&(w=b.border.color.concat());this._createMarkerCache();i>this.get("width")&&(i=this.width/i,c=Math.max(c*i,1));if(q)j=[],r=[];else if(h=j[h-1],j=h.get("negativeBaseValues"),r=h.get("positiveBaseValues"),!j||!r)q=!0,r=[],j=[];this.set("negativeBaseValues",j);this.set("positiveBaseValues",r);for(h=0;h<l;++h)(m=e[h],i=g[h],!a(i)||!a(m))?(q&&(j[h]=this._bottomOrigin,r[h]=this._bottomOrigin),
this._markers.push(null)):(q?(d=Math.abs(this._bottomOrigin-i),i<this._bottomOrigin?(r[h]=i,j[h]=this._bottomOrigin):i>this._bottomOrigin?(r[h]=this._bottomOrigin,j[h]=i,i-=d):(r[h]=i,j[h]=i)):i>this._bottomOrigin?(i+=j[h]-this._bottomOrigin,d=i-j[h],j[h]=i,i-=d):i<=this._bottomOrigin&&(i=r[h]-(this._bottomOrigin-i),d=r[h]-i,r[h]=i),!isNaN(d)&&0<d)?(m-=c/2,s)?(p.width[h]=c,p.height[h]=d,v.push(m),u.push(i)):(b.width=c,b.height=d,b.x=m,b.y=i,n&&(b.fill.color=n[h%n.length]),w&&(b.border.color=w[h%w.length]),
this.getMarker(b,k,h)):s||this._markers.push(null);s?this._createGroupMarker({fill:b.fill,border:b.border,dimensions:p,xvalues:v,yvalues:u,shape:b.shape}):this._clearMarkerCache()}},updateMarkerState:function(a,b){if(this._markers&&this._markers[b]){var c,d=this._getState(a),e=this.get("xcoords"),g=this._markers[b],h=0;c=this.get("styles").marker;h=0.5*c.width;c="off"==d||!c[d]?f.clone(c):f.clone(c[d]);c.height=g.get("height");c.x=e[b]-h;c.y=g.get("y");c.id=g.get("id");e=c.fill.color;h=c.border.color;
c.fill.color=o.isArray(e)?e[b%e.length]:this._getItemColor(c.fill.color,b);c.border.color=o.isArray(h)?h[b%h.length]:this._getItemColor(c.border.color,b);g.set(c)}},_getPlotDefaults:function(){var a={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};a.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");a.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return a}},
{ATTRS:{type:{value:"stackedColumn"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}});f.StackedBarSeries=f.Base.create("stackedBarSeries",f.BarSeries,[f.StackingUtil],{drawSeries:function(){if(!(1>this.get("xcoords").length)){var a=o.isNumber,b=f.clone(this.get("styles").marker),c=b.width,d=b.height,e=this.get("xcoords"),g=this.get("ycoords"),h=0,l=e.length,i=g[0],k=this.get("type"),j=this.get("graph").seriesTypes[k],h=this.get("order"),k=this.get("graphOrder"),m,n,w,r,q=0===h,i=
l*d,p={width:[],height:[]},v=[],u=[],s=this.get("groupMarkers");o.isArray(b.fill.color)&&(w=b.fill.color.concat());o.isArray(b.border.color)&&(r=b.border.color.concat());this._createMarkerCache();i>this.get("height")&&(i=this.height/i,d=Math.max(d*i,1));if(q)j=[],n=[];else if(h=j[h-1],j=h.get("negativeBaseValues"),n=h.get("positiveBaseValues"),!j||!n)q=!0,n=[],j=[];this.set("negativeBaseValues",j);this.set("positiveBaseValues",n);for(h=0;h<l;++h)(i=g[h],m=e[h],!a(i)||!a(m))?(q&&(n[h]=this._leftOrigin,
j[h]=this._leftOrigin),this._markers.push(null)):(q?(c=Math.abs(m-this._leftOrigin),m>this._leftOrigin?(n[h]=m,j[h]=this._leftOrigin,m-=c):m<this._leftOrigin?(n[h]=this._leftOrigin,j[h]=m):(n[h]=m,j[h]=this._leftOrigin)):m<this._leftOrigin?(m=j[h]-(this._leftOrigin-e[h]),c=j[h]-m,j[h]=m):m>=this._leftOrigin&&(m+=n[h]-this._leftOrigin,c=m-n[h],n[h]=m,m-=c),!isNaN(c)&&0<c)?(i-=d/2,s)?(p.width[h]=c,p.height[h]=d,v.push(m),u.push(i)):(b.width=c,b.height=d,b.x=m,b.y=i,w&&(b.fill.color=w[h%w.length]),r&&
(b.border.color=r[h%r.length]),this.getMarker(b,k,h)):s||this._markers.push(null);s?this._createGroupMarker({fill:b.fill,border:b.border,dimensions:p,xvalues:v,yvalues:u,shape:b.shape}):this._clearMarkerCache()}},updateMarkerState:function(a,b){if(this._markers[b]){var c=this._getState(a),d=this.get("ycoords"),e=this._markers[b],g=this.get("styles").marker,h=g.height,c="off"==c||!g[c]?f.clone(g):f.clone(g[c]);c.y=d[b]-h/2;c.x=e.get("x");c.width=e.get("width");c.id=e.get("id");d=c.fill.color;h=c.border.color;
c.fill.color=o.isArray(d)?d[b%d.length]:this._getItemColor(c.fill.color,b);c.border.color=o.isArray(h)?h[b%h.length]:this._getItemColor(c.border.color,b);e.set(c)}},_getPlotDefaults:function(){var a={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};a.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");a.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return a}},
{ATTRS:{type:{value:"stackedBar"},direction:{value:"vertical"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}});f.PieSeries=f.Base.create("pieSeries",f.MarkerSeries,[],{_map:null,_image:null,_setMap:function(){var a="pieHotSpotMapi_"+Math.round(1E5*Math.random()),b=this.get("graph").get("contentBox"),c;if(this._image){for(b.removeChild(this._image);this._areaNodes&&0<this._areaNodes.length;)c=this._areaNodes.shift(),this._map.removeChild(c);b.removeChild(this._map)}this._image=p.createElement("img");
this._image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAABCAYAAAD9yd/wAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABJJREFUeNpiZGBgSGPAAgACDAAIkABoFyloZQAAAABJRU5ErkJggg==";b.appendChild(this._image);this._image.setAttribute("usemap","#"+a);this._image.style.zIndex=3;this._image.style.opacity=0;this._image.setAttribute("alt","imagemap");this._map=p.createElement("map");this._map.style.zIndex=5;b.appendChild(this._map);this._map.setAttribute("name",a);this._map.setAttribute("id",
a);this._areaNodes=[]},_categoryDisplayName:null,_valueDisplayName:null,addListeners:function(){var a=this.get("categoryAxis"),b=this.get("valueAxis");a&&(a.after("dataReady",f.bind(this._categoryDataChangeHandler,this)),a.after("dataUpdate",f.bind(this._categoryDataChangeHandler,this)));b&&(b.after("dataReady",f.bind(this._valueDataChangeHandler,this)),b.after("dataUpdate",f.bind(this._valueDataChangeHandler,this)));this.after("categoryAxisChange",this.categoryAxisChangeHandler);this.after("valueAxisChange",
this.valueAxisChangeHandler);this.after("stylesChange",this._updateHandler)},validate:function(){this.draw();this._renderered=!0},_categoryAxisChangeHandler:function(){var a=this.get("categoryAxis");a.after("dataReady",f.bind(this._categoryDataChangeHandler,this));a.after("dataUpdate",f.bind(this._categoryDataChangeHandler,this))},_valueAxisChangeHandler:function(){var a=this.get("valueAxis");a.after("dataReady",f.bind(this._valueDataChangeHandler,this));a.after("dataUpdate",f.bind(this._valueDataChangeHandler,
this))},GUID:"pieseries",_categoryDataChangeHandler:function(){this._rendered&&this.get("categoryKey")&&this.get("valueKey")&&this.draw()},_valueDataChangeHandler:function(){this._rendered&&this.get("categoryKey")&&this.get("valueKey")&&this.draw()},draw:function(){var a=this.get("graph"),b=a.get("width"),a=a.get("height");isFinite(b)&&isFinite(a)&&0<b&&0<a&&(this._rendered=!0,this._drawing?this._callLater=!0:(this._drawing=!0,this._callLater=!1,this.drawSeries(),this._drawing=!1,this._callLater?
this.draw():this.fire("drawingComplete")))},drawPlots:function(){var a=this.get("valueAxis").getDataByKey(this.get("valueKey")).concat();this.get("categoryAxis").getDataByKey(this.get("categoryKey")).concat();var b=0,c=a.length,d=this.get("styles").marker,e=d.fill.colors,g=d.fill.alphas||["1"],h=d.border.colors,l=[d.border.weight],i=[d.border.alpha],k=l.concat(),j=h.concat(),m=i.concat(),n,o;n=d.padding;d=this.get("graph");o=Math.min(d.get("width"),d.get("height"));var d=o-(n.left+n.right),r=o-(n.top+
n.bottom),q=-90,p=d/2,v=r/2,u=Math.min(p,v),s=0,t;t=0;for(var x,y,C,A=this.get("graphOrder"),z="canvasGraphic"==f.Graphic.NAME;s<c;++s)t=parseFloat(a[s]),a.push(t),isNaN(t)||(b+=t);n=e?e.concat():null;o=g?g.concat():null;this._createMarkerCache();z&&(this._setMap(),this._image.width=d,this._image.height=r);for(s=0;s<c;s++)t=a[s],t=0===b?360/a.length:360*(t/b),t=Math.round(t),n&&1>n.length&&(n=e.concat()),o&&1>o.length&&(o=g.concat()),k&&1>k.length&&(k=l.concat()),k&&1>j.length&&(j=h.concat()),m&&
1>m.length&&(m=i.concat()),C=k?k.shift():null,x=j?j.shift():null,y=m?m.shift():null,q+=t,t={border:{color:x,weight:C,alpha:y},fill:{color:n?n.shift():this._getDefaultColor(s,"slice"),alpha:o?o.shift():null},type:"pieslice",arc:t,radius:u,startAngle:q,cx:p,cy:v,width:d,height:r},this.getMarker(t,A,s),z&&this._addHotspot(t,A,s);this._clearMarkerCache()},_addHotspot:function(a,b,c){for(var d=p.createElement("area"),e=1,f=a.cx,h=a.cy,l=a.arc,i=a.startAngle-l,k=a.startAngle,a=a.radius,e=f+Math.cos(i/180*
Math.PI)*a,j=h+Math.sin(i/180*Math.PI)*a,m=f+Math.cos(k/180*Math.PI)*a,k=h+Math.sin(k/180*Math.PI)*a,n=Math.floor(l/10)-1,l=l/Math.floor(l/10)/180*Math.PI,o=Math.atan((j-h)/(e-f)),j=f+", "+h+", "+e+", "+j,r,e=1;e<=n;++e)r=l*e,Math.cos(o+r),Math.sin(o+r),90>=i?(j+=", "+(f+a*Math.cos(o+l*e)),j+=", "+(h+a*Math.sin(o+l*e))):(j+=", "+(f-a*Math.cos(o+l*e)),j+=", "+(h-a*Math.sin(o+l*e)));j=j+(", "+m+", "+k)+(", "+f+", "+h);this._map.appendChild(d);d.setAttribute("class",Q);d.setAttribute("id","hotSpot_"+
b+"_"+c);d.setAttribute("shape","polygon");d.setAttribute("coords",j);this._areaNodes.push(d)},updateMarkerState:function(a,b){if(this._markers[b]){var c=this._getState(a),d=this._markers[b],e=this.get("styles").marker,c=this._mergeStyles("off"==c||!e[c]?e:e[c],{});c.fill.color=c.fill.colors[b%c.fill.colors.length];c.fill.alpha=c.fill.alphas[b%c.fill.alphas.length];d.set(c)}},_createMarker:function(a){var b=this.get("graphic"),a=f.clone(a);b.set("autoDraw",!1);b=b.addShape(a);b.addClass(Q);return b},
_clearMarkerCache:function(){for(var a=this._markerCache.length,b=0,c;b<a;++b)(c=this._markerCache[b])&&c.destroy();this._markerCache=[]},_getPlotDefaults:function(){var a={padding:{top:0,left:0,right:0,bottom:0},fill:{alphas:["1"]},border:{weight:0,alpha:1}};a.fill.colors=this._defaultSliceColors;a.border.colors=this._defaultBorderColors;return a},_defaultLineColors:"#426ab3,#d09b2c,#000000,#b82837,#b384b5,#ff7200,#779de3,#cbc8ba,#7ed7a6,#007a6c".split(","),_defaultFillColors:"#6084d0,#eeb647,#6c6b5f,#d6484f,#ce9ed1,#ff9f3b,#93b7ff,#e0ddd0,#94ecba,#309687".split(","),
_defaultBorderColors:"#205096,#b38206,#000000,#94001e,#9d6fa0,#e55b00,#5e85c9,#adab9e,#6ac291,#006457".split(","),_defaultSliceColors:"#66007f,#a86f41,#295454,#996ab2,#e8cdb7,#90bdbd,#000000,#c3b8ca,#968373,#678585".split(","),_getDefaultColor:function(a,b){var c={line:this._defaultLineColors,fill:this._defaultFillColors,border:this._defaultBorderColors,slice:this._defaultSliceColors},d=c[b].length,a=a||0;a>=d&&(a%=d);return c[b||"fill"][a]}},{ATTRS:{type:{value:"pie"},order:{},graph:{},categoryAxis:{value:null,
validator:function(a){return a!==this.get("categoryAxis")}},valueAxis:{value:null,validator:function(a){return a!==this.get("valueAxis")}},categoryKey:{value:null,validator:function(a){return a!==this.get("categoryKey")}},valueKey:{value:null,validator:function(a){return a!==this.get("valueKey")}},categoryDisplayName:{setter:function(a){return this._categoryDisplayName=a},getter:function(){return this._categoryDisplayName||this.get("categoryKey")}},valueDisplayName:{setter:function(a){return this._valueDisplayName=
a},getter:function(){return this._valueDisplayName||this.get("valueKey")}},slices:null}});f.Gridlines=f.Base.create("gridlines",f.Base,[f.Renderer],{_path:null,remove:function(){var a=this._path;a&&a.destroy()},draw:function(){this.get("axis")&&this.get("graph")&&this._drawGridlines()},_drawGridlines:function(){var a,b=this.get("axis"),c=b.get("position"),d=0,e=this.get("direction");a=this.get("graph");var f=a.get("width"),h=a.get("height"),l=this.get("styles").line,i=l.color,k=l.weight,l=l.alpha,
e="vertical"==e?this._verticalLine:this._horizontalLine;if(isFinite(f)&&isFinite(h)&&0<f&&0<h){if("none"!=c&&b&&b.get("tickPoints"))c=b.get("tickPoints"),b=c.length;else{c=[];for(b=b.get("styles").majorUnit.count;d<b;++d)c[d]={x:f*(d/(b-1)),y:h*(d/(b-1))};d=0}a=a.get("gridlines");a.set("width",f);a.set("height",h);for(a.set("stroke",{weight:k,color:i,opacity:l});d<b;++d)e(a,c[d],f,h);a.end()}},_horizontalLine:function(a,b,c){a.moveTo(0,b.y);a.lineTo(c,b.y)},_verticalLine:function(a,b,c,d){a.moveTo(b.x,
0);a.lineTo(b.x,d)},_getDefaultStyles:function(){return{line:{color:"#f0efe9",weight:1,alpha:1}}}},{ATTRS:{direction:{},axis:{},graph:{}}});f.Graph=f.Base.create("graph",f.Widget,[f.Renderer],{bindUI:function(){this.get("boundingBox").setStyle("position","absolute");this.after("widthChange",this._sizeChangeHandler);this.after("heightChange",this._sizeChangeHandler);this.after("stylesChange",this._updateStyles)},syncUI:function(){var a,b,c=this.get("seriesCollection"),d=0,e=c.length,g=this.get("horizontalGridlines"),
h=this.get("verticalGridlines");this.get("showBackground")&&(a=this.get("background"),this.get("contentBox"),b=this.get("styles").background,b.stroke=b.border,b.stroke.opacity=b.stroke.alpha,b.fill.opacity=b.fill.alpha,b.width=this.get("width"),b.height=this.get("height"),b.type=b.shape,a.set(b));for(;d<e;++d)a=c[d],a instanceof f.CartesianSeries&&a.render();g&&g instanceof f.Gridlines&&g.draw();h&&h instanceof f.Gridlines&&h.draw()},seriesTypes:null,getSeriesByIndex:function(a){var b=this.get("seriesCollection"),
c;b&&b.length>a&&(c=b[a]);return c},getSeriesByKey:function(a){var b=this._seriesDictionary,c;b&&b.hasOwnProperty(a)&&(c=b[a]);return c},addDispatcher:function(a){this._dispatchers||(this._dispatchers=[]);this._dispatchers.push(a)},_seriesCollection:null,_seriesDictionary:null,_parseSeriesCollection:function(a){if(a){var b=a.length,c=0,d;this.get("seriesCollection")||(this._seriesCollection=[]);this._seriesDictionary||(this._seriesDictionary={});this.seriesTypes||(this.seriesTypes=[]);for(;c<b;++c)d=
a[c],!(d instanceof f.CartesianSeries)&&!(d instanceof f.PieSeries)?this._createSeries(d):this._addSeries(d);b=this.get("seriesCollection").length;for(c=0;c<b;++c)d=this.get("seriesCollection")[c],a="horizontal"==d.get("direction")?"yKey":"xKey",this._seriesDictionary[d.get(a)]=d}},_addSeries:function(a){var b=a.get("type"),c=this.get("seriesCollection"),d=c.length,e=this.seriesTypes;a.get("graph")||a.set("graph",this);c.push(a);e.hasOwnProperty(b)||(this.seriesTypes[b]=[]);b=this.seriesTypes[b];
a.set("graphOrder",d);a.set("order",b.length);b.push(a);this.addDispatcher(a);a.after("drawingComplete",f.bind(this._drawingCompleteHandler,this));this.fire("seriesAdded",a)},_createSeries:function(a){var b=a.type,c=this.get("seriesCollection"),d=this.seriesTypes;a.graph=this;d.hasOwnProperty(b)||(d[b]=[]);b=d[b];a.graph=this;a.order=b.length;a.graphOrder=c.length;a=new (this._getSeries(a.type))(a);this.addDispatcher(a);a.after("drawingComplete",f.bind(this._drawingCompleteHandler,this));b.push(a);
c.push(a)},_seriesMap:{line:f.LineSeries,column:f.ColumnSeries,bar:f.BarSeries,area:f.AreaSeries,candlestick:f.CandlestickSeries,ohlc:f.OHLCSeries,stackedarea:f.StackedAreaSeries,stackedline:f.StackedLineSeries,stackedcolumn:f.StackedColumnSeries,stackedbar:f.StackedBarSeries,markerseries:f.MarkerSeries,spline:f.SplineSeries,areaspline:f.AreaSplineSeries,stackedspline:f.StackedSplineSeries,stackedareaspline:f.StackedAreaSplineSeries,stackedmarkerseries:f.StackedMarkerSeries,pie:f.PieSeries,combo:f.ComboSeries,
stackedcombo:f.StackedComboSeries,combospline:f.ComboSplineSeries,stackedcombospline:f.StackedComboSplineSeries},_getSeries:function(a){return o.isString(a)?this._seriesMap[a]:a},_markerEventHandler:function(a){var b=a.type,a=a.currentTarget.getAttribute("id").split("_");this.getSeriesByIndex(a[1]).updateMarkerState(b,a[2])},_dispatchers:null,_updateStyles:function(){var a=this.get("styles").background,b=a.border;b.opacity=b.alpha;a.stroke=b;a.fill.opacity=a.fill.alpha;this.get("background").set(a);
this._sizeChangeHandler()},_sizeChangeHandler:function(){var a=this.get("horizontalGridlines"),b=this.get("verticalGridlines"),c=this.get("width"),d=this.get("height");this.get("styles");var e;this.get("showBackground")&&(e=this.get("background"),c&&d&&(e.set("width",c),e.set("height",d)));this._gridlines&&this._gridlines.clear();a&&a instanceof f.Gridlines&&a.draw();b&&b instanceof f.Gridlines&&b.draw();this._drawSeries()},_drawSeries:function(){if(this._drawing)this._callLater=!0;else{var a,b,c;
this.get("graphic").set("autoDraw",!1);this._callLater=!1;this._drawing=!0;a=this.get("seriesCollection");b=0;for(c=a.length;b<c;++b)if(a[b].draw(),(!a[b].get("xcoords")||!a[b].get("ycoords"))&&!a[b]instanceof f.PieSeries){this._callLater=!0;break}this._drawing=!1;this._callLater&&this._drawSeries()}},_drawingCompleteHandler:function(a){a=f.Array.indexOf(this._dispatchers,a.currentTarget);-1<a&&this._dispatchers.splice(a,1);1>this._dispatchers.length&&(a=this.get("graphic"),a.get("autoDraw")||a._redraw(),
this.fire("chartRendered"))},_getDefaultStyles:function(){return{background:{shape:"rect",fill:{color:"#faf9f2"},border:{color:"#dad8c9",weight:1}}}},destructor:function(){this._graphic&&this._graphic.destroy();this._background&&this._background.get("graphic").destroy();this._gridlines&&this._gridlines.get("graphic").destroy()}},{ATTRS:{x:{setter:function(a){this.get("boundingBox").setStyle("left",a+"px");return a}},y:{setter:function(a){this.get("boundingBox").setStyle("top",a+"px");return a}},chart:{},
seriesCollection:{getter:function(){return this._seriesCollection},setter:function(a){this._parseSeriesCollection(a);return this._seriesCollection}},showBackground:{value:!0},seriesDictionary:{readOnly:!0,getter:function(){return this._seriesDictionary}},horizontalGridlines:{value:null,setter:function(a){var b=this.get("horizontalGridlines");b&&b instanceof f.Gridlines&&b.remove();if(a instanceof f.Gridlines)return a.set("graph",this),a;if(a&&a.axis)return b=new f.Gridlines({direction:"horizontal",
axis:a.axis,graph:this,styles:a.styles})}},verticalGridlines:{value:null,setter:function(a){var b=this.get("verticalGridlines");b&&b instanceof f.Gridlines&&b.remove();if(a instanceof f.Gridlines)return a.set("graph",this),a;if(a&&a.axis)return b=new f.Gridlines({direction:"vertical",axis:a.axis,graph:this,styles:a.styles})}},background:{getter:function(){this._background||(this._backgroundGraphic=new f.Graphic({render:this.get("contentBox")}),this._backgroundGraphic.get("node").style.zIndex=0,this._background=
this._backgroundGraphic.addShape({type:"rect"}));return this._background}},gridlines:{readOnly:!0,getter:function(){this._gridlines||(this._gridlinesGraphic=new f.Graphic({render:this.get("contentBox")}),this._gridlinesGraphic.get("node").style.zIndex=1,this._gridlines=this._gridlinesGraphic.addShape({type:"path"}));return this._gridlines}},graphic:{readOnly:!0,getter:function(){this._graphic||(this._graphic=new f.Graphic({render:this.get("contentBox")}),this._graphic.get("node").style.zIndex=2,this._graphic.set("autoDraw",
!1));return this._graphic}},groupMarkers:{value:!1}}});U.ATTRS={ariaLabel:{value:"Chart Application",setter:function(a){var b=this.get("contentBox");b&&b.setAttribute("aria-label",a);return a}},ariaDescription:{value:"Use the up and down keys to navigate between series. Use the left and right keys to navigate through items in a series.",setter:function(a){this._description&&(this._description.setContent(""),this._description.appendChild(p.createTextNode(a)));return a}},tooltip:{valueFn:"_getTooltip",
setter:function(a){return this._updateTooltip(a)}},categoryKey:{value:"category"},categoryType:{value:"category"},interactionType:{value:"marker"},dataProvider:{setter:function(a){return this._setDataValues(a)}},seriesKeys:{},axesCollection:{},graph:{valueFn:"_getGraph"},groupMarkers:{value:!1,setter:function(a){this.get("graph")&&this.get("graph").set("groupMarkers",a);return a}}};U.prototype={_itemRendered:function(a){this._itemRenderQueue=this._itemRenderQueue.splice(1+f.Array.indexOf(this._itemRenderQueue,
a.currentTarget),1);1>this._itemRenderQueue.length&&this._redraw()},_getGraph:function(){var a=new f.Graph({chart:this,groupMarkers:this.get("groupMarkers")});a.after("chartRendered",f.bind(function(){this.fire("chartRendered")},this));return a},getSeries:function(a){var b=null,c=this.get("graph");c&&(b=o.isNumber(a)?c.getSeriesByIndex(a):c.getSeriesByKey(a));return b},getAxisByKey:function(a){var b,c=this.get("axes");c&&c.hasOwnProperty(a)&&(b=c[a]);return b},getCategoryAxis:function(){var a,b=this.get("categoryKey"),
c=this.get("axes");c.hasOwnProperty(b)&&(a=c[b]);return a},_direction:"horizontal",_dataProvider:null,_setDataValues:function(a){if(o.isArray(a[0])){for(var b,c=[],d=a[0],e=0,f=d.length,h,l=a.length;e<f;++e){b={category:d[e]};for(h=1;h<l;++h)b["series"+h]=a[h][e];c[e]=b}return c}return a},_seriesCollection:null,_setSeriesCollection:function(a){this._seriesCollection=a},_getAxisClass:function(a){return this._axisClass[a]},_axisClass:{stacked:f.StackedAxis,numeric:f.NumericAxis,category:f.CategoryAxis,
time:f.TimeAxis},_axes:null,initializer:function(){this._itemRenderQueue=[];this._itemIndex=this._seriesIndex=-1;this.after("dataProviderChange",this._dataProviderChangeHandler)},renderUI:function(){var a=this.get("tooltip"),b=this.get("boundingBox"),c=this.get("contentBox");b.setStyle("position","absolute");c.setStyle("position","absolute");this._addAxes();this._addSeries();a&&a.show&&this._addTooltip();this._setAriaElements(b,c)},_setAriaElements:function(a,b){var c=this._getAriaOffscreenNode(),
d=this.get("id")+"_description",e=this._getAriaOffscreenNode();b.set("tabIndex",0);b.set("role","img");b.setAttribute("aria-label",this.get("ariaLabel"));b.setAttribute("aria-describedby",d);c.set("id",d);c.set("tabIndex",-1);c.appendChild(p.createTextNode(this.get("ariaDescription")));e.set("id","live-region");e.set("aria-live","polite");e.set("aria-atomic","true");e.set("role","status");a.setAttribute("role","application");a.appendChild(c);a.appendChild(e);this._description=c;this._liveRegion=e},
_getAriaOffscreenNode:function(){var a=f.Node.create("<div></div>"),b=f.UA.ie,b=b&&8>b?"rect(1px 1px 1px 1px)":"rect(1px, 1px, 1px, 1px)";a.setStyle("position","absolute");a.setStyle("height","1px");a.setStyle("width","1px");a.setStyle("overflow","hidden");a.setStyle("clip",b);return a},syncUI:function(){this._redraw()},bindUI:function(){this.after("tooltipChange",f.bind(this._tooltipChangeHandler,this));this.after("widthChange",this._sizeChanged);this.after("heightChange",this._sizeChanged);var a=
this.get("tooltip"),b="mouseout",c="mouseover",d=this.get("contentBox"),e=this.get("interactionType"),g=0,h="."+Q,l=Y&&"ontouchstart"in Y&&!(f.UA.chrome&&6>f.UA.chrome);f.on("keydown",f.bind(function(a){var b=parseFloat(a.keyCode);36<b&&41>b&&(a.halt(),a=this._getAriaMessage(b),this._liveRegion.setContent(""),this._liveRegion.appendChild(p.createTextNode(a)))},this),this.get("contentBox"));if("marker"==e)b=a.hideEvent,c=a.showEvent,l?(f.delegate("touchend",f.bind(this._markerEventDispatcher,this),
d,h),f.on("touchend",f.bind(function(a){a.halt(!0);this._activeMarker&&(this._activeMarker=null,this.hideTooltip(a))},this))):(f.delegate("mouseenter",f.bind(this._markerEventDispatcher,this),d,h),f.delegate("mousedown",f.bind(this._markerEventDispatcher,this),d,h),f.delegate("mouseup",f.bind(this._markerEventDispatcher,this),d,h),f.delegate("mouseleave",f.bind(this._markerEventDispatcher,this),d,h),f.delegate("click",f.bind(this._markerEventDispatcher,this),d,h),f.delegate("mousemove",f.bind(this._positionTooltip,
this),d,h));else if("planar"==e)if(l)this._overlay.on("touchend",f.bind(this._planarEventDispatcher,this));else this._overlay.on("mousemove",f.bind(this._planarEventDispatcher,this)),this.on("mouseout",this.hideTooltip);if(a)if(this.on("markerEvent:touchend",f.bind(function(b){var c=b.series.get("markers")[b.index];this._activeMarker&&c===this._activeMarker?(this._activeMarker=null,this.hideTooltip(b)):(this._activeMarker=c,a.markerEventHandler.apply(this,[b]))},this)),b&&c&&b==c)this.on(e+"Event:"+
b,this.toggleTooltip);else{if(c)this.on(e+"Event:"+c,a[e+"EventHandler"]);if(b){if(o.isArray(b))for(c=b.length;g<c;++g)this.on(e+"Event:"+b[g],this.hideTooltip);this.on(e+"Event:"+b,this.hideTooltip)}}},_markerEventDispatcher:function(a){var b=a.type,c=this.get("contentBox"),d=a.currentTarget,e=d.getAttribute("id").split("_"),f=e.pop(),e=e.pop(),h=this.getSeries(parseInt(e,10)),l=this.getSeriesItems(h,f),i=a&&a.hasOwnProperty("changedTouches"),k=i?a.changedTouches[0].pageX:a.pageX,i=i?a.changedTouches[0].pageY:
a.pageY,j=k-c.getX(),c=i-c.getY();"mouseenter"==b?b="mouseover":"mouseleave"==b&&(b="mouseout");h.updateMarkerState(b,f);a.halt();this.fire("markerEvent:"+b,{originEvent:a,pageX:k,pageY:i,categoryItem:l.category,valueItem:l.value,node:d,x:j,y:c,series:h,index:f,seriesIndex:e})},_dataProviderChangeHandler:function(){var a=this.get("dataProvider"),b=this.get("axes"),c,d;this._itemIndex=this._seriesIndex=-1;if(b)for(c in b)b.hasOwnProperty(c)&&(d=b[c],d instanceof f.Axis&&("none"!=d.get("position")&&
this._addToAxesRenderQueue(d),d.set("dataProvider",a)))},toggleTooltip:function(a){var b=this.get("tooltip");b.visible?this.hideTooltip():b.markerEventHandler.apply(this,[a])},_showTooltip:function(a,b,c){var d=this.get("tooltip"),e=d.node;a&&(d.visible=!0,d.setTextFunction(e,a),e.setStyle("top",c+"px"),e.setStyle("left",b+"px"),e.setStyle("visibility","visible"))},_positionTooltip:function(a){var b=this.get("tooltip").node,c=this.get("contentBox"),d=a.pageX+10-c.getX(),a=a.pageY+10-c.getY();b&&(b.setStyle("left",
d+"px"),b.setStyle("top",a+"px"))},hideTooltip:function(){var a=this.get("tooltip"),b=a.node;a.visible=!1;b.set("innerHTML","");b.setStyle("left",-1E4);b.setStyle("top",-1E4);b.setStyle("visibility","hidden")},_addTooltip:function(){var a=this.get("tooltip"),b=this.get("id")+"_tooltip",c=this.get("contentBox"),d=p.getElementById(b);d&&c.removeChild(d);a.node.set("id",b);a.node.setStyle("visibility","hidden");c.appendChild(a.node)},_updateTooltip:function(a){var b=this._tooltip,c,d,e,g={markerLabelFunction:"markerLabelFunction",
planarLabelFunction:"planarLabelFunction",setTextFunction:"setTextFunction",showEvent:"showEvent",hideEvent:"hideEvent",markerEventHandler:"markerEventHandler",planarEventHandler:"planarEventHandler",show:"show"};if(o.isObject(a)){d=a.styles;e=f.one(a.node)||b.node;if(d)for(c in d)d.hasOwnProperty(c)&&e.setStyle(c,d[c]);for(c in g)a.hasOwnProperty(c)&&(b[c]=a[c]);b.node=e}return b},_getTooltip:function(){var a=p.createElement("div"),b={setTextFunction:this._setText,markerLabelFunction:this._tooltipLabelFunction,
planarLabelFunction:this._planarLabelFunction,show:!0,hideEvent:"mouseout",showEvent:"mouseover",markerEventHandler:function(a){this._showTooltip(this.get("tooltip").markerLabelFunction.apply(this,[a.categoryItem,a.valueItem,a.index,a.series,a.seriesIndex]),a.x+10,a.y+10)},planarEventHandler:function(a){var b=this.get("tooltip"),e=this.get("categoryAxis");this._showTooltip(b.planarLabelFunction.apply(this,[e,a.valueItem,a.index,a.items,a.seriesIndex]),a.x+10,a.y+10)}},a=f.one(a);a.set("id",this.get("id")+
"_tooltip");a.setStyle("fontSize","85%");a.setStyle("opacity","0.83");a.setStyle("position","absolute");a.setStyle("paddingTop","2px");a.setStyle("paddingRight","5px");a.setStyle("paddingBottom","4px");a.setStyle("paddingLeft","2px");a.setStyle("backgroundColor","#fff");a.setStyle("border","1px solid #dbdccc");a.setStyle("pointerEvents","none");a.setStyle("zIndex",3);a.setStyle("whiteSpace","noWrap");a.setStyle("visibility","hidden");b.node=f.one(a);return this._tooltip=b},_planarLabelFunction:function(a,
b,c,d){var e=p.createElement("div"),f=0,h=d.length,l;a&&(a=a.get("labelFunction").apply(this,[a.getKeyValueAt(this.get("categoryKey"),c),a.get("labelFormat")]),o.isObject(a)||(a=p.createTextNode(a)),e.appendChild(a));for(;f<h;++f)a=d[f],a.get("visible")&&(a=b[f],l=a.axis,l=l.get("labelFunction").apply(this,[l.getKeyValueAt(a.key,c),l.get("labelFormat")]),e.appendChild(p.createElement("br")),e.appendChild(p.createTextNode(a.displayName)),e.appendChild(p.createTextNode(": ")),o.isObject(l)||(l=p.createTextNode(l)),
e.appendChild(l));return e},_tooltipLabelFunction:function(a,b){var c=p.createElement("div"),d=a.axis.get("labelFunction").apply(this,[a.value,a.axis.get("labelFormat")]),e=b.axis.get("labelFunction").apply(this,[b.value,b.axis.get("labelFormat")]);c.appendChild(p.createTextNode(a.displayName));c.appendChild(p.createTextNode(": "));o.isObject(d)||(d=p.createTextNode(d));c.appendChild(d);c.appendChild(p.createElement("br"));c.appendChild(p.createTextNode(b.displayName));c.appendChild(p.createTextNode(": "));
o.isObject(e)||(e=p.createTextNode(e));c.appendChild(e);return c},_tooltipChangeHandler:function(){if(this.get("tooltip")){var a=this.get("tooltip"),b=a.node,a=a.show,c=this.get("contentBox");b&&a&&(c.contains(b)||this._addTooltip())}},_setText:function(a,b){a.setContent("");o.isNumber(b)?b+="":b||(b="");Z(b)&&(b=p.createTextNode(b));a.appendChild(b)}};f.ChartBase=U;f.CartesianChart=f.Base.create("cartesianChart",f.Widget,[f.ChartBase],{renderUI:function(){var a=this.get("boundingBox"),b=this.get("contentBox"),
c=this.get("tooltip"),d=$("overlay");a.setStyle("position","absolute");b.setStyle("position","absolute");this._addAxes();this._addGridlines();this._addSeries();c&&c.show&&this._addTooltip();this.get("styles");"planar"==this.get("interactionType")&&(c=p.createElement("div"),this.get("contentBox").appendChild(c),this._overlay=f.one(c),this._overlay.setStyle("position","absolute"),this._overlay.setStyle("background","#fff"),this._overlay.setStyle("opacity",0),this._overlay.addClass(d),this._overlay.setStyle("zIndex",
4));this._setAriaElements(a,b);this._redraw()},_planarEventDispatcher:function(a){var b=this.get("graph"),c=this.get("boundingBox"),d=b.get("contentBox"),e=a&&a.hasOwnProperty("changedTouches"),f=e?a.changedTouches[0].pageX:a.pageX,e=e?a.changedTouches[0].pageY:a.pageY,h=f-c.getX(),c=e-c.getY(),l={x:f-d.getX(),y:e-d.getY()},b=b.get("seriesCollection"),i,d=0,k,j=this._selectedIndex,m,n=[],o=[],p=[],q=this.get("direction"),B;a.halt(!0);"horizontal"==q?(m="x",q="y"):(q="x",m="y");B=l[m];if(b)for(l=b.length;d<
l&&!i;)b[d]&&(i=b[d].get(m+"MarkerPlane")),d++;if(i){l=i.length;for(d=0;d<l;++d)if(B<=i[d].end&&B>=i[d].start){k=d;break}l=b.length;for(d=0;d<l;++d)i=b[d],B=i.get(q+"coords"),(m=i.get("markers"))&&!isNaN(j)&&-1<j&&i.updateMarkerState("mouseout",j),B&&-1<B[k]&&(m&&!isNaN(k)&&-1<k&&i.updateMarkerState("mouseover",k),m=this.getSeriesItems(i,k),o.push(m.category),p.push(m.value),n.push(i));this._selectedIndex=k;-1<k?this.fire("planarEvent:mouseover",{categoryItem:o,valueItem:p,x:h,y:c,pageX:f,pageY:e,
items:n,index:k,originEvent:a}):this.fire("planarEvent:mouseout")}},_type:"combo",_itemRenderQueue:null,_addToAxesRenderQueue:function(a){this._itemRenderQueue||(this._itemRenderQueue=[]);0>f.Array.indexOf(this._itemRenderQueue,a)&&this._itemRenderQueue.push(a)},_addToAxesCollection:function(a,b){var c=this.get(a+"AxesCollection");c||(c=[],this.set(a+"AxesCollection",c));c.push(b)},_getDefaultSeriesCollection:function(){return this._parseSeriesCollection()},_parseSeriesCollection:function(a){var b=
this.get("direction"),c=a||[],d,e=[],g=this.get("seriesKeys").concat(),h,l,i,k=this.get("type"),j,m,n,o=this.get("categoryKey"),p=this.get("showMarkers"),q=this.get("showAreaFill"),B=this.get("showLines");"vertical"==b?(b="yAxis",m="yKey",d="xAxis",n="xKey"):(b="xAxis",m="xKey",d="yAxis",n="yKey");i=c.length;for(h=0;h<i;++h)if(j=this._getBaseAttribute(c[h],n))l=f.Array.indexOf(g,j),-1<l&&g.splice(l,1),e.push(j);0<g.length&&(e=e.concat(g));i=e.length;for(h=0;h<i;++h)if(e=c[h]||{type:k},e instanceof
f.CartesianSeries)this._parseSeriesAxes(e);else{e[m]=e[m]||o;e[n]=e[n]||g.shift();e[b]=this._getCategoryAxis();e[d]=this._getSeriesAxis(e[n]);e.type=e.type||k;if("combo"==e.type||"stackedcombo"==e.type||"combospline"==e.type||"stackedcombospline"==e.type)if(null!==q&&(e.showAreaFill=null!==e.showAreaFill&&void 0!==e.showAreaFill?e.showAreaFill:q),null!==p&&(e.showMarkers=null!==e.showMarkers&&void 0!==e.showMarkers?e.showMarkers:p),null!==B)e.showLines=null!==e.showLines&&void 0!==e.showLines?e.showLines:
B;c[h]=e}a&&(a=this.get("graph"),a.set("seriesCollection",c),c=a.get("seriesCollection"));return c},_parseSeriesAxes:function(a){var b=this.get("axes"),c=a.get("xAxis"),d=a.get("yAxis"),e=f.Axis;c&&!(c instanceof e)&&o.isString(c)&&b.hasOwnProperty(c)&&(c=b[c],c instanceof e&&a.set("xAxis",c));d&&!(d instanceof e)&&o.isString(d)&&b.hasOwnProperty(d)&&(c=b[d],c instanceof e&&a.set("yAxis",c))},_getCategoryAxis:function(){var a=this.get("axes"),b=this.get("categoryAxisName")||this.get("categoryKey");
return a[b]},_getSeriesAxis:function(a,b){var c=this.get("axes"),d,e,f;if(c)if(b&&c.hasOwnProperty(b))f=c[b];else for(d in c)if(c.hasOwnProperty(d)&&(e=c[d].get("keys"))&&e.hasOwnProperty(a)){f=c[d];break}return f},_getBaseAttribute:function(a,b){return a instanceof f.Base?a.get(b):a.hasOwnProperty(b)?a[b]:null},_setBaseAttribute:function(a,b,c){a instanceof f.Base?a.set(b,c):a[b]=c},_setAxes:function(a){var b=this._parseAxes(a),c={},d={edgeOffset:"edgeOffset",position:"position",overlapGraph:"overlapGraph",
labelFunction:"labelFunction",labelFunctionScope:"labelFunctionScope",labelFormat:"labelFormat",maximum:"maximum",minimum:"minimum",roundingMethod:"roundingMethod",alwaysShowZero:"alwaysShowZero",title:"title",width:"width",height:"height"},e=this.get("dataProvider"),g,h,l,i,k,j;for(h in b)if(b.hasOwnProperty(h)){k=b[h];if(k instanceof f.Axis)i=k;else{i=null;j={};j.dataProvider=k.dataProvider||e;j.keys=k.keys;k.hasOwnProperty("roundingUnit")&&(j.roundingUnit=k.roundingUnit);l=k.position;k.styles&&
(j.styles=k.styles);j.position=k.position;for(g in d)d.hasOwnProperty(g)&&k.hasOwnProperty(g)&&(j[g]=k[g]);a&&(i=this.getAxisByKey(h));i&&i instanceof f.Axis?(k=i.get("position"),l!=k&&("none"!=k&&(k=this.get(k+"AxesCollection"),k.splice(f.Array.indexOf(k,i),1)),"none"!=l&&this._addToAxesCollection(l,i)),i.setAttrs(j)):(i=this._getAxisClass(k.type),i=new i(j),i.after("axisRendered",f.bind(this._itemRendered,this)))}i&&((k=this.get(l+"AxesCollection"))&&0<f.Array.indexOf(k,i)&&i.set("overlapGraph",
!1),c[h]=i)}return c},_addAxes:function(){var a=this.get("axes"),b,c,d,e=this.get("width"),g=this.get("height"),h=f.Node.one(this._parentNode);this._axesCollection||(this._axesCollection=[]);for(b in a)if(a.hasOwnProperty(b)&&(c=a[b],c instanceof f.Axis))e||(this.set("width",h.get("offsetWidth")),e=this.get("width")),g||(this.set("height",h.get("offsetHeight")),g=this.get("height")),this._addToAxesRenderQueue(c),d=c.get("position"),this.get(d+"AxesCollection")?this.get(d+"AxesCollection").push(c):
this.set(d+"AxesCollection",[c]),this._axesCollection.push(c),c.get("keys").hasOwnProperty(this.get("categoryKey"))&&this.set("categoryAxis",c),c.render(this.get("contentBox"))},_addSeries:function(){var a=this.get("graph");this.get("seriesCollection");a.render(this.get("contentBox"))},_addGridlines:function(){var a=this.get("graph"),b=this.get("horizontalGridlines"),c=this.get("verticalGridlines"),d=this.get("direction"),e=this.get("leftAxesCollection"),g=this.get("rightAxesCollection"),h=this.get("bottomAxesCollection"),
l=this.get("topAxesCollection"),i,k=this.get("categoryAxis");this._axesCollection&&(i=this._axesCollection.concat(),i.splice(f.Array.indexOf(i,k),1));b&&(e=e&&e[0]?e[0]:g&&g[0]?g[0]:"horizontal"==d?k:i[0],!this._getBaseAttribute(b,"axis")&&e&&this._setBaseAttribute(b,"axis",e),this._getBaseAttribute(b,"axis")&&a.set("horizontalGridlines",b));c&&(b=h&&h[0]?h[0]:l&&l[0]?l[0]:"vertical"==d?k:i[0],!this._getBaseAttribute(c,"axis")&&b&&this._setBaseAttribute(c,"axis",b),this._getBaseAttribute(c,"axis")&&
a.set("verticalGridlines",c))},_getAllKeys:function(a){for(var b=0,c=a.length,d,e,f={};b<c;++b)for(e in d=a[b],d)d.hasOwnProperty(e)&&(f[e]=!0);return f},_getDefaultAxes:function(){return this._parseAxes()},_parseAxes:function(a){var b=this.get("categoryKey"),c,d,e,g={},h=[],l=this.get("categoryAxisName")||this.get("categoryKey"),i=this.get("valueAxisName"),k=this.get("seriesKeys")||[],j,m;m=this.get("dataProvider");var n=this.get("direction"),p,r=[],q=this.get("stacked")?"stacked":"numeric";"vertical"==
n?(n="bottom",p="left"):(n="left",p="bottom");if(a)for(j in a)if(a.hasOwnProperty(j))if(c=a[j],e=this._getBaseAttribute(c,"keys"),d=this._getBaseAttribute(c,"type"),"time"==d||"category"==d)l=j,this.set("categoryAxisName",j),o.isArray(e)&&0<e.length&&(b=e[0],this.set("categoryKey",b)),g[j]=c;else if(j==l)g[j]=c;else{g[j]=c;if(j!=i&&e&&o.isArray(e)){d=e.length;for(c=0;c<d;++c)h.push(e[c]);r.push(g[j])}this._getBaseAttribute(g[j],"type")||this._setBaseAttribute(g[j],"type",q);this._getBaseAttribute(g[j],
"position")||this._setBaseAttribute(g[j],"position",this._getDefaultAxisPosition(g[j],r,n))}if(1>k.length)for(j in a=this._getAllKeys(m),a)a.hasOwnProperty(j)&&j!=b&&-1==f.Array.indexOf(h,j)&&k.push(j);m=f.Array.indexOf(k,b);-1<m&&k.splice(m,1);a=h.length;for(j=0;j<a;++j)m=f.Array.indexOf(k,h[j]),-1<m&&k.splice(m,1);g.hasOwnProperty(l)||(g[l]={});this._getBaseAttribute(g[l],"keys")||this._setBaseAttribute(g[l],"keys",[b]);this._getBaseAttribute(g[l],"position")||this._setBaseAttribute(g[l],"position",
p);this._getBaseAttribute(g[l],"type")||this._setBaseAttribute(g[l],"type",this.get("categoryType"));!g.hasOwnProperty(i)&&k&&0<k.length&&(g[i]={keys:k},r.push(g[i]));0<h.length&&(k=0<k.length?h.concat(k):h);g.hasOwnProperty(i)&&(this._getBaseAttribute(g[i],"position")||this._setBaseAttribute(g[i],"position",this._getDefaultAxisPosition(g[i],r,n)),this._getBaseAttribute(g[i],"type")||this._setBaseAttribute(g[i],"type",q),this._getBaseAttribute(g[i],"keys")||this._setBaseAttribute(g[i],"keys",k));
this.set("seriesKeys",k);return g},_getDefaultAxisPosition:function(a,b,c){var d=this.get("direction"),a=f.Array.indexOf(b,a);b[a-1]&&b[a-1].position&&("horizontal"==d?"left"==b[a-1].position?c="right":"right"==b[a-1].position&&(c="left"):c="bottom"==b[a-1].position?"top":"bottom");return c},getSeriesItems:function(a,b){var c=a.get("xAxis"),d=a.get("yAxis"),e=a.get("xKey"),f=a.get("yKey");"vertical"==this.get("direction")?(d={axis:d,key:f,value:d.getKeyValueAt(f,b)},f={axis:c,key:e,value:c.getKeyValueAt(e,
b)}):(f={axis:d,key:f,value:d.getKeyValueAt(f,b)},d={axis:c,key:e,value:c.getKeyValueAt(e,b)});d.displayName=a.get("categoryDisplayName");f.displayName=a.get("valueDisplayName");d.value=d.axis.getKeyValueAt(d.key,b);f.value=f.axis.getKeyValueAt(f.key,b);return{category:d,value:f}},_sizeChanged:function(){if(this._axesCollection){for(var a=this._axesCollection,b=0,c=a.length;b<c;++b)this._addToAxesRenderQueue(a[b]);this._redraw()}},_getTopOverflow:function(a,b,c){var d=0,e,f=0,h;if(a)for(e=a.length;d<
e;++d)h=a[d],f=Math.max(f,Math.abs(h.getMaxLabelBounds().top)-0.5*h.getEdgeOffset(h.get("styles").majorTicks.count,c));if(b){d=0;for(e=b.length;d<e;++d)h=b[d],f=Math.max(f,Math.abs(h.getMaxLabelBounds().top)-0.5*h.getEdgeOffset(h.get("styles").majorTicks.count,c))}return f},_getRightOverflow:function(a,b,c){var d=0,e,f=0,h;if(a)for(e=a.length;d<e;++d)h=a[d],f=Math.max(f,h.getMaxLabelBounds().right-0.5*h.getEdgeOffset(h.get("styles").majorTicks.count,c));if(b){d=0;for(e=b.length;d<e;++d)h=b[d],f=Math.max(f,
h.getMaxLabelBounds().right-0.5*h.getEdgeOffset(h.get("styles").majorTicks.count,c))}return f},_getLeftOverflow:function(a,b,c){var d=0,e,f=0,h;if(a)for(e=a.length;d<e;++d)h=a[d],f=Math.max(f,Math.abs(h.getMinLabelBounds().left)-0.5*h.getEdgeOffset(h.get("styles").majorTicks.count,c));if(b){d=0;for(e=b.length;d<e;++d)h=b[d],f=Math.max(f,Math.abs(h.getMinLabelBounds().left)-0.5*h.getEdgeOffset(h.get("styles").majorTicks.count,c))}return f},_getBottomOverflow:function(a,b,c){var d=0,e,f=0,h;if(a)for(e=
a.length;d<e;++d)h=a[d],f=Math.max(f,h.getMinLabelBounds().bottom-0.5*h.getEdgeOffset(h.get("styles").majorTicks.count,c));if(b){d=0;for(e=b.length;d<e;++d)h=b[d],f=Math.max(f,h.getMinLabelBounds().bottom-0.5*h.getEdgeOffset(h.get("styles").majorTicks.count,c))}return f},_redraw:function(){if(this._drawing)this._callLater=!0;else{this._drawing=!0;this._callLater=!1;var a=this.get("width"),b=this.get("height"),c=0,d=0,e=0,f=0,h=this.get("leftAxesCollection"),l=this.get("rightAxesCollection"),i=this.get("topAxesCollection"),
k=this.get("bottomAxesCollection"),j=0,m,n,o="visible",p=this.get("graph"),q,B,v,u,s,t;q=this.get("allowContentOverflow");var x,y,C,A,z;if(h){y=[];m=h.length;for(j=m-1;-1<j;--j)y.unshift(c),c+=h[j].get("width")}if(l){x=[];m=l.length;for(j=m-1;-1<j;--j)d+=l[j].get("width"),x.unshift(a-d)}if(i){C=[];m=i.length;for(j=m-1;-1<j;--j)C.unshift(e),e+=i[j].get("height")}if(k){A=[];m=k.length;for(j=m-1;-1<j;--j)f+=k[j].get("height"),A.unshift(b-f)}s=c;t=e;u=b-f;z=a-d;if(!q){j=this._getTopOverflow(h,l);q=this._getBottomOverflow(h,
l);B=this._getLeftOverflow(k,i);v=this._getRightOverflow(k,i);e=j-e;if(0<e&&(t=j,C)){j=0;for(m=C.length;j<m;++j)C[j]+=e}e=q-f;if(0<e&&(u=b-q,A)){j=0;for(m=A.length;j<m;++j)A[j]-=e}e=B-c;if(0<e&&(s=B,y)){j=0;for(m=y.length;j<m;++j)y[j]+=e}e=v-d;if(0<e&&(z=a-v,x)){j=0;for(m=x.length;j<m;++j)x[j]-=e}}a=z-s;u-=t;if(i){m=i.length;for(j=0;j<m;j++)n=i[j],n.get("width")!==a&&n.set("width",a),n.get("boundingBox").setStyle("left",s+"px"),n.get("boundingBox").setStyle("top",C[j]+"px");n._hasDataOverflow()&&
(o="hidden")}if(k){m=k.length;for(j=0;j<m;j++)n=k[j],n.get("width")!==a&&n.set("width",a),n.get("boundingBox").setStyle("left",s+"px"),n.get("boundingBox").setStyle("top",A[j]+"px");n._hasDataOverflow()&&(o="hidden")}if(h){m=h.length;for(j=0;j<m;++j)n=h[j],n.get("boundingBox").setStyle("top",t+"px"),n.get("boundingBox").setStyle("left",y[j]+"px"),n.get("height")!==u&&n.set("height",u);n._hasDataOverflow()&&(o="hidden")}if(l){m=l.length;for(j=0;j<m;++j)n=l[j],n.get("boundingBox").setStyle("top",t+
"px"),n.get("boundingBox").setStyle("left",x[j]+"px"),n.get("height")!==u&&n.set("height",u);n._hasDataOverflow()&&(o="hidden")}this._drawing=!1;if(this._callLater)this._redraw();else if(p&&(p.get("boundingBox").setStyle("left",s+"px"),p.get("boundingBox").setStyle("top",t+"px"),p.set("width",a),p.set("height",u),p.get("boundingBox").setStyle("overflow",o)),this._overlay)this._overlay.setStyle("left",s+"px"),this._overlay.setStyle("top",t+"px"),this._overlay.setStyle("width",a+"px"),this._overlay.setStyle("height",
u+"px")}},destructor:function(){var a=this.get("graph"),b=0,c,d=this.get("seriesCollection"),e=this._axesCollection,g=this.get("tooltip").node;this._description&&(this._description.empty(),this._description.remove(!0));this._liveRegion&&(this._liveRegion.empty(),this._liveRegion.remove(!0));for(c=d?d.length:0;b<c;++b)d[b]instanceof f.CartesianSeries&&d[b].destroy(!0);c=e?e.length:0;for(b=0;b<c;++b)e[b]instanceof f.Axis&&e[b].destroy(!0);a&&a.destroy(!0);g&&(g.empty(),g.remove(!0));this._overlay&&
(this._overlay.empty(),this._overlay.remove(!0))},_getAriaMessage:function(a){var b="",c,d=this._seriesIndex,e=this._itemIndex,b=this.get("seriesCollection").length;0===a%2?(1<b?(38===a?d=1>d?b-1:d-1:40===a&&(d=d>=b-1?0:d+1),this._itemIndex=-1):d=0,this._seriesIndex=d,c=this.getSeries(parseInt(d,10)),b=c.get("valueDisplayName")+" series."):(-1<d?(b="",c=this.getSeries(parseInt(d,10))):(this._seriesIndex=d=0,c=this.getSeries(parseInt(d,10)),b=c.get("valueDisplayName")+" series."),d=c._dataLength?c._dataLength:
0,37===a?e=0<e?e-1:d-1:39===a&&(e=e>=d-1?0:e+1),this._itemIndex=e,c=this.getSeriesItems(c,e),a=c.category,c=c.value,a&&c&&a.value&&c.value?(b+=a.displayName+": "+a.axis.formatLabel.apply(this,[a.value,a.axis.get("labelFormat")])+", ",b+=c.displayName+": "+c.axis.formatLabel.apply(this,[c.value,c.axis.get("labelFormat")])+", "):b+="No data available.",b+=e+1+" of "+d+". ");return b}},{ATTRS:{allowContentOverflow:{value:!1},axesStyles:{getter:function(){var a=this.get("axes"),b,c=this._axesStyles;if(a)for(b in a)a.hasOwnProperty(b)&&
a[b]instanceof f.Axis&&(c||(c={}),c[b]=a[b].get("styles"));return c},setter:function(a){var b=this.get("axes"),c;for(c in a)a.hasOwnProperty(c)&&b.hasOwnProperty(c)&&this._setBaseAttribute(b[c],"styles",a[c])}},seriesStyles:{getter:function(){var a=this._seriesStyles,b=this.get("graph"),c;if(b&&(b=b.get("seriesDictionary")))for(c in a={},b)b.hasOwnProperty(c)&&(a[c]=b[c].get("styles"));return a},setter:function(a){var b,c,d;if(o.isArray(a)){d=this.get("seriesCollection");b=0;for(c=a.length;b<c;++b)this._setBaseAttribute(d[b],
"styles",a[b])}else for(b in a)a.hasOwnProperty(b)&&(d=this.getSeries(b),this._setBaseAttribute(d,"styles",a[b]))}},graphStyles:{getter:function(){var a=this.get("graph");return a?a.get("styles"):this._graphStyles},setter:function(a){this._setBaseAttribute(this.get("graph"),"styles",a)}},styles:{getter:function(){return{axes:this.get("axesStyles"),series:this.get("seriesStyles"),graph:this.get("graphStyles")}},setter:function(a){a.hasOwnProperty("axes")&&(this.get("axesStyles")?this.set("axesStyles",
a.axes):this._axesStyles=a.axes);a.hasOwnProperty("series")&&(this.get("seriesStyles")?this.set("seriesStyles",a.series):this._seriesStyles=a.series);a.hasOwnProperty("graph")&&this.set("graphStyles",a.graph)}},axes:{valueFn:"_getDefaultAxes",setter:function(a){return this._setAxes(a)}},seriesCollection:{valueFn:"_getDefaultSeriesCollection",setter:function(a){return this._parseSeriesCollection(a)}},leftAxesCollection:{},bottomAxesCollection:{},rightAxesCollection:{},topAxesCollection:{},stacked:{value:!1},
direction:{getter:function(){var a=this.get("type");return"bar"==a?"vertical":"column"==a?"horizontal":this._direction},setter:function(a){return this._direction=a}},showAreaFill:{},showMarkers:{},showLines:{},categoryAxisName:{},valueAxisName:{value:"values"},horizontalGridlines:{getter:function(){var a=this.get("graph");return a?a.get("horizontalGridlines"):this._horizontalGridlines},setter:function(a){var b=this.get("graph");a&&!o.isObject(a)&&(a={});b?b.set("horizontalGridlines",a):this._horizontalGridlines=
a}},verticalGridlines:{getter:function(){var a=this.get("graph");return a?a.get("verticalGridlines"):this._verticalGridlines},setter:function(a){var b=this.get("graph");a&&!o.isObject(a)&&(a={});b?b.set("verticalGridlines",a):this._verticalGridlines=a}},type:{getter:function(){return this.get("stacked")?"stacked"+this._type:this._type},setter:function(a){"bar"==this._type?"bar"!=a&&this.set("direction","horizontal"):"bar"==a&&this.set("direction","vertical");return this._type=a}},categoryAxis:{}}});
f.PieChart=f.Base.create("pieChart",f.Widget,[f.ChartBase],{_getSeriesCollection:function(){if(this._seriesCollection)return this._seriesCollection;var a=this.get("axes"),b=[],c,d=0,e=this.get("type"),f;if(a){c=a.values.get("keyCollection");f=a.category.get("keyCollection")[0];for(a=c.length;d<a;++d)b[d]={type:e},b[d].categoryAxis="category",b[d].valueAxis="values",b[d].categoryKey=f,b[d].valueKey=c[d]}return this._seriesCollection=b},_parseAxes:function(a){this._axes||(this._axes={});var b,c,d,e,
g,h=this.get("type"),l=this.get("width"),i=this.get("height");c=f.Node.one(this._parentNode);l||(this.set("width",c.get("offsetWidth")),l=this.get("width"));i||(this.set("height",c.get("offsetHeight")),i=this.get("height"));for(b in a)a.hasOwnProperty(b)&&(d=a[b],c="pie"==h?"none":d.position,g=this._getAxisClass(d.type),e={dataProvider:this.get("dataProvider")},d.hasOwnProperty("roundingUnit")&&(e.roundingUnit=d.roundingUnit),e.keys=d.keys,e.width=l,e.height=i,e.position=c,e.styles=d.styles,c=new g(e),
c.on("axisRendered",f.bind(this._itemRendered,this)),this._axes[b]=c)},_addAxes:function(){var a=this.get("axes"),b,c,d;a||(this.set("axes",this._getDefaultAxes()),a=this.get("axes"));this._axesCollection||(this._axesCollection=[]);for(b in a)a.hasOwnProperty(b)&&(c=a[b],d=c.get("position"),this.get(d+"AxesCollection")?this.get(d+"AxesCollection").push(c):this.set(d+"AxesCollection",[c]),this._axesCollection.push(c))},_addSeries:function(){var a=this.get("graph"),b=this.get("seriesCollection");this._parseSeriesAxes(b);
a.set("showBackground",!1);a.set("width",this.get("width"));a.set("height",this.get("height"));a.set("seriesCollection",b);this._seriesCollection=a.get("seriesCollection");a.render(this.get("contentBox"))},_parseSeriesAxes:function(a){for(var b=0,c=a.length,d,e=this.get("axes"),g;b<c;++b)if(d=a[b])d instanceof f.PieSeries?((g=d.get("categoryAxis"))&&!(g instanceof f.Axis)&&d.set("categoryAxis",e[g]),(g=d.get("valueAxis"))&&!(g instanceof f.Axis)&&d.set("valueAxis",e[g])):(d.categoryAxis=e.category,
d.valueAxis=e.values,d.type||(d.type=this.get("type")))},_getDefaultAxes:function(){var a=this.get("categoryKey"),b=this.get("seriesKeys")||[],c,d=this.get("dataProvider")[0];if(1>b.length){for(c in d)c!=a&&b.push(c);0<b.length&&this.set("seriesKeys",b)}return{values:{keys:b,type:"numeric"},category:{keys:[a],type:this.get("categoryType")}}},getSeriesItems:function(a,b){var c={axis:a.get("categoryAxis"),key:a.get("categoryKey"),displayName:a.get("categoryDisplayName")},d={axis:a.get("valueAxis"),
key:a.get("valueKey"),displayName:a.get("valueDisplayName")};c.value=c.axis.getKeyValueAt(c.key,b);d.value=d.axis.getKeyValueAt(d.key,b);return{category:c,value:d}},_sizeChanged:function(){this._redraw()},_redraw:function(){var a=this.get("graph"),b=this.get("width"),c=this.get("height");a&&(b=Math.min(b,c),a.set("width",b),a.set("height",b))},_tooltipLabelFunction:function(a,b,c,d){c=p.createElement("div");d=d.getTotalValues();d=Math.round(1E4*(b.value/d))/100;c.appendChild(p.createTextNode(a.displayName+
": "+a.axis.get("labelFunction").apply(this,[a.value,a.axis.get("labelFormat")])));c.appendChild(p.createElement("br"));c.appendChild(p.createTextNode(b.displayName+": "+b.axis.get("labelFunction").apply(this,[b.value,b.axis.get("labelFormat")])));c.appendChild(p.createElement("br"));c.appendChild(p.createTextNode(d+"%"));return c},_getAriaMessage:function(a){var b="",c,d,e=this._itemIndex;this.get("seriesCollection");var f;d=this.getSeries(0);f=(f=d.get("markers"))&&f.length?f.length:0;37===a?e=
0<e?e-1:f-1:39===a&&(e=e>=f-1?0:e+1);this._itemIndex=e;c=this.getSeriesItems(d,e);a=c.category;c=c.value;d=d.getTotalValues();d=Math.round(1E4*(c.value/d))/100;a&&c?(b+=a.displayName+": "+a.axis.formatLabel.apply(this,[a.value,a.axis.get("labelFormat")])+", ",b+=c.displayName+": "+c.axis.formatLabel.apply(this,[c.value,c.axis.get("labelFormat")])+", ",b+="Percent of total "+c.displayName+": "+d+"%,"):b+="No data available,";return b+(e+1+" of "+f+". ")}},{ATTRS:{ariaDescription:{value:"Use the left and right keys to navigate through items.",
setter:function(a){this._description&&(this._description.setContent(""),this._description.appendChild(p.createTextNode(a)));return a}},axes:{getter:function(){return this._axes},setter:function(a){this._parseAxes(a)}},seriesCollection:{getter:function(){return this._getSeriesCollection()},setter:function(a){return this._setSeriesCollection(a)}},type:{value:"pie"}}})},"3.5.1",{requires:"dom,datatype-number,datatype-date,event-custom,event-mouseenter,event-touch,widget,widget-position,widget-stack,graphics".split(",")});
