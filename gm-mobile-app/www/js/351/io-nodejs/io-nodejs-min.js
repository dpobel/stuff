YUI.add("io-nodejs",function(e){e.IO.request||(e.IO.request=require("request"));var f=function(c){var b=[];Object.keys(c).forEach(function(a){b.push(a+": "+c[a])});return b.join("\n")};e.IO.transports.nodejs=function(){return{send:function(c,b,a){a.notify("start",c,a);a.method=a.method||"GET";b={method:a.method,uri:b};if(a.data)b.body=a.data;if(a.headers)b.headers=a.headers;if(a.timeout)b.timeout=a.timeout;a.request&&e.mix(b,a.request);e.IO.request(b,function(b,d){if(b){c.c=b;a.notify(b.code==="ETIMEDOUT"?
"timeout":"failure",c,a)}else{if(d)c.c={status:d.statusCode,statusCode:d.statusCode,headers:d.headers,responseText:d.body,responseXML:null,getResponseHeader:function(a){return this.headers[a]},getAllResponseHeaders:function(){return f(this.headers)}};a.notify("complete",c,a);a.notify(d&&d.statusCode>=200&&d.statusCode<=299?"success":"failure",c,a)}});return{io:c}}}};e.IO.defaultTransport("nodejs")},"3.5.1",{requires:["io-base"]});
