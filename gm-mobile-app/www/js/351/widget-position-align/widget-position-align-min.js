YUI.add("widget-position-align",function(f){function a(){this._posNode||f.error("WidgetPosition needs to be added to the Widget, before WidgetPositionAlign is added");f.after(this._bindUIPosAlign,this,"bindUI");f.after(this._syncUIPosAlign,this,"syncUI")}var h=f.Lang;a.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:!1,value:!1},alignOn:{value:[],validator:f.Lang.isArray}};a.TL="tl";a.TR="tr";a.BL="bl";a.BR="br";a.TC="tc";a.RC="rc";a.BC="bc";a.LC="lc";a.CC="cc";a.prototype={_posAlignUIHandles:null,
destructor:function(){this._detachPosAlignUIHandles()},_bindUIPosAlign:function(){this.after("alignChange",this._afterAlignChange);this.after("alignOnChange",this._afterAlignOnChange);this.after("visibleChange",this._syncUIPosAlign)},_syncUIPosAlign:function(){var a=this.get("align");this._uiSetVisiblePosAlign(this.get("visible"));a&&this._uiSetAlign(a.node,a.points)},align:function(a,d){arguments.length?this.set("align",{node:a,points:d}):this._syncUIPosAlign();return this},centered:function(g){return this.align(g,
[a.CC,a.CC])},_setAlignCenter:function(g){g&&this.set("align",{node:!0===g?null:g,points:[a.CC,a.CC]});return g},_uiSetAlign:function(g,d){if(!h.isArray(d)||2!==d.length)f.error("align: Invalid Points Arguments");else{var b=this._getRegion(g),e,c;if(b){e=d[0];switch(d[1]){case a.TL:c=[b.left,b.top];break;case a.TR:c=[b.right,b.top];break;case a.BL:c=[b.left,b.bottom];break;case a.BR:c=[b.right,b.bottom];break;case a.TC:c=[b.left+Math.floor(b.width/2),b.top];break;case a.BC:c=[b.left+Math.floor(b.width/
2),b.bottom];break;case a.LC:c=[b.left,b.top+Math.floor(b.height/2)];break;case a.RC:c=[b.right,b.top+Math.floor(b.height/2)];break;case a.CC:c=[b.left+Math.floor(b.width/2),b.top+Math.floor(b.height/2)]}c&&this._doAlign(e,c[0],c[1])}}},_uiSetVisiblePosAlign:function(a){a?this._attachPosAlignUIHandles():this._detachPosAlignUIHandles()},_attachPosAlignUIHandles:function(){if(!this._posAlignUIHandles){var a=this.get("boundingBox"),d=f.bind(this._syncUIPosAlign,this),b=[];f.Array.each(this.get("alignOn"),
function(e){var c=e.eventName,e=f.one(e.node)||a;c&&b.push(e.on(c,d))});this._posAlignUIHandles=b}},_detachPosAlignUIHandles:function(){var a=this._posAlignUIHandles;a&&((new f.EventHandle(a)).detach(),this._posAlignUIHandles=null)},_doAlign:function(g,d,b){var e=this._posNode,c;switch(g){case a.TL:c=[d,b];break;case a.TR:c=[d-e.get("offsetWidth"),b];break;case a.BL:c=[d,b-e.get("offsetHeight")];break;case a.BR:c=[d-e.get("offsetWidth"),b-e.get("offsetHeight")];break;case a.TC:c=[d-e.get("offsetWidth")/
2,b];break;case a.BC:c=[d-e.get("offsetWidth")/2,b-e.get("offsetHeight")];break;case a.LC:c=[d,b-e.get("offsetHeight")/2];break;case a.RC:c=[d-e.get("offsetWidth"),b-e.get("offsetHeight")/2];break;case a.CC:c=[d-e.get("offsetWidth")/2,b-e.get("offsetHeight")/2]}c&&this.move(c)},_getRegion:function(a){var d;a?(a=f.Node.one(a))&&(d=a.get("region")):d=this._posNode.get("viewportRegion");return d},_afterAlignChange:function(a){(a=a.newVal)&&this._uiSetAlign(a.node,a.points)},_afterAlignOnChange:function(){this._detachPosAlignUIHandles();
this.get("visible")&&this._attachPosAlignUIHandles()}};f.WidgetPositionAlign=a},"3.5.1",{requires:["widget-position"]});
