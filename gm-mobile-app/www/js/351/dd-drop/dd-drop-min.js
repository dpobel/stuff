YUI.add("dd-drop",function(c){var b=c.DD.DDM,e=function(){this._lazyAddAttrs=!1;e.superclass.constructor.apply(this,arguments);c.on("domready",c.bind(function(){c.later(100,this,this._createShim)},this));b._regTarget(this)};e.NAME="drop";e.ATTRS={node:{setter:function(a){var b=c.one(a);b||c.error("DD.Drop: Invalid Node Given: "+a);return b}},groups:{value:["default"],getter:function(){this._groups||(this._groups={});var a=[];c.each(this._groups,function(b,c){a[a.length]=c});return a},setter:function(a){this._groups=
{};c.each(a,function(a){this._groups[a]=!0},this);return a}},padding:{value:"0",setter:function(a){return b.cssSizestoObject(a)}},lock:{value:!1,setter:function(a){a?this.get("node").addClass(b.CSS_PREFIX+"-drop-locked"):this.get("node").removeClass(b.CSS_PREFIX+"-drop-locked");return a}},bubbles:{setter:function(a){this.addTarget(a);return a}},useShim:{value:!0,setter:function(a){c.DD.DDM._noShim=!a;return a}}};c.extend(e,c.Base,{_bubbleTargets:c.DD.DDM,addToGroup:function(a){this._groups[a]=!0;
return this},removeFromGroup:function(a){delete this._groups[a];return this},_createEvents:function(){c.each(["drop:over","drop:enter","drop:exit","drop:hit"],function(a){this.publish(a,{type:a,emitFacade:!0,preventable:!1,bubbles:!0,queuable:!1,prefix:"drop"})},this)},_valid:null,_groups:null,shim:null,region:null,overTarget:null,inGroup:function(a){var b=this._valid=!1;c.each(a,function(a){this._groups[a]&&(this._valid=b=!0)},this);return b},initializer:function(){c.later(100,this,this._createEvents);
var a=this.get("node"),f;a.get("id")||(f=c.stamp(a),a.set("id",f));a.addClass(b.CSS_PREFIX+"-drop");this.set("groups",this.get("groups"))},destructor:function(){b._unregTarget(this);this.shim&&this.shim!==this.get("node")&&(this.shim.detachAll(),this.shim.remove(),this.shim=null);this.get("node").removeClass(b.CSS_PREFIX+"-drop");this.detachAll()},_deactivateShim:function(){if(!this.shim)return!1;this.get("node").removeClass(b.CSS_PREFIX+"-drop-active-valid");this.get("node").removeClass(b.CSS_PREFIX+
"-drop-active-invalid");this.get("node").removeClass(b.CSS_PREFIX+"-drop-over");this.get("useShim")&&this.shim.setStyles({top:"-999px",left:"-999px",zIndex:"1"});this.overTarget=!1},_activateShim:function(){if(!b.activeDrag||this.get("node")===b.activeDrag.get("node")||this.get("lock"))return!1;var a=this.get("node");this.inGroup(b.activeDrag.get("groups"))?(a.removeClass(b.CSS_PREFIX+"-drop-active-invalid"),a.addClass(b.CSS_PREFIX+"-drop-active-valid"),b._addValid(this),this.overTarget=!1,this.get("useShim")||
(this.shim=this.get("node")),this.sizeShim()):(b._removeValid(this),a.removeClass(b.CSS_PREFIX+"-drop-active-valid"),a.addClass(b.CSS_PREFIX+"-drop-active-invalid"))},sizeShim:function(){if(!b.activeDrag||this.get("node")===b.activeDrag.get("node")||this.get("lock"))return!1;if(!this.shim)return c.later(100,this,this.sizeShim),!1;var a=this.get("node"),f=a.get("offsetHeight"),g=a.get("offsetWidth"),a=a.getXY(),d=this.get("padding"),e,h,g=g+d.left+d.right,f=f+d.top+d.bottom;a[0]-=d.left;a[1]-=d.top;
b.activeDrag.get("dragMode")===b.INTERSECT&&(d=b.activeDrag,e=d.get("node").get("offsetHeight"),h=d.get("node").get("offsetWidth"),f+=e,g+=h,a[0]-=h-d.deltaXY[0],a[1]-=e-d.deltaXY[1]);this.get("useShim")&&this.shim.setStyles({height:f+"px",width:g+"px",top:a[1]+"px",left:a[0]+"px"});this.region={"0":a[0],1:a[1],area:0,top:a[1],right:a[0]+g,bottom:a[1]+f,left:a[0]}},_createShim:function(){if(b._pg){if(!this.shim){var a=this.get("node");this.get("useShim")&&(a=c.Node.create('<div id="'+this.get("node").get("id")+
'_shim"></div>'),a.setStyles({height:this.get("node").get("offsetHeight")+"px",width:this.get("node").get("offsetWidth")+"px",backgroundColor:"yellow",opacity:".5",zIndex:"1",overflow:"hidden",top:"-900px",left:"-900px",position:"absolute"}),b._pg.appendChild(a),a.on("mouseover",c.bind(this._handleOverEvent,this)),a.on("mouseout",c.bind(this._handleOutEvent,this)));this.shim=a}}else c.later(10,this,this._createShim)},_handleTargetOver:function(){b.isOverTarget(this)?(this.get("node").addClass(b.CSS_PREFIX+
"-drop-over"),b.activeDrop=this,b.otherDrops[this]=this,this.overTarget?(b.activeDrag.fire("drag:over",{drop:this,drag:b.activeDrag}),this.fire("drop:over",{drop:this,drag:b.activeDrag})):b.activeDrag.get("dragging")&&(this.overTarget=!0,this.fire("drop:enter",{drop:this,drag:b.activeDrag}),b.activeDrag.fire("drag:enter",{drop:this,drag:b.activeDrag}),b.activeDrag.get("node").addClass(b.CSS_PREFIX+"-drag-over"))):this._handleOut()},_handleOverEvent:function(){this.shim.setStyle("zIndex","999");b._addActiveShim(this)},
_handleOutEvent:function(){this.shim.setStyle("zIndex","1");b._removeActiveShim(this)},_handleOut:function(a){if((!b.isOverTarget(this)||a)&&this.overTarget)this.overTarget=!1,a||b._removeActiveShim(this),b.activeDrag&&(this.get("node").removeClass(b.CSS_PREFIX+"-drop-over"),b.activeDrag.get("node").removeClass(b.CSS_PREFIX+"-drag-over"),this.fire("drop:exit",{drop:this,drag:b.activeDrag}),b.activeDrag.fire("drag:exit",{drop:this,drag:b.activeDrag}),delete b.otherDrops[this])}});c.DD.Drop=e},"3.5.1",
{skinnable:!1,requires:["dd-ddm-drop","dd-drag"]});
