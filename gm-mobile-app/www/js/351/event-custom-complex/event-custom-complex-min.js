YUI.add("event-custom-complex",function(d){var f,m,n={};f=d.CustomEvent.prototype;var l=d.EventTarget.prototype;d.EventFacade=function(b,c){this._event=b=b||n;this.details=b.details;this._type=this.type=b.type;this.target=b.target;this.currentTarget=c;this.relatedTarget=b.relatedTarget};d.extend(d.EventFacade,Object,{stopPropagation:function(){this._event.stopPropagation();this.stopped=1},stopImmediatePropagation:function(){this._event.stopImmediatePropagation();this.stopped=2},preventDefault:function(){this._event.preventDefault();
this.prevented=1},halt:function(b){this._event.halt(b);this.prevented=1;this.stopped=b?2:1}});f.fireComplex=function(b){var c,e,i,g,j,k,a=this,h=a.host||a;if(a.stack&&a.queuable&&a.type!=a.stack.next.type)return a.log("queue "+a.type),a.stack.queue.push([a,b]),!0;c=a.stack||{id:a.id,next:a,silent:a.silent,stopped:0,prevented:0,bubbling:null,type:a.type,afterQueue:new d.Queue,defaultTargetOnly:a.defaultTargetOnly,queue:[]};i=a.getSubs();a.stopped=a.type!==c.type?0:c.stopped;a.prevented=a.type!==c.type?
0:c.prevented;a.target=a.target||h;g=new d.EventTarget({fireOnce:!0,context:h});a.events=g;if(a.stoppedFn)g.on("stopped",a.stoppedFn);a.currentTarget=h;a.details=b.slice();a.log("Firing "+a.type);a._facade=null;e=a._getFacade(b);d.Lang.isObject(b[0])?b[0]=e:b.unshift(e);i[0]&&a._procSubs(i[0],b,e);a.bubbles&&h.bubble&&!a.stopped&&(j=c.bubbling,c.bubbling=a.type,c.type!=a.type&&(c.stopped=0,c.prevented=0),g=h.bubble(a,b,null,c),a.stopped=Math.max(a.stopped,c.stopped),a.prevented=Math.max(a.prevented,
c.prevented),c.bubbling=j);a.prevented?a.preventedFn&&a.preventedFn.apply(h,b):a.defaultFn&&(!a.defaultTargetOnly&&!c.defaultTargetOnly||h===e.target)&&a.defaultFn.apply(h,b);a._broadcast(b);if(i[1]&&!a.prevented&&2>a.stopped)if(c.id===a.id||a.type!=h._yuievt.bubbling)for(a._procSubs(i[1],b,e);i=c.afterQueue.last();)i();else k=i[1],c.execDefaultCnt&&(k=d.merge(k),d.each(k,function(a){a.postponed=true})),c.afterQueue.add(function(){a._procSubs(k,b,e)});a.target=null;if(c.id===a.id){for(g=c.queue;g.length;)i=
g.pop(),j=i[0],c.next=j,j.fire.apply(j,i[1]);a.stack=null}g=!a.stopped;a.type!=h._yuievt.bubbling&&(c.stopped=0,c.prevented=0,a.stopped=0,a.prevented=0);return g};f._getFacade=function(){var b=this._facade,c,e;c=this.details;b||(b=new d.EventFacade(this,this.currentTarget));c=c&&c[0];d.Lang.isObject(c,!0)&&(e={},d.mix(e,b,!0,m),d.mix(b,c,!0),d.mix(b,e,!0,m),b.type=c.type||b.type);b.details=this.details;b.target=this.originalTarget||this.target;b.currentTarget=this.currentTarget;b.stopped=0;b.prevented=
0;return this._facade=b};f.stopPropagation=function(){this.stopped=1;this.stack&&(this.stack.stopped=1);this.events.fire("stopped",this)};f.stopImmediatePropagation=function(){this.stopped=2;this.stack&&(this.stack.stopped=2);this.events.fire("stopped",this)};f.preventDefault=function(){this.preventable&&(this.prevented=1,this.stack&&(this.stack.prevented=1))};f.halt=function(b){b?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()};l.addTarget=function(b){this._yuievt.targets[d.stamp(b)]=
b;this._yuievt.hasTargets=!0};l.getTargets=function(){return d.Object.values(this._yuievt.targets)};l.removeTarget=function(b){delete this._yuievt.targets[d.stamp(b)]};l.bubble=function(b,c,e,d){var g=this._yuievt.targets,j=!0,k=b&&b.type,a,h,f,l=e||b&&b.target||this,m;if(!b||!b.stopped&&g)for(h in g)if(g.hasOwnProperty(h)){e=g[h];a=e.getEvent(k,!0);(f=e.getSibling(k,a))&&!a&&(a=e.publish(k));m=e._yuievt.bubbling;e._yuievt.bubbling=k;if(a){if(a.sibling=f,a.target=l,a.originalTarget=l,a.currentTarget=
e,f=a.broadcast,a.broadcast=!1,a.emitFacade=!0,a.stack=d,j=j&&a.fire.apply(a,c||b.details||[]),a.broadcast=f,a.originalTarget=null,a.stopped)break}else e._yuievt.hasTargets&&e.bubble(b,c,l,d);e._yuievt.bubbling=m}return j};f=new d.EventFacade;m=d.Object.keys(f)},"3.5.1",{requires:["event-custom-base"]});
