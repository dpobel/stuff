YUI.add("io-base",function(e){function k(a){this._uid="io:"+o++;this._init(a);e.io._map[this._uid]=this}var f="start,complete,end,success,failure,progress".split(","),m=["status","statusText","responseText","responseXML"],g=e.config.win,o=0;k.prototype={_id:0,_headers:{"X-Requested-With":"XMLHttpRequest"},_timeout:{},_init:function(a){var b,d;this.cfg=a||{};e.augment(this,e.EventTarget);b=0;for(d=f.length;b<d;++b)this.publish("io:"+f[b],e.merge({broadcast:1},a)),this.publish("io-trn:"+f[b],a)},_create:function(a,
b){var d=this,c={id:e.Lang.isNumber(b)?b:d._id++,uid:d._uid},h=a.xdr?a.xdr.use:null,f=a.form&&a.form.upload?"iframe":null;"native"===h&&(h=e.UA.ie?"xdr":null);c=(h=h||f)?e.merge(e.IO.customTransport(h),c):e.merge(e.IO.defaultTransport(),c);c.notify&&(a.notify=function(a,b,c){d.notify(a,b,c)});!h&&g&&g.FormData&&a.data instanceof FormData&&(c.c.upload.onprogress=function(b){d.progress(c,b,a)},c.c.onload=function(b){d.load(c,b,a)},c.c.onerror=function(b){d.error(c,b,a)},c.upload=!0);return c},_destroy:function(a){g&&
!a.notify&&!a.xdr&&(n&&!a.upload?a.c.onreadystatechange=null:a.upload?(a.c.upload.onprogress=null,a.c.onload=null,a.c.onerror=null):e.UA.ie&&!a.e&&a.c.abort());a.c=null},_evt:function(a,b,d){var c,h=d.arguments,g=this.cfg.emitFacade,p="io:"+a,j="io-trn:"+a;this.detach(j);b.e&&(b.c={status:0,statusText:b.e});c=[g?{id:b.id,data:b.c,cfg:d,arguments:h}:b.id];g||(a===f[0]||a===f[2]||(b.evt?c.push(b.evt):c.push(b.c)),h&&c.push(h));c.unshift(p);this.fire.apply(this,c);d.on&&(c[0]=j,this.once(j,d.on[a],d.context||
e),this.fire.apply(this,c))},start:function(a,b){this._evt(f[0],a,b)},complete:function(a,b){this._evt(f[1],a,b)},end:function(a,b){this._evt(f[2],a,b);this._destroy(a)},success:function(a,b){this._evt(f[3],a,b);this.end(a,b)},failure:function(a,b){this._evt(f[4],a,b);this.end(a,b)},progress:function(a,b,d){a.evt=b;this._evt(f[5],a,d)},load:function(a,b,d){a.evt=b.target;this._evt(f[1],a,d)},error:function(a,b,d){a.evt=b;this._evt(f[4],a,d)},_retry:function(a,b,d){this._destroy(a);d.xdr.use="flash";
return this.send(b,d,a.id)},_concat:function(a,b){return a+=(-1===a.indexOf("?")?"?":"&")+b},setHeader:function(a,b){b?this._headers[a]=b:delete this._headers[a]},_setHeaders:function(a,b){b=e.merge(this._headers,b);e.Object.each(b,function(d,c){"disable"!==d&&a.setRequestHeader(c,b[c])})},_startTimeout:function(a,b){var d=this;d._timeout[a.id]=setTimeout(function(){d._abort(a,"timeout")},b)},_clearTimeout:function(a){clearTimeout(this._timeout[a]);delete this._timeout[a]},_result:function(a,b){var d;
try{d=a.c.status}catch(c){d=0}200<=d&&300>d||304===d||1223===d?this.success(a,b):this.failure(a,b)},_rS:function(a,b){var d=this;4===a.c.readyState&&(b.timeout&&d._clearTimeout(a.id),setTimeout(function(){d.complete(a,b);d._result(a,b)},0))},_abort:function(a,b){a&&a.c&&(a.e=b,a.c.abort())},send:function(a,b,d){var c,h,f,g,j,i=this,k=a,l={},b=b?e.Object(b):{};c=i._create(b,d);d=b.method?b.method.toUpperCase():"GET";g=b.sync;j=b.data;e.Lang.isObject(j)&&!j.nodeType&&!c.upload&&(j=e.QueryString.stringify(j));
if(b.form){if(b.form.upload)return i.upload(c,a,b);j=i._serialize(b.form,j)}if(j)switch(d){case "GET":case "HEAD":case "DELETE":k=i._concat(k,j);j="";break;case "POST":case "PUT":b.headers=e.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},b.headers)}if(c.xdr)return i.xdr(k,c,b);if(c.notify)return c.c.send(c,a,b);!g&&!c.upload&&(c.c.onreadystatechange=function(){i._rS(c,b)});try{if(c.c.open(d,k,!g,b.username||null,b.password||null),i._setHeaders(c.c,b.headers||{}),i.start(c,
b),b.xdr&&b.xdr.credentials&&!e.UA.ie&&(c.c.withCredentials=!0),c.c.send(j),g){h=0;for(f=m.length;h<f;++h)l[m[h]]=c.c[m[h]];l.getAllResponseHeaders=function(){return c.c.getAllResponseHeaders()};l.getResponseHeader=function(a){return c.c.getResponseHeader(a)};i.complete(c,b);i._result(c,b);return l}}catch(n){if(c.xdr)return i._retry(c,a,b);i.complete(c,b);i._result(c,b)}b.timeout&&i._startTimeout(c,b.timeout);return{id:c.id,abort:function(){return c.c?i._abort(c,"abort"):false},isInProgress:function(){return c.c?
c.c.readyState%4:false},io:i}}};e.io=function(a,b){var d=e.io._map["io:0"]||new k;return d.send.apply(d,[a,b])};e.io.header=function(a,b){(e.io._map["io:0"]||new k).setHeader(a,b)};e.IO=k;e.io._map={};var n=g&&g.XMLHttpRequest,q=g&&g.XDomainRequest,r=g&&g.ActiveXObject;e.mix(e.IO,{_default:"xhr",defaultTransport:function(a){if(a)e.IO._default=a;else return{c:e.IO.transports[e.IO._default](),notify:"xhr"===e.IO._default?!1:!0}},transports:{xhr:function(){return n?new XMLHttpRequest:r?new ActiveXObject("Microsoft.XMLHTTP"):
null},xdr:function(){return q?new XDomainRequest:null},iframe:function(){return{}},flash:null,nodejs:null},customTransport:function(a){var b={c:e.IO.transports[a]()};b["xdr"===a||"flash"===a?"xdr":"notify"]=!0;return b}});e.mix(e.IO.prototype,{notify:function(a,b,d){switch(a){case "timeout":case "abort":case "transport error":b.c={status:0,statusText:a},a="failure";default:this[a].apply(this,[b,d])}}})},"3.5.1",{requires:["event-custom-base","querystring-stringify-simple"]});
