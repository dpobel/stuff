YUI.add("event-delegate",function(b){function k(c,f,e,i){var g=n(arguments,0,!0),a=l(e)?e:null,d,h,j;if(o(c)){a=[];if(r(c)){d=0;for(h=c.length;d<h;++d)g[0]=c[d],a.push(b.delegate.apply(b,g))}else for(d in g.unshift(null),c)c.hasOwnProperty(d)&&(g[0]=d,g[1]=c[d],a.push(b.delegate.apply(b,g)));return new b.EventHandle(a)}d=c.split(/\|/);1<d.length&&(h=d.shift(),g[0]=c=d.shift());d=b.Node.DOM_EVENTS[c];o(d)&&d.delegate&&(j=d.delegate.apply(d,arguments));if(!j){if(!c||!f||!e||!i)return;a=a?b.Selector.query(a,
null,!0):e;!a&&l(e)&&(j=b.on("available",function(){b.mix(j,b.delegate.apply(b,g),true)},e));!j&&a&&(g.splice(2,2,a),j=b.Event._attach(g,{facade:!1}),j.sub.filter=i,j.sub._notify=k.notifySub)}j&&h&&(h=p[h]||(p[h]={}),h=h[c]||(h[c]=[]),h.push(j));return j}var n=b.Array,m=b.Lang,l=m.isString,o=m.isObject,r=m.isArray,q=b.Selector.test,p=b.Env.evt.handles;k.notifySub=function(c,f,e){f=f.slice();this.args&&f.push.apply(f,this.args);var c=k._applyFilter(this.filter,f,e),i,g,a;if(c){c=n(c);i=f[0]=new b.DOMEventFacade(f[0],
e.el,e);i.container=b.one(e.el);e=0;for(g=c.length;e<g&&!i.stopped&&!(i.currentTarget=b.one(c[e]),a=this.fn.apply(this.context||i.currentTarget,f),!1===a);++e);return a}};k.compileFilter=b.cached(function(c){return function(b,e){return q(b._node,c,e.currentTarget===e.target?null:e.currentTarget._node)}});k._applyFilter=function(c,f,e){var i=f[0],g=e.el,a=i.target||i.srcElement,d=[],h=!1;3===a.nodeType&&(a=a.parentNode);f.unshift(a);if(l(c))for(;a;){h=a===g;q(a,c,h?null:g)&&d.push(a);if(h)break;a=
a.parentNode}else{f[0]=b.one(a);for(f[1]=new b.DOMEventFacade(i,g,e);a;){c.apply(f[0],f)&&d.push(a);if(a===g)break;a=a.parentNode;f[0]=b.one(a)}f[1]=i}1>=d.length&&(d=d[0]);f.shift();return d};b.delegate=b.Event.delegate=k},"3.5.1",{requires:["node-base"]});
