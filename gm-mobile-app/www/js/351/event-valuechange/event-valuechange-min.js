YUI.add("event-valuechange",function(f){var h,d={POLL_INTERVAL:50,TIMEOUT:1E4,_poll:function(a,c){var b=a._node,e=c.e,g=b&&b.value,i=a._data&&a._data._valuechange,h;!b||!i?d._stopPolling(a):(b=i.prevVal,g!==b&&(i.prevVal=g,h={_event:e,currentTarget:e&&e.currentTarget||a,newVal:g,prevVal:b,target:e&&e.target||a},f.Object.each(i.notifiers,function(a){a.fire(h)}),d._refreshTimeout(a)))},_refreshTimeout:function(a,c){if(a._node){var b=a.getData("_valuechange");d._stopTimeout(a);b.timeout=setTimeout(function(){d._stopPolling(a,
c)},d.TIMEOUT)}},_startPolling:function(a,c,b){if(a.test("input,textarea")){var e=a.getData("_valuechange");e||(e={prevVal:a.get("value")},a.setData("_valuechange",e));e.notifiers||(e.notifiers={});if(e.interval)if(b.force)d._stopPolling(a,c);else{e.notifiers[f.stamp(c)]=c;return}e.notifiers[f.stamp(c)]=c;e.interval=setInterval(function(){d._poll(a,e,b)},d.POLL_INTERVAL);d._refreshTimeout(a,c)}},_stopPolling:function(a,c){if(a._node){var b=a.getData("_valuechange")||{};clearInterval(b.interval);delete b.interval;
d._stopTimeout(a);c?b.notifiers&&delete b.notifiers[f.stamp(c)]:b.notifiers={}}},_stopTimeout:function(a){a=a.getData("_valuechange")||{};clearTimeout(a.timeout);delete a.timeout},_onBlur:function(a,c){d._stopPolling(a.currentTarget,c)},_onFocus:function(a,c){var b=a.currentTarget,e=b.getData("_valuechange");e||(e={},b.setData("_valuechange",e));e.prevVal=b.get("value");d._startPolling(b,c,{e:a})},_onKeyDown:function(a,c){d._startPolling(a.currentTarget,c,{e:a})},_onKeyUp:function(a,c){(229===a.charCode||
197===a.charCode)&&d._startPolling(a.currentTarget,c,{e:a,force:!0})},_onMouseDown:function(a,c){d._startPolling(a.currentTarget,c,{e:a})},_onSubscribe:function(a,c,b,e){var g;g={blur:d._onBlur,focus:d._onFocus,keydown:d._onKeyDown,keyup:d._onKeyUp,mousedown:d._onMouseDown};c=b._valuechange={};e?(c.delegated=!0,c.getNodes=function(){return a.all("input,textarea").filter(e)},c.getNodes().each(function(a){a.getData("_valuechange")||a.setData("_valuechange",{prevVal:a.get("value")})}),b._handles=f.delegate(g,
a,e,null,b)):a.test("input,textarea")&&(a.getData("_valuechange")||a.setData("_valuechange",{prevVal:a.get("value")}),b._handles=a.on(g,null,null,b))},_onUnsubscribe:function(a,c,b){c=b._valuechange;b._handles&&b._handles.detach();c.delegated?c.getNodes().each(function(a){d._stopPolling(a,b)}):d._stopPolling(a,b)}};h={detach:d._onUnsubscribe,on:d._onSubscribe,delegate:d._onSubscribe,detachDelegate:d._onUnsubscribe,publishConfig:{emitFacade:!0}};f.Event.define("valuechange",h);f.Event.define("valueChange",
h);f.ValueChange=d},"3.5.1",{requires:["event-focus","event-synthetic"]});
