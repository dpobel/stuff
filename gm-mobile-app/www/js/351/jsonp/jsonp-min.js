YUI.add("jsonp",function(e){function g(){this._init.apply(this,arguments)}var h=e.Lang.isFunction;g.prototype={_init:function(d,a){this.url=d;this._requests={};this._timeouts={};var a=h(a)?{on:{success:a}}:a||{},c=a.on||{};c.success||(c.success=this._defaultCallback(d,a));this._config=e.merge({context:this,args:[],format:this._format,allowCache:!1},a,{on:c})},_defaultCallback:function(){},send:function(){function d(c,d){return h(c)?function(e){var g=!0,h="_requests";d?(++a._timeouts[b],--a._requests[b]):
(a._requests[b]||(g=!1,h="_timeouts"),--a[h][b]);!a._requests[b]&&!a._timeouts[b]&&delete YUI.Env.JSONP[b];g&&c.apply(f.context,[e].concat(f.args))}:null}var a=this,c=e.Array(arguments,0,!0),f=a._config,b=a._proxy||e.guid();f.allowCache&&(a._proxy=b);void 0===a._requests[b]&&(a._requests[b]=0);void 0===a._timeouts[b]&&(a._timeouts[b]=0);a._requests[b]++;c.unshift(a.url,"YUI.Env.JSONP."+b);c=f.format.apply(a,c);if(!f.on.success)return a;YUI.Env.JSONP[b]=d(f.on.success);e.Get.script(c,{onFailure:d(f.on.failure),
onTimeout:d(f.on.timeout,!0),timeout:f.timeout,charset:f.charset,attributes:f.attributes});return a},_format:function(d,a){return d.replace(/\{callback\}/,a)}};e.JSONPRequest=g;e.jsonp=function(d,a){var c=new e.JSONPRequest(d,a);return c.send.apply(c,e.Array(arguments,2,!0))};YUI.Env.JSONP||(YUI.Env.JSONP={})},"3.5.1",{requires:["get","oop"]});
