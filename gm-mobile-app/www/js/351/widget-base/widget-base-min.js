YUI.add("widget-base",function(f){function d(a){var b,c=this.constructor;this._strs={};this._cssPrefix=c.CSS_PREFIX||j(c.NAME.toLowerCase());a=a||{};d.superclass.constructor.call(this,a);if(a=this.get(m))a!==e&&(b=a),this.render(b)}var n=f.Lang,h=f.Node,p=f.ClassNameManager,j=p.getClassName,k,r=f.cached(function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}),m="render",q=function(){},e=!0,o,g={},s="visible,disabled,height,width,focused,tabIndex".split(","),t=f.UA.webkit,l={};d.NAME="widget";
o=d.UI_SRC="ui";d.ATTRS=g;g.id={valueFn:"_guid",writeOnce:e};g.rendered={value:!1,readOnly:e};g.boundingBox={value:null,setter:"_setBB",writeOnce:e};g.contentBox={valueFn:"_defaultCB",setter:"_setCB",writeOnce:e};g.tabIndex={value:null,validator:"_validTabIndex"};g.focused={value:!1,readOnly:e};g.disabled={value:!1};g.visible={value:e};g.height={value:""};g.width={value:""};g.strings={value:{},setter:"_strSetter",getter:"_strGetter"};g[m]={value:!1,writeOnce:e};d.CSS_PREFIX=j(d.NAME.toLowerCase());
d.getClassName=function(){return j.apply(p,[d.CSS_PREFIX].concat(f.Array(arguments),!0))};k=d.getClassName;d.getByNode=function(a){var b,c=k();if(a=h.one(a))if(a=a.ancestor("."+c,!0))a=a.get("id"),b=l[a];return b||null};f.extend(d,f.Base,{getClassName:function(){return j.apply(p,[this._cssPrefix].concat(f.Array(arguments),!0))},initializer:function(a){var b=this.get("boundingBox");b instanceof h&&this._mapInstance(b.get("id"));this._applyParser&&this._applyParser(a)},_mapInstance:function(a){l[a]||
(l[a]=this)},destructor:function(){var a=this.get("boundingBox");a instanceof h&&(a=a.get("id"),a in l&&delete l[a],this._destroyBox())},destroy:function(a){this._destroyAllNodes=a;return d.superclass.destroy.apply(this)},_destroyBox:function(){var a=this.get("boundingBox"),b=this.get("contentBox"),c=this._destroyAllNodes,i;i=a&&a.compareTo(b);this.UI_EVENTS&&this._destroyUIEvents();this._unbindUI(a);c?(a.empty(),a.remove(e)):(b&&b.remove(e),i||a.remove(e))},render:function(a){!this.get("destroyed")&&
!this.get("rendered")&&(this.publish(m,{queuable:!1,fireOnce:e,defaultTargetOnly:e,defaultFn:this._defRenderFn}),this.fire(m,{parentNode:a?h.one(a):null}));return this},_defRenderFn:function(a){this._parentNode=a.parentNode;this.renderer();this._set("rendered",e);this._removeLoadingClassNames()},renderer:function(){this._renderUI();this.renderUI();this._bindUI();this.bindUI();this._syncUI();this.syncUI()},bindUI:q,renderUI:q,syncUI:q,hide:function(){return this.set("visible",!1)},show:function(){return this.set("visible",
e)},focus:function(){return this._set("focused",e)},blur:function(){return this._set("focused",!1)},enable:function(){return this.set("disabled",!1)},disable:function(){return this.set("disabled",e)},_uiSizeCB:function(a){this.get("contentBox").toggleClass(k("content","expanded"),a)},_renderBox:function(a){var b=this.get("contentBox"),c=this.get("boundingBox"),i=this.get("srcNode"),d=this.DEF_PARENT_NODE,e=i&&i.get("ownerDocument")||c.get("ownerDocument")||b.get("ownerDocument");i&&!i.compareTo(b)&&
!b.inDoc(e)&&i.replace(b);!c.compareTo(b.get("parentNode"))&&!c.compareTo(b)&&(b.inDoc(e)&&b.replace(c),c.appendChild(b));(a=a||d&&h.one(d))?a.appendChild(c):c.inDoc(e)||h.one("body").insert(c,0)},_setBB:function(a){return this._setBox(this.get("id"),a,this.BOUNDING_TEMPLATE)},_setCB:function(a){return null===this.CONTENT_TEMPLATE?this.get("boundingBox"):this._setBox(null,a,this.CONTENT_TEMPLATE)},_defaultCB:function(){return this.get("srcNode")||null},_setBox:function(a,b,c){b=h.one(b)||h.create(c);
b.get("id")||b.set("id",a||f.guid());return b},_renderUI:function(){this._renderBoxClassNames();this._renderBox(this._parentNode)},_renderBoxClassNames:function(){var a=this._getClasses(),b,c=this.get("boundingBox"),d;c.addClass(k());for(d=a.length-3;0<=d;d--)b=a[d],c.addClass(b.CSS_PREFIX||j(b.NAME.toLowerCase()));this.get("contentBox").addClass(this.getClassName("content"))},_removeLoadingClassNames:function(){var a=this.get("boundingBox"),b=this.get("contentBox"),c=this.getClassName("loading"),
d=k("loading");a.removeClass(d).removeClass(c);b.removeClass(d).removeClass(c)},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND);this._bindDOM()},_unbindUI:function(a){this._unbindDOM(a)},_bindDOM:function(){var a=this.get("boundingBox").get("ownerDocument"),b=d._hDocFocus;b||(b=d._hDocFocus=a.on("focus",this._onDocFocus,this),b.listeners={count:0});b.listeners[f.stamp(this,!0)]=!0;b.listeners.count++;t&&(this._hDocMouseDown=a.on("mousedown",this._onDocMouseDown,this))},_unbindDOM:function(){var a=
d._hDocFocus,b=f.stamp(this,!0),c,e=this._hDocMouseDown;if(a&&(c=a.listeners,c[b]&&(delete c[b],c.count--),0===c.count))a.detach(),d._hDocFocus=null;t&&e&&e.detach()},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC)},_uiSetHeight:function(a){this._uiSetDim("height",a);this._uiSizeCB(""!==a&&"auto"!==a)},_uiSetWidth:function(a){this._uiSetDim("width",a)},_uiSetDim:function(a,b){this.get("boundingBox").setStyle(a,n.isNumber(b)?b+this.DEF_UNIT:b)},_uiSetVisible:function(a){this.get("boundingBox").toggleClass(this.getClassName("hidden"),
!a)},_uiSetDisabled:function(a){this.get("boundingBox").toggleClass(this.getClassName("disabled"),a)},_uiSetFocused:function(a,b){var c=this.get("boundingBox");c.toggleClass(this.getClassName("focused"),a);b!==o&&(a?c.focus():c.blur())},_uiSetTabIndex:function(a){var b=this.get("boundingBox");n.isNumber(a)?b.set("tabIndex",a):b.removeAttribute("tabIndex")},_onDocMouseDown:function(a){this._domFocus&&this._onDocFocus(a)},_onDocFocus:function(a){var a=d.getByNode(a.target),b=d._active;b&&b!==a&&(b._domFocus=
!1,b._set("focused",!1,{src:o}),d._active=null);a&&(a._domFocus=!0,a._set("focused",!0,{src:o}),d._active=a)},toString:function(){return this.name+"["+this.get("id")+"]"},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:"<div></div>",BOUNDING_TEMPLATE:"<div></div>",_guid:function(){return f.guid()},_validTabIndex:function(a){return n.isNumber(a)||n.isNull(a)},_bindAttrUI:function(a){var b,c=a.length;for(b=0;b<c;b++)this.after(a[b]+"Change",this._setAttrUI)},_syncAttrUI:function(a){var b,c=a.length,
d;for(b=0;b<c;b++)d=a[b],this["_uiSet"+r(d)](this.get(d))},_setAttrUI:function(a){if(a.target===this)this["_uiSet"+r(a.attrName)](a.newVal,a.src)},_strSetter:function(a){return f.merge(this.get("strings"),a)},getString:function(a){return this.get("strings")[a]},getStrings:function(){return this.get("strings")},_UI_ATTRS:{BIND:s,SYNC:s}});f.Widget=d},"3.5.1",{requires:"attribute,event-focus,base-base,base-pluginhost,node-base,node-style,classnamemanager".split(","),skinnable:!0});
